--// SERVICES
local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")
local HttpService = game:GetService("HttpService")
local player = Players.LocalPlayer

--// EXECUTOR REQUEST
local Request = (syn and syn.request)
	or http_request
	or request
	or (fluxus and fluxus.request)

if not Request then
	player:Kick("Executor not supported")
	return
end

--// API URL
local API_URL = "https://han2343.pythonanywhere.com/check"

--// KEY DARI LUAR
if typeof(script_key) ~= "string" or script_key == "" then
	player:Kick("‚ùå Key is required")
	return
end

--// NOTIFIKASI
local function ShowNotification(text)
	local gui = Instance.new("ScreenGui", player.PlayerGui)
	gui.Name = "NexaNotify"

	local frame = Instance.new("Frame", gui)
	frame.Size = UDim2.new(0, 320, 0, 60)
	frame.Position = UDim2.new(0.5, 0, 0, -80)
	frame.AnchorPoint = Vector2.new(0.5, 0)
	frame.BackgroundColor3 = Color3.fromRGB(25,25,25)
	Instance.new("UICorner", frame)

	local label = Instance.new("TextLabel", frame)
	label.Size = UDim2.new(1, -20, 1, 0)
	label.Position = UDim2.new(0, 10, 0, 0)
	label.BackgroundTransparency = 1
	label.TextWrapped = true
	label.Font = Enum.Font.Code
	label.TextSize = 14
	label.TextColor3 = Color3.fromRGB(255, 140, 0)
	label.Text = text

	TweenService:Create(frame, TweenInfo.new(0.3), {
		Position = UDim2.new(0.5, 0, 0, 40)
	}):Play()

	task.delay(2, function()
		gui:Destroy()
	end)
end

--// REQUEST KE API
local response = Request({
	Url = API_URL .. "?user_id=" .. player.UserId .. "&key=" .. script_key,
	Method = "GET",
	Headers = {["Content-Type"] = "application/json"}
})

if not response or not response.Body then
	ShowNotification("‚ùå Server tidak merespon")
	player:Kick("Server error")
	return
end

local data = HttpService:JSONDecode(response.Body)

if not data.allowed then
	ShowNotification("‚ùå Access denied")
	player:Kick("Access denied")
	return
end

--// LOAD SCRIPT DARI API
if not data.script then
	ShowNotification("‚ùå Script kosong")
	player:Kick("Script missing")
	return
end

ShowNotification("üíé Premium Access Granted")

pcall(function()
	loadstring(data.script)()
end)
