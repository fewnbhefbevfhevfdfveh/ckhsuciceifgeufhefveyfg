local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer
local Container = LocalPlayer.PlayerGui["Small Notification"].Display.Container

local Net = ReplicatedStorage:WaitForChild("Packages")
    :WaitForChild("_Index")
    :WaitForChild("sleitnick_net@0.2.0")
    :WaitForChild("net")

local ChargeFishingRod = Net:WaitForChild("RF/ChargeFishingRod")
local RequestFishingMinigameStarted = Net:WaitForChild("RF/RequestFishingMinigameStarted")

local AutoFishV2 = false  -- status toggle

-- Step Functions
local function Step1()
    Container.Position = UDim2.new(0.5, 0, -1.89999998, 1)
end

local function Step2()
    ChargeFishingRod:InvokeServer(1759130348.448756)
end

local function Step3()
    RequestFishingMinigameStarted:InvokeServer(-0.5718746185302734, 0.96170184695718)
end

-- Listener Step4
local lastPosition = Container.Position
local lastChangeTime = tick()

Container:GetPropertyChangedSignal("Position"):Connect(function()
    if AutoFishV2 then
        lastPosition = Container.Position
        lastChangeTime = tick()

        if Container.Position == UDim2.new(0.5, 0, 0.100000001, 0) then
            task.wait(0.01)
            Step2()
            task.wait(0.01)
            Step3()
        end
    end
end)

-- Watchdog untuk restart jika position tidak berubah 8 detik
task.spawn(function()
    while true do
        task.wait(1)
        if AutoFishV2 and tick() - lastChangeTime >= 8 then
            Step1()
            task.wait(0.01)
            Step2()
            task.wait(0.01)
            Step3()
            lastChangeTime = tick() -- reset timer
        end
    end
end)
