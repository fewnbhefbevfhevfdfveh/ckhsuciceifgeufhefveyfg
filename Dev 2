local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()
loadstring(game:HttpGet("https://raw.githubusercontent.com/xwvufdwgqudwyfwdvwedyuvwd/gbewufbeufbeugfvr/refs/heads/main/ggegrhrhhr%20Info%20Fish%20Mythic"))()

local workspace = workspace
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local hrp = character:WaitForChild("HumanoidRootPart")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local LocalPlayer = player -- alias supaya sama dengan LocalPlayer
local PlayerGui = player:WaitForChild("PlayerGui")

local GameData = {

   -- ================== [Codes] ==================

    Codes = {
        "1BILLION",
        "LUCKYTOTEM",
        "EXPANSION",
        "CRYSTALS"
    },


   -- ================== [Auto Trade] ==================

	TierMap001 = {
		[1] = "Common",
		[2] = "Uncommon",
		[3] = "Rare",
		[4] = "Epic",
		[5] = "Legendary",
		[6] = "Mythic",
		[7] = "SECRET"
	},

	TierList001 = {
		"Common", "Uncommon", "Rare", "Epic", "Legendary", "Mythic", "SECRET"
	},

	-----------------------------------------------------
	-- CORE SERVICES v29
	-----------------------------------------------------
	ReplicatedStoragev29 = game:GetService("ReplicatedStorage"),
	Playersv29 = game:GetService("Players"),
	HttpServicev29 = game:GetService("HttpService"),

	playerv29 = game:GetService("Players").LocalPlayer,

	Netv29 = require(game:GetService("ReplicatedStorage").Packages.Net),
	ReplionClientv29 = require(game:GetService("ReplicatedStorage").Packages.Replion).Client,
	DataReplionv29 = nil,

	ItemUtilityv29 = require(game:GetService("ReplicatedStorage").Shared.ItemUtility),

	TradeRemotev29 = game:GetService("ReplicatedStorage")
		:WaitForChild("Packages")
		:WaitForChild("_Index")
		:WaitForChild("sleitnick_net@0.2.0")
		:WaitForChild("net")
		:WaitForChild("RF/InitiateTrade"),

	ItemsFolderv29 = game:GetService("ReplicatedStorage"):WaitForChild("Items"),

	-----------------------------------------------------
	-- STATE v29
	-----------------------------------------------------
	statev29 = {
		selectedTiers = { "Common" },
		Auto2Trade = false,
		stopTrade = false,
		targetPlayer = "",
		fishTarget = 0,
		fishCount = 0,
		
		-- Fitur tambahan
		selectedItems = {}, -- Changed from selectedFish to selectedItems
		useItemFilter = false,
		enabledTypes = {  -- Added type filter config
			["Fish"] = true,
			["Enchant Stones"] = true
		}
	},

	TierListv29 = nil,
	nameToTierv29 = {},

	notifGuiv29 = nil,
	notifFramev29 = nil,

	PlayerMapv29 = {},

    -- ==================[Jenis Ikan v1]==================

        TierMap = {
        [1] = "Common",
        [2] = "Uncommon",
        [3] = "Rare",
        [4] = "Epic",
        [5] = "Legendary",
        [6] = "Mythic",
        [7] = "SECRET"
    },

    TierList = { "Common","Uncommon","Rare","Epic","Legendary","Mythic","SECRET" },

    FishCounter = {
        Common = 0,
        Uncommon = 0,
        Rare = 0,
        Epic = 0,
        Legendary = 0,
        Mythic = 0,
        SECRET = 0
    },

    -- ==================[Jenis Ikan v2]==================
        -- WEBHOOK
    WebhookURL = "",
    WebhookActive = false,
    SelectedTiers = {},
    TierList = {"All","Common","Uncommon","Rare","Epic","Legendary","Mythic","SECRET"},

    -- SERVICES
    Service = {
        Players = game:GetService("Players"),
        ReplicatedStorage = game:GetService("ReplicatedStorage"),
        HttpService = game:GetService("HttpService"),
    },

    -- EXECUTOR REQUEST
    Request = (syn and syn.request)
        or http_request
        or (fluxus and fluxus.request)
        or (krnl and request),

    -- FISHING SYSTEM DATA
    TierMap = {
        [1] = "Common",
        [2] = "Uncommon",
        [3] = "Rare",
        [4] = "Epic",
        [5] = "Legendary",
        [6] = "Mythic",
        [7] = "SECRET"
    },

    FishCounter = {
        Common = 0,
        Uncommon = 0,
        Rare = 0,
        Epic = 0,
        Legendary = 0,
        Mythic = 0,
        SECRET = 0
    },

    TierColor = {
        Common = 3092790,
        Uncommon = 5294200,
        Rare = 2061822,
        Epic = 11730944,
        Legendary = 15844367,
        Mythic = 14423100,
        SECRET = 16711853
    },

    LastFishData = nil,

    -- RUN-TIME UI STORAGE
    UI = {},

    -- ================== [Instant Fishing] ==================

    Players = game:GetService("Players"),
    ReplicatedStorage = game:GetService("ReplicatedStorage"),

    player = game:GetService("Players").LocalPlayer,
    PlayerGui = game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui"),

    package = game:GetService("ReplicatedStorage").Packages._Index["sleitnick_net@0.2.0"].net,

    miniggameArgs = {-1.233184814453125, 0.9972056628181873, 1763291794.158201},

    autoFishingEnabled = false,
    isFishing = false,

    castDelay = 1.5,
    completedDelay = 1,

    lastCatchTime = os.clock(),
    antiStuckTime = 10,

    -- ================== [Rod] ==================
    RodIDs = {
        ["Starter Rod"] = 1, ["Luck Rod"] = 79, ["Carbon Rod"] = 76,
        ["Grass Rod"] = 85, ["Demascus Rod"] = 77, ["Ice Rod"] = 78,
        ["Lucky Rod"] = 4, ["Midnight Rod"] = 80, ["Steampunk Rod"] = 6,
        ["Chrome Rod"] = 7, ["Fluorescent Rod"] = 255, ["Astral Rod"] = 5,
        ["Angler Rod"] = 168, ["Ares Rod"] = 126, ["Bamboo Rod"] = 258,
        ["Toy Rod"] = 84, ["Lava Rod"] = 2, ["Hazmat Rod"] = 256,
        ["Ghostfinn Rod"] = 169, ["Element Rod"] = 257, ["Angelic Rod"] = 124,
        ["Gold Rod"] = 8, ["Hyper Rod"] = 9
    },

    -- ================== [Bait] ==================
    BaitIDs = {
        ["Starter Bait"] = 1, ["Luck Bait"] = 2, ["Midnight Bait"] = 3,
        ["Gold Bait"] = 4, ["Hyper Bait"] = 5, ["Chroma Bait"] = 6,
        ["Dark Matter Bait"] = 8, ["Beach Ball Bait"] = 9, ["Topwater Bait"] = 10,
        ["Corrupt Bait"] = 15, ["Aether Bait"] = 16, ["Nature Bait"] = 17,
        ["Singularity Bait"] = 18, ["Royal Bait"] = 19, ["Floral Bait"] = 20
    },

    -- ================== [Boat] ==================
    BoatList = {
        ["Small Boat"] = 1, ["Kayak"] = 2, ["Jetski"] = 3, ["Highfield Boat"] = 4,
        ["Speed Boat"] = 5, ["Fishing Boat"] = 6, ["Mini Yacht"] = 14,
        ["Mini Hoverboat"] = 15, ["Hyper Boat"] = 7, ["Dinky Fishing Boat"] = 20,
        ["Aura Boat"] = 17, ["Burger Boat"] = 18, ["Mega Hovercraft"] = 19,
        ["Froen Boat"] = 11, ["Cruiser Boat"] = 13, ["Rubber Ducky"] = 16
    },

    -- ================== [Traveling Merchant] ==================

    ReplicatedStorage = game:GetService("ReplicatedStorage"),
    Replion = require(game:GetService("ReplicatedStorage").Packages.Replion),
    MarketItemData = require(game:GetService("ReplicatedStorage").Shared.MarketItemData),
    ItemUtility = require(game:GetService("ReplicatedStorage").Shared.ItemUtility),
    Merchant = nil,
    PurchaseRF = nil,
    SelectedMarketIDs = {},
    AutoPurchase = false,
    MerchantParagraph = nil,
    MerchantDropdown = nil,

    -- ================== [Weather] ==================

    Servicesv10 = {
        ReplicatedStoragev10 = game:GetService("ReplicatedStorage")
    },

    PurchaseWeatherv10 = nil,

    SelectedWeathersv10 = {},
    AutoPurchasev10 = false,

    -- ================== [Boat Shop] ==================

    Servicesv11 = {
        ReplicatedStoragev11 = game:GetService("ReplicatedStorage")
    },

    PurchaseBoatv11 = nil,
    PurchaseBoatOptionsv11 = {},

    SelectedPurchaseBoatIDv11 = nil,
    AutoBuyBoatv11 = false,

    -- ================== [Quest Ghostfinn Rod & Element Rod] ==================

    Players = game:GetService("Players"),

    LocalPlayer = nil,
    QuestList = nil,

    AutoQuest = false,
    AutoThread = nil,

    SelectedQuest = nil,

    QuestCFrame = {
        ["Element Quest"] = {
            Done = CFrame.new(
                1465.59375, -21.8705444, -640.086975,
                0.654575646, -1.02007647e-07, 0.755996525,
                1.08732081e-07, 1, 4.07862615e-08,
                -0.755996525, 5.55033779e-08, 0.654575646
            ),
            NotDone = CFrame.new(
                1514.1947, 15.4692411, -325.169708,
                -0.458554745, -6.99838267e-08, 0.888666153,
                -2.75111027e-08, 1, 6.45557208e-08,
                -0.888666153, 5.15414555e-09, -0.458554745
            )
        },

        ["Deep Sea Quest"] = {
            Done = CFrame.new(
                -3699.24292, -135.073914, -1008.78424,
                -0.972918034, 4.06628686e-08, 0.231150433,
                2.29877806e-08, 1, -7.91590224e-08,
                -0.231150433, -7.17015993e-08, -0.972918034
            ),
            NotDone = CFrame.new(
                -3621.14893, -279.07373, -1591.07593,
                0.938483, 5.50977823e-08, -0.345325381,
                -1.5321401e-08, 1, 1.1791461e-07,
                0.345325381, -1.05369992e-07, 0.938483
            )
        }
    },

    -- ================== [Status Quest Ghostfinn Rod & Element Rod] ==================

    Players = game:GetService("Players"),

    LocalPlayer = nil,
    QuestList = nil,

    ElementParagraph = nil,
    DeepSeaParagraph = nil,

    -- ================== [Auto Quest Diamond Rod] ==================

    Players = game:GetService("Players"),

    Player = nil,
    Character = nil,
    HRP = nil,

    AutoQuest = false,
    AutoThread = nil,

    QuestName = "Diamond Researcher",

    ObjectiveCFrame = {
        Obj2 = CFrame.new(
            -2925.67725, 3.24999976, 2083.38892,
            0.243188113, -5.11769471e-08, 0.969979167,
            -1.45992791e-08, 1, 5.64211291e-08,
            -0.969979167, -2.78819439e-08, 0.243188113
        ),
        Obj3 = CFrame.new(
            -2124.42578, 79.487114, 3673.15967,
            0.272527188, 7.98157416e-08, -0.96214807,
            -3.16044826e-08, 1, 7.40038502e-08,
            0.96214807, 1.02401305e-08, 0.272527188
        ),
        Obj4 = CFrame.new(
            -2551.72827, 27.9015656, 50.7129707,
            -0.512793481, -4.00187616e-08, -0.858511984,
            3.39993278e-09, 1, -4.86448926e-08,
            0.858511984, -2.78636669e-08, -0.512793481
        )
    },

    -- ================== [Progres Quest Diamond Rod] ==================

    Players = game:GetService("Players"),
    player = game:GetService("Players").LocalPlayer,

    inside = nil,
    ProgresDiamondRod = nil,

    descText = {},
    questName = "Diamond Researcher",

    -- ================== [Island] ==================
    Islands = {
    ["Kohana"] = CFrame.new(-642.243561, 16.0354481, 624.918884, 0.999580681, 0, -0.0289562326, 0, 1, 0, 0.0289562326, 0, 0.999580681),
    ["Winter Fest"] = CFrame.new(1687.93079, 6.8625145, 3309.67725, 0.96799022, -3.6394315e-08, -0.250987828, 1.06909646e-08, 1, -1.0377223e-07, 0.250987828, 9.77672059e-08, 0.96799022),
    ["Lost Isle"] = CFrame.new(-3660.07031, 26.1918774, -933.131897, -0.77232331, -7.22959044e-08, -0.635229647, -1.90984206e-08, 1, -9.05904614e-08, 0.635229647, -5.7833244e-08, -0.77232331),
    ["Isoteric Island"] = CFrame.new(2029.47913, 27.3972206, 1393.52319, 0.438848287, -3.30229497e-08, -0.89856118, 8.09404801e-08, 1, 2.55982613e-09, 0.89856118, -7.34489944e-08, 0.438848287),
    ["Crater Island"] = CFrame.new(973.268372, 7.36203814, 4879.09277, 0.99999994, -1.67766032e-08, -0.000279307278, 1.67553038e-08, 1, -7.62482344e-08, 0.000279307278, 7.62435519e-08, 0.99999994),
    ["Coral Reefs"] = CFrame.new(-3134.98511, 20.9564934, 2167.80566, 0.610140502, 5.54546098e-08, -0.792293251, -1.07331415e-08, 1, 6.17270004e-08, 0.792293251, -2.91583468e-08, 0.610140502),
    ["Kohana Volcano"] = CFrame.new(-525.122925, 24.0000591, 187.470749, 0.702778041, -1.4945584e-08, 0.711409211, 1.59372149e-09, 1, 1.18378477e-08, -0.711409211, -1.17821113e-08, 0.702778041),
    ["Fisherman Island"] = CFrame.new(33.5687256, 17.0335217, 2834.95557, 0.999833524, -8.21432367e-10, 0.0182459373, 2.40968401e-09, 1, 8.70248726e-08, -0.0182459373, 8.7054351e-08, 0.999833524),
    ["Esoteric Depths"] = CFrame.new(3152.74707, -1302.72986, 1438.05444, 0.442518562, -2.42594727e-08, -0.896759331, -8.6126515e-09, 1, 1.33023953e-08, 0.896759331, -2.15753335e-08, 0.442518562),
    ["Tropical Grove"] = CFrame.new(-2046.1554, 6.26801682, 3660.56006, -0.739083588, 1.74285066e-08, 0.673613727, -5.79817758e-08, 1, -8.94902854e-08, -0.673613727, -1.05198126e-07, -0.739083588),
    ["Treasure Room"] = CFrame.new(-3599.53491, -266.57373, -1566.98657),
    ["Weather Machine"] = CFrame.new(-1525.72632, 6.49999952, 1892.23645, 0.0615941137, 6.608282509e-10, -0.998101294, -6.8356556e-08, 1, 3.55628549e-09, 0.998101294, 6.84458072e-08, 0.0615941137),
    ["Sisyphus Statue"] = CFrame.new(-3692.22021, -135.574417, -1026.96167, -0.928567886, 9.83784361e-08, 0.371162564, 1.22746741e-07, 1, 4.20307664e-08, -0.371162564, 8.45874197e-08, -0.928567886),
    ["Ancient Jungle"] = CFrame.new(1275.54553, 7.85804176, -193.749756, 0.924119413, 5.65956171e-08, -0.382103801, -3.36512187e-08, 1, 6.67302302e-08, 0.382103801, -4.88084417e-08, 0.924119413),
    ["Underground Cellar Door"] = CFrame.new(1954.18994, -41.7413597, -577.574768, -0.817980289, 0.573604001, 0.0434255376, 0.572797239, 0.81913203, -0.0304316022, -0.0530269668, -1.84206292e-05, -0.998593211),
    ["Underground Cellar"] = CFrame.new(2120.27417, -93.1985779, -701.552185, -0.998591185, 0, 0.0530693457, 0, 1, 0, -0.0530693457, 0, -0.998591185),
    ["Temple Guardian"] = CFrame.new(1478.29846, 126.044891, -613.519653, -0.117893577, 0, 0.993026376, 0, 1, 0, -0.993026376, 0, -0.117893577),
    ["Mysterious Door"] = CFrame.new(1899.19629, 13.3589745, -577.593811, -0.0531117916, 0, -0.998588562, 0, 1, 0, 0.998588562, 0, -0.0531117916),
    ["Hourglass Diamond Artifact"] = CFrame.new(1485.66541, 5.41373634, -861.165161, -5.01871109e-05, 0.988927424, 0.148400292, -1, -5.01871109e-05, -3.74019146e-06, 3.74019146e-06, -0.148400292, 0.988927364),
    ["Arrow Artifact"] = CFrame.new(898.490479, 5.41373587, -361.212708, 9.11951065e-06, 0.0998446345, -0.994003104, -1, 9.11951065e-06, -8.2552433e-06, 8.2552433e-06, 0.994003104, 0.0998445749),
    ["Crescent Artifact"] = CFrame.new(1419.39148, 28.1637344, 79.5802917, 3.55243683e-05, -0.332731277, -0.943021655, -1, -3.55243683e-05, -2.51233578e-05, -2.51233578e-05, 0.943021655, -0.332731247),
    ["Diamond Artifact"] = CFrame.new(1818.72156, 5.41373634, -285.160828, -1.15633011e-05, -0.192806393, 0.981236815, -1, 1.15633011e-05, -9.53674316e-06, -9.53674316e-06, -0.981236815, -0.192806482),
    ["Sacred Temple"] = CFrame.new(1478.09546, 0.0774269104, -612.817993, 0.993017375, 0, 0.117968373, 0, 1, 0, -0.117968373, 0, 0.993017375),
    ["Crystalline Passage"] = CFrame.new(6053.09717, -538.900085, 4391.29102, -0.993590963, -1.39414302e-08, 0.10982503, 1.7823354e-10, 1, -7.10982503, 1.27797193e-07, -0.10982503, -0.993590963),
    ["Ancient Ruin"] = CFrame.new(6130.33203, -584.05603, 4632.95166, -0.171970293, -9.77156915e-08, 0.985102117, -7.319955083e-08, 1, 8.64156533e-08, -0.985102117, -5.722441259e-08, -0.171970293),
    ["Christmas Cave"] = CFrame.new(395.304199, -580.135071, 8901.16113, -0.0874395818, -1.4548089e-08, -0.996169806, 3.18401732e-08, 1, -1.73988202e-08, 0.996169806, -3.32395658e-08, -0.0874395818),
    ["Iron Cavern"] = CFrame.new(-8802.55762, -583.800049, 94.9271545, 0.539917707, 4.95349006e-08, -0.84171778, 2.88506321e-08, 1, 7.7355935e-08, 0.84171778, -6.60499282e-08, 0.539917707),
    ["Iron Cafe"] = CFrame.new(-8641.91016, -547.400183, 161.963455, -0.0101819877, -4.55452422e-08, -0.999948144, 1.64972356e-08, 1, -4.57155878e-08, 0.999948144, -1.69618559e-08, -0.0101819877),
    ["Christmas Island"] = CFrame.new(843.041687, 26.0803814, 1566.52734, 0.00453743944, -9.89134179e-08, -0.999989688, -5.82183262e-08, 1, -9.91785996e-08, 0.999989688, 5.86677444e-08, 0.00453743944),
    ["Pirate Treasure Room"] = CFrame.new(3302.10229, -293.803467, 3017.49951, -0.965538323, 3.13014077e-08, -0.26026091, 6.58369759e-09, 1, 9.58445767e-08, 0.26026091, 9.08281308e-08, -0.965538323),
    ["Pirate Cove"] = CFrame.new(3321.96069, 10.2510681, 3539.07275, 0.606894374, 7.27147054e-08, -0.794782519, -6.14758875e-08, 1, 4.45472033e-08, 0.794782519, 2.18245155e-08, 0.606894374),
    ["Crystal Depths"] = CFrame.new(5749.24365, -904.818481, 15403.3418, 0.748294473, 6.75499212e-09, 0.663366735, -9.15655163e-10, 1, -9.15001053e-09, -0.663366735, 6.23948715e-09, 0.748294473),
    ["Secret Passage"] = CFrame.new(3446.85132, -287.844818, 3397.55054, 0.929098547, 4.31005631e-08, 0.369832247, -3.45148621e-08, 1, -2.9832055e-08, -0.369832247, 1.49522119e-08, 0.929098547),
    ["Leviathan Room"] = CFrame.new(3474.32983, -287.843231, 3473.8208, -0.891127229, 2.03121733e-08, -0.453753531, 3.47882008e-08, 1, -2.35558275e-08, 0.453753531, -3.67765089e-08, -0.891127229),
--  [""] = CFrame.new(),
    },

    -- ==================[Save Posisi] ==================
    rootFolder = "SavedPositions",
    folder = nil,

    SavedPositions = {},
    options = {},

    selectedSlot = nil,
    customSlotName = "",
    teleportEnabled = false,

    LocalPlayer = game.Players.LocalPlayer,
    char = nil,
    hrp = nil,

    SaveInput = nil,
    SaveDropdown = nil,
    SaveButton = nil,
    DeleteButton = nil,
    RefreshButton = nil,

    bv = nil,
    bg = nil,

    -- ================== [Auto Unclock Ancient Ruin] ==================
    AutoUnlock = false,

    FishList = {
        "Goliath Tiger",
        "Crocodile",
        "Freshwater Piranha",
        "Sacred Guardian Squid"
    },

    -- ================== [Auto Open Mysterious Cave Wall] ==================
    AutoOpenWallv20 = false,
    Connectionv20 = nil,

    ReplicatedStoragev20 = game:GetService("ReplicatedStorage"),
    RunServicev20 = game:GetService("RunService"),

    NetFolderv20 = nil,
    RE_DialogueEndedv20 = nil,
    RE_SearchItemPickedUpv20 = nil,
    RE_GainAccessToMazev20 = nil,

    DialogueArgsv20 = { "Carpenter", 2, 1 },
    SearchItemArgsv20 = { "TNT" },

    ExecuteStepsv20 = function()
        GameData.RE_DialogueEndedv20:FireServer(unpack(GameData.DialogueArgsv20))

        task.wait(1)

        for i = 1, 4 do
            GameData.RE_SearchItemPickedUpv20:FireServer(unpack(GameData.SearchItemArgsv20))
            task.wait(0.5)
        end

        task.wait(1)

        GameData.RE_GainAccessToMazev20:FireServer()
    end,

    -- ================== [Accses All Boat] ==================

    Services = {
        Players = game:GetService("Players")
    },

    WorkspaceData = {
        Vehicles = workspace:WaitForChild("Vehicles")
    },

    Player = nil,

    AccessAllBoats = false,
    VehicleConnection = nil,

    OriginalOwners = {},

    -- ================== [Spawn Boat] ==================

    RS = game:GetService("ReplicatedStorage"),

    SpawnBoat = nil,

    SpawnBoatOptions = {},
    SelectedSpawnBoatID = nil,


    StageList = {
        ["rbxassetid://112089909495700"] = "Hourglass Diamond Artifact", -- Stage 1
        ["rbxassetid://108196402536011"] = "Arrow Artifact",             -- Stage 2
        ["rbxassetid://140438616753774"] = "Crescent Artifact",          -- Stage 3
        ["rbxassetid://122936451238995"] = "Diamond Artifact",           -- Stage 4
    },

    Jungle = workspace:WaitForChild("JUNGLE INTERACTIONS"),

    -- ================== [Lochness Status] ==================

    Workspace = workspace,

    CountdownLabel = nil,
    CountdownParagraph = nil,

    UpdateDelay = 1,

    -- ================== [Lochness Teleport] ==================

    Players = game:GetService("Players"),
    Workspace = workspace,

    LocalPlayer = nil,
    TimerLabel = nil,

    TargetCFrame = CFrame.new(
        6089.81396, -585.924194, 4637.24023,
        -0.800617278, 5.49377476e-08, 0.599176049,
        6.29061105e-08, 1, -7.63340946e-09,
        -0.599176049, 3.15803952e-08, -0.800617278
    ),

    AutoLochEnabled = false,
    SavedCFrame = nil,
    Teleporting = false,

    LoopDelay = 1,

    -- ================== [Totems] ==================

    ReplicatedStorage = game:GetService("ReplicatedStorage"),
    Client = nil,
    Data = nil,

    SpawnTotemRE = nil,

    TotemMap = {
        ["Luck Totem"] = 1,
        ["Mutation Totem"] = 2,
        ["Shiny Totem"] = 3,
    },

    SelectedTotemId = nil,
    SpawnToggle = false,

    -- ================== [Range Totem] ==================

    Players = game:GetService("Players"),

    LocalPlayer = nil,
    Totems = workspace:WaitForChild("Totems"),

    ShowTotemRange = false,

    RangeColor = Color3.fromRGB(255, 0, 0),
    RangeAlpha = 0.5,

    -- ================== [Blatant V1] ==================

    SVC = {
        RS = game:GetService("ReplicatedStorage")
    },

    net = nil,
    RF = {},
    RE = {},

    cutsceneController = nil,
    originalPlay = nil,
    originalStop = nil,

    EnableSkip = nil,
    Fastest = nil,
    startBlatantV2 = nil,

    -- ================== [Blatant V2] ==================

    ReplicatedStoragev19 = game:GetService("ReplicatedStorage"),
    Playersv19 = game:GetService("Players"),

    NetFolderv19 = nil,

    RF_ChargeFishingRodv19 = nil,
    RF_RequestMinigamev19 = nil,
    RF_CancelFishingInputsv19 = nil,
    RF_UpdateAutoFishingStatev19 = nil,
    RE_FishingCompletedv19 = nil,
    RE_MinigameChangedv19 = nil,

    Activev19 = false,

    Settingsv19 = {
        ChargeDelay = 0.007,
        CompleteDelay = 0.685,
        CancelDelay = 0.3
    },

    safeFirev19 = function(func)
        task.spawn(function()
            pcall(func)
        end)
    end,
    -- ================== [SKip Rraity] ==================

    Players = game:GetService("Players"),
    RS = game:GetService("ReplicatedStorage"),

    player = nil,

    net = nil,
    RF_CancelFishing = nil,
    RE_TextEffect = nil,

    RARITY_COLORS = {
        Common   = {1, 0.980392, 0.964706},
        Uncommon = {0.764706, 1, 0.333333},
        Rare     = {0.333333, 0.635294, 1},
        Epic     = {0.678431, 0.309804, 1},
    },

    lastProcessed = {},
    COOLDOWN = 1,

    -- ================== [Fish Caught] ==================

    ReplicatedStorage = game:GetService("ReplicatedStorage"),
    REFishCaught = nil,
    FishCount = 0,
    FishCountParagraph = nil,

    -- ================== [Image Botton] ==================

    TweenService = game:GetService("TweenService"),
    UIS = game:GetService("UserInputService"),
    CoreGui = game:GetService("CoreGui"),

    ScreenGui = nil,
    ToggleFrame = nil,
    ToggleBtn = nil,

    Corner = nil,
    Gradient = nil,
    Glow = nil,
    Stroke = nil,

    Dragging = false,

    -- ================== [Walkspeed, Jump Power, Gravity] ==================

    Player = nil,
    char = nil,
    hum = nil,

    WalkspeedEnabled = false,
    WalkspeedValue = 16,

    JumpEnabled = false,
    JumpValue = 50,

    GravityEnabled = false,
    GravityValue = 196.2,

    -- ================== [Infinite Zoom] ==================

    player = game:GetService("Players").LocalPlayer,
    infiniteZoomEnabled = false,

    -- ================== [Walk On Water] ==================

    Players = game:GetService("Players"),
    RunService = game:GetService("RunService"),

    -- Player data
    player = game:GetService("Players").LocalPlayer,
    character = nil,
    hrp = nil,

    -- Water settings
    waterHeight = -1.8,

    -- Runtime objects
    waterPlatform = nil,
    connection = nil,

    -- ================== [Remove VFX] ==================

    RS = game:GetService("ReplicatedStorage"),

    waterVFXFolder = nil,
    storedVFX = {},
    childAddedConn = nil,

    -- ================== [Anti AFK Time] ==================

    UserInputService = game:GetService("UserInputService"),

    intervalMinutes = 15,
    showSeconds = 10,

    lastInput = tick(),

    AntiAFKParagraph = nil,

    runtime = {
        totalSeconds = 0,
        minutes = 0,
        seconds = 0,
    },

    connections = {
        began = nil,
        changed = nil,
        ended = nil,
    },

    -- ================== [Teleport Service & Server Job Id] ==================

    TeleportService = game:GetService("TeleportService"),
    Players = game:GetService("Players"),
    HttpService = game:GetService("HttpService"),

    LocalPlayer = game:GetService("Players").LocalPlayer,
    PlaceId = game.PlaceId,
    TargetJobId = "",
    JobIdParagraph = nil,

    -- ================== [Hide Quest] ==================
    
    Players = game:GetService("Players"),
    Player = nil,

    PlayerGui = nil,
    QuestGui = nil,
    QuestList = nil,

    -- ================== [Boost FPS] ==================

	Servicesv8 = {
		Playersv8 = game:GetService("Players"),
		Lightingv8 = game:GetService("Lighting"),
		RunServicev8 = game:GetService("RunService"),
	},

	Terrainv8 = workspace:FindFirstChildOfClass("Terrain"),

	Playerv8 = game:GetService("Players").LocalPlayer,

	BoostEnabledv8 = false,
	Connectionsv8 = {},

	GRAYv8 = Color3.fromRGB(135,135,135),


    -- ================== [Anti Afk Toggle] ==================

    VIM = game:GetService("VirtualInputManager"),

    AntiAfkRunning = false,
    AntiAfkThread = nil,


    -- ================== [Fishing Animation V1] ==================

    Servicesv23 = {
        ReplicatedStoragev23 = game:GetService("ReplicatedStorage"),
        Playersv23 = game:GetService("Players"),
    },

    Playerv23 = nil,
    REFishCaughtv23 = nil,

    AnimationControllerv23 = nil,
    OldPlayAnimationv23 = nil,

    AnimationsFolderv23 = nil,

    FishCaughtListv23 = {},
    EquipIdleListv23 = {},

    FishCaughtMapv23 = {},
    EquipIdleMapv23 = {},

    SelectedFishCaughtIdv23 = nil,
    SelectedEquipIdleIdv23 = nil,

    FishCaughtEnabledv23 = false,
    EquipIdleEnabledv23 = false,

    BlockGameAnimv23 = false,

    FishCaughtTrackv23 = nil,
    EquipIdleTrackv23 = nil,

        -- ================== [Fishing Animation V2] ==================

    CustomAnimationEnabledv34 = false,
    SelectedAnimationWeaponv34 = "Holy Trident",

    Animationsv34 = require(game:GetService("ReplicatedStorage").Modules.Animations),

    AnimationBackupv34 = {},

    AnimationPresetsv34 = {
        ["The Vanquisher"] = {
            StartRodCharge = "The Vanquisher - StartRodCharge",
            RodThrow = "The Vanquisher - RodThrow",
            ReelStart = "The Vanquisher - ReelStart",
            ReelingIdle = "The Vanquisher - ReelingIdle",
            ReelIntermission = "The Vanquisher - ReelIntermission",
            FishCaught = "The Vanquisher - FishCaught",
            EquipIdle = "The Vanquisher - EquipIdle",
        },

        ["Soul Scythe"] = {
            StartRodCharge = "Soul Scythe - StartRodCharge",
            RodThrow = "Soul Scythe - RodThrow",
            ReelStart = "Soul Scythe - ReelStart",
            ReelingIdle = "Soul Scythe - ReelingIdle",
            ReelIntermission = "Soul Scythe - ReelIntermission",
            FishCaught = "Soul Scythe - FishCaught",
            EquipIdle = "Soul Scythe - EquipIdle",
        },

        ["Princess Parasol"] = {
            StartRodCharge = "Princess Parasol - StartRodCharge",
            RodThrow = "Princess Parasol - RodThrow",
            ReelStart = "Princess Parasol - ReelStart",
            ReelingIdle = "Princess Parasol - ReelingIdle",
            ReelIntermission = "Princess Parasol - ReelIntermission",
            FishCaught = "Princess Parasol - FishCaught",
            EquipIdle = "Princess Parasol - EquipIdle",
        },

        ["Oceanic Harpoon"] = {
            StartRodCharge = "Oceanic Harpoon - StartRodCharge",
            RodThrow = "Oceanic Harpoon - RodThrow",
            ReelStart = "Oceanic Harpoon - ReelStart",
            ReelingIdle = "Oceanic Harpoon - ReelingIdle",
            ReelIntermission = "Oceanic Harpoon - ReelIntermission",
            FishCaught = "Oceanic Harpoon - FishCaught",
            EquipIdle = "Oceanic Harpoon - EquipIdle",
        },

        ["Holy Trident"] = {
            StartRodCharge = "Holy Trident - StartRodCharge",
            RodThrow = "Holy Trident - RodThrow",
            ReelStart = "Holy Trident - ReelStart",
            ReelingIdle = "Holy Trident - ReelingIdle",
            ReelIntermission = "Holy Trident - ReelIntermission",
            FishCaught = "Holy Trident - FishCaught",
            EquipIdle = "Holy Trident - EquipIdle",
        },

        ["Gingerbread Katana"] = {
            StartRodCharge = "Gingerbread Katana - StartRodCharge",
            RodThrow = "Gingerbread Katana - RodThrow",
            ReelStart = "Gingerbread Katana - ReelStart",
            ReelingIdle = "Gingerbread Katana - ReelingIdle",
            ReelIntermission = "Gingerbread Katana - ReelIntermission",
            FishCaught = "Gingerbread Katana - FishCaught",
            EquipIdle = "Gingerbread Katana - EquipIdle",
        },

        ["Frozen Krampus Scythe"] = {
            StartRodCharge = "Frozen Krampus Scythe - StartRodCharge",
            RodThrow = "Frozen Krampus Scythe - RodThrow",
            ReelStart = "Frozen Krampus Scythe - ReelStart",
            ReelingIdle = "Frozen Krampus Scythe - ReelingIdle",
            ReelIntermission = "Frozen Krampus Scythe - ReelIntermission",
            FishCaught = "Frozen Krampus Scythe - FishCaught",
            EquipIdle = "Frozen Krampus Scythe - EquipIdle",
        },

        ["Eclipse Katana"] = {
            StartRodCharge = "Eclipse Katana - StartRodCharge",
            RodThrow = "Eclipse Katana - RodThrow",
            ReelStart = "Eclipse Katana - ReelStart",
            ReelingIdle = "Eclipse Katana - ReelingIdle",
            ReelIntermission = "Eclipse Katana - ReelIntermission",
            FishCaught = "Eclipse Katana - FishCaught",
            EquipIdle = "Eclipse Katana - EquipIdle",
        },

        ["Corruption Edge"] = {
            StartRodCharge = "Corruption Edge - StartRodCharge",
            RodThrow = "Corruption Edge - RodThrow",
            ReelStart = "Corruption Edge - ReelStart",
            ReelingIdle = "Corruption Edge - ReelingIdle",
            ReelIntermission = "Corruption Edge - ReelIntermission",
            FishCaught = "Corruption Edge - FishCaught",
            EquipIdle = "Corruption Edge - EquipIdle",
        },

        ["Christmas Parasol"] = {
            StartRodCharge = "Christmas Parasol - StartRodCharge",
            RodThrow = "Christmas Parasol - RodThrow",
            ReelStart = "Christmas Parasol - ReelStart",
            ReelingIdle = "Christmas Parasol - ReelingIdle",
            ReelIntermission = "Christmas Parasol - ReelIntermission",
            FishCaught = "Christmas Parasol - FishCaught",
            EquipIdle = "Christmas Parasol - EquipIdle",
        },

        ["Blackhole Sword"] = {
            StartRodCharge = "Blackhole Sword - StartRodCharge",
            RodThrow = "Blackhole Sword - RodThrow",
            ReelStart = "Blackhole Sword - ReelStart",
            ReelingIdle = "Blackhole Sword - ReelingIdle",
            ReelIntermission = "Blackhole Sword - ReelIntermission",
            FishCaught = "Blackhole Sword - FishCaught",
            EquipIdle = "Blackhole Sword - EquipIdle",
        },

        ["Eternal Flower"] = {
            StartRodCharge = "Eternal Flower - StartRodCharge",
            RodThrow = "Eternal Flower - RodThrow",
            ReelStart = "Eternal Flower - ReelStart",
            ReelingIdle = "Eternal Flower - ReelingIdle",
            ReelIntermission = "Eternal Flower - ReelIntermission",
            FishCaught = "Eternal Flower - FishCaught",
            EquipIdle = "Eternal Flower - EquipIdle",
        },

        ["Binary Edge"] = {
            StartRodCharge = "Binary Edge - StartRodCharge",
            RodThrow = "Binary Edge - RodThrow",
            ReelStart = "Binary Edge - ReelStart",
            ReelingIdle = "Binary Edge - ReelingIdle",
            ReelIntermission = "Binary Edge - ReelIntermission",
            FishCaught = "Binary Edge - FishCaught",
            EquipIdle = "Binary Edge - EquipIdle",
        },

        ["1x1x1x1 Ban Hammer"] = {
            StartRodCharge = "1x1x1x1 Ban Hammer - StartRodCharge",
            RodThrow = "1x1x1x1 Ban Hammer - RodThrow",
            ReelStart = "1x1x1x1 Ban Hammer - ReelStart",
            ReelingIdle = "1x1x1x1 Ban Hammer - ReelingIdle",
            ReelIntermission = "1x1x1x1 Ban Hammer - ReelIntermission",
            FishCaught = "1x1x1x1 Ban Hammer - FishCaught",
            EquipIdle = "1x1x1x1 Ban Hammer - EquipIdle",
        },
    },

    -- ================== [Auto Reconnect] ==================             

    Services = {
        Players = game:GetService("Players"),
        TeleportService = game:GetService("TeleportService"),
        GuiService = game:GetService("GuiService"),
    },

    Player = nil,
    PlaceId = game.PlaceId,

    AutoReconnect = false,

    Connections = {},

    -- ================== [Christmas Presents] ==================

    Servicesv2 = {
        ReplicatedStoragev2 = game:GetService("ReplicatedStorage"),
    },

    Packagesv2 = nil,
    Indexv2 = nil,
    NetPackagev2 = nil,
    Netv2 = nil,
    Remotev2 = nil,
    NpcFolderv2 = nil,

    AutoChristmasv2 = false,
    AutoThreadv2 = nil,

    -- ================== [Christmas Doors] ==================

    Servicesv1 = {
        ReplicatedStoragev1 = game:GetService("ReplicatedStorage"),
        Workspacev1 = game:GetService("Workspace"),
    },

    ChristmasDoorsv1 = nil,

    Packagesv1 = nil,
    Indexv1 = nil,
    NetPackagev1 = nil,
    Netv1 = nil,
    NetEventv1 = nil,

    AutoPresentChristmasDoorv1 = false,
    AutoThreadv1 = nil,

    -- ================== [Costumisasi Player] ==================

    Servicesv3 = {
        Playersv3 = game:GetService("Players"),
    },

    LocalPlayerv3 = nil,

    CustomNamev3 = "",
    CustomLevelv3 = "",
    OverheadEnabledv3 = false,

    Characterv3 = nil,
    HRPv3 = nil,
    Overheadv3 = nil,
    Contentv3 = nil,
    Headerv3 = nil,
    LevelContainerv3 = nil,
    LevelLabelv3 = nil,

    GetSuccessv3 = false,

    -- ================== [Auto Sell] ==================

    Servicesv4 = {
        ReplicatedStoragev4 = game:GetService("ReplicatedStorage"),
        Playersv4 = game:GetService("Players"),
    },

    Playerv4 = nil,

    SellRemotev4 = nil,
    FishCaughtRemotev4 = nil,

    AutoSellv4 = false,
    SellDelayv4 = 2,
    Modev4 = "Sell Delay",
    AutoSellLoopv4 = nil,

    SellCountTargetv4 = 18,
    FishCountv4 = 0,

    -- ================== [Report Bug] ==================

    Servicesv5 = {
        Playersv5 = game:GetService("Players"),
        TweenServicev5 = game:GetService("TweenService"),
        HttpServicev5 = game:GetService("HttpService"),
    },

    Playerv5 = game:GetService("Players").LocalPlayer,
    Camerav5 = workspace.CurrentCamera,

    Requestv5 = (syn and syn.request) or http_request or (fluxus and fluxus.request) or (krnl and request),

    DiscordWebhookv5 = "https://discord.com/api/webhooks/1421786317322457088/b6Xj6NHry0-wv-zKV8WftRQ9cgAGBZ6gAG1JsI7GfqFv50v1F25QFoSSNEgyXLQTN110",
    BugReportTextv5 = "",
    StrikeLimitv5 = 3,
    CooldownTimev5 = 15,
    Strikesv5 = 0,
    LastSubmitv5 = 0,
    Blockedv5 = false,

    ShakeIntensityv5 = 0.12,
    ShakeCountv5 = 10,
    ShakeDelayv5 = 0.025,

    BannedWordsv5 = {
        "anjing","bangsat","kontol","memek","ngentot",
        "tolol","goblok","asu",
        "fuck","shit","bitch","asshole","dick","pussy"
    },

    -- ================== [Auto Event Christmas Cave] ==================

    Servicesv6 = {
        Playersv6 = game:GetService("Players"),
    },

    Playerv6 = game:GetService("Players").LocalPlayer,
    Characterv6 = nil,
    HRPv6 = nil,
    NewCharacterv6 = nil,
    NewHRPv6 = nil,

    EventHoursv6 = {
        [1]=true,[3]=true,[5]=true,[7]=true,[9]=true,
        [11]=true,[13]=true,[15]=true,[17]=true,
        [19]=true,[21]=true,[23]=true
    },

    EventCFramev6 = CFrame.new(
        565.414368, -503.543457, 8881.04492,
        0.997363448, -1.51150346e-08, 0.0725680739,
        1.49435646e-08, 1, 2.90581958e-09,
        -0.0725680739, -1.81373261e-09, 0.997363448
    ),

    AutoEventEnabledv6 = false,
    Teleportedv6 = false,
    KeepTeleportingv6 = false,
    EventEndTimev6 = 0,
    OriginalCFramev6 = CFrame.new(),

    TimeNowv6 = 0,
    TimeTablev6 = {},

   -- ================== [Auto Join Event] ==================

    Playersv28 = game:GetService("Players"),
    RunServicev28 = game:GetService("RunService"),
    TweenServicev28 = game:GetService("TweenService"),

    Playerv28 = game:GetService("Players").LocalPlayer,

    HuntListv28 = {
        "Ghost Shark Hunt",
        "Megalodon Hunt",
        "Worm Hunt",
        "Shark Hunt",
    },

    SelectedHuntsv28 = {},
    Activev28 = false,
    CurrentHuntv28 = nil,
    SavedCFramev28 = nil,

    BVv28 = nil,
    BGv28 = nil,

    HRPv28 = nil,
    Propsv28 = nil,
    Modelv28 = nil,
    Targetv28 = nil,
    TargetPosv28 = nil,
    TeleportSuccessv28 = false,
    Tweenv28 = nil,
    PivotCFv28 = nil,
    Descendantv28 = nil,

   -- ================== [Drone Camera] ==================

	Servicesv28 = {
		Players = game:GetService("Players"),
		UIS = game:GetService("UserInputService"),
		RunService = game:GetService("RunService"),
	},

	Playerv28 = game:GetService("Players").LocalPlayer,
	Camerasv28 = workspace.CurrentCamera,

	Dronev28 = false,
	Speedv28 = 1.4,
	Sensitivityv28 = 0.3,

	Yawv28 = 0,
	Pitchv28 = 0,
	MoveForwardv28 = 0,
	MoveRightv28 = 0,

	GUIsv28 = nil,
	LeftFramev28 = nil,

	Buttonsv28 = {
		Forward = nil,
		Back = nil,
		Left = nil,
		Right = nil,
	},

   -- ================== [Ping Panel] ==================

    Servicesv7 = {
        Playersv7 = game:GetService("Players"),
        Statsv7 = game:GetService("Stats"),
        RunServicev7 = game:GetService("RunService"),
        TweenServicev7 = game:GetService("TweenService"),
        UISv7 = game:GetService("UserInputService"),
    },

    Playerv7 = game:GetService("Players").LocalPlayer,

    Guiv7 = nil,
    MainFramev7 = nil,

    PingTextv7 = nil,
    CpuTextv7 = nil,
    FpsTextv7 = nil,

    UpdateConnectionv7 = nil,

    -- Dragging state
    Draggingv7 = false,
    DragInputv7 = nil,
    DragStartv7 = nil,
    StartPosv7 = nil,

    -- FPS helper values
    _lastTickv7 = 0,
    _frameCountv7 = 0,
    _fpsv7 = 0,

    -- CPU MS value
    CPU_MSv7 = 0,
	--================ Botton Cancle ===============

	Servicesv9 = {
		ReplicatedStoragev9 = game:GetService("ReplicatedStorage"),
	},
	CancelFishingv9 = nil,

	--================ Teleport Player List ===============

    Servicesv12 = {
        Playersv12 = game:GetService("Players")
    },

    LocalPlayerv12 = nil,

    SelectedPlayerUsernamev12 = nil,
    PlayerDropdownv12 = nil,

    PlayerListv12 = {},
    AtPosv12 = nil,
    TargetPlayerv12 = nil,
    CurrentValuev12 = nil,
    NewValuesv12 = {},

	--================ Wind Ui Title Gradiant ===============

    RunServicev14 = game:GetService("RunService"),
    CoreGuiv14 = game:GetService("CoreGui"),

    Titlev14 = nil,
    Errv14 = nil,

    RootUIv14 = nil,
    WindUIv14 = nil,
    Pathv14 = nil,

    GetTitleFuncv14 = nil,

    UIGradientv14 = nil,
    GradientSpeedv14 = 35,

	--================ Translate Note Info ===============

    Players = game:GetService("Players"),

    Player = nil,
    Locale = nil,

    Translations = {
        ["en-us"] = {
            Title = "Note:",
            Desc = "For Quests 5 and 6, you are on your own."
        },
        ["id-id"] = {
            Title = "Catatan:",
            Desc = "Untuk Quest 5 dan 6, kamu harus menyelesaikannya sendiri."
        },
        ["ja-jp"] = {
            Title = "注意:",
            Desc = "クエスト5と6は自分でやってください。"
        }
    },

    -- UI
    Paragraph = nil,

    -- TEMP VARS
    Translation = nil,

	--================ Perfect Fishing ===============

    -- Services
    Players = game:GetService("Players"),
    ReplicatedStorage = game:GetService("ReplicatedStorage"),
    Camera = workspace.CurrentCamera,

    -- Player
    LocalPlayer = nil,

    -- Net
    Net = nil,

    -- Remotes
    RFRequestFishingMinigameStarted = nil,
    REReplicateTextEffect = nil,
    REFishingCompleted = nil,
    REPlayFishingEffect = nil,
    RFCancelFishingInputs = nil,

    -- State
    AutoFishing = false,
    CompletedDelay = 1.5,

    BaseLuckLabel = nil,
    BaseLuckX2 = false,
    FiredMinigame = false,

    -- Modules
    FishingModule = nil,
    ChargeModule = nil,

	--================ Auto Enchant ===============

    ReplicatedStoragev18 = game:GetService("ReplicatedStorage"),
    Playersv18 = game:GetService("Players"),
    HttpServicev18 = game:GetService("HttpService"),
    Playerv18 = game:GetService("Players").LocalPlayer,
    Netv18 = require(game:GetService("ReplicatedStorage").Packages.Net),
    RollEnchantREv18 = nil,
    ActivateAltarREv18 = nil,
    Replionv18 = require(game:GetService("ReplicatedStorage").Packages.Replion),
    Datav18 = nil,
    ItemUtilityv18 = require(game:GetService("ReplicatedStorage").Shared.ItemUtility),
    Enchantsv18 = require(game:GetService("ReplicatedStorage"):WaitForChild("Enchants")),
    ALL_ENCHANT_NAMESv18 = {},
    AUTO_ENCHANTv18 = false,
    DELAYv18 = 0.15,
    TARGET_ENCHANTSv18 = {},

	--================ Auto Favorite Fish ===============

    ReplicatedStoragev17 = game:GetService("ReplicatedStorage"),
    HttpServicev17 = game:GetService("HttpService"),
    Netv17 = nil,
    ReplionClientv17 = nil,
    ItemUtilityv17 = nil,
    DataReplionv17 = nil,
    FavoriteRemotev17 = nil,
    RATE = 0.06,
    LOOP_DELAY = 1,
    state = {
        selectedFish = {},
        autoFavorite = false,
        autoUnfavorite = false,
        stopFavorite = false,
        stopUnfavorite = false,
    },
    FishNameList = {},
    FishMap = {},
    ItemsFolderv17 = nil,

	--================ Auto Open Pirate Chests ===============

    PromptDelayv33 = 0.15,

    PirateChestStoragev33 = workspace:FindFirstChild("PirateChestStorage"),

	--================ No Animation ===============

    ReplicatedStoragev22 = game:GetService("ReplicatedStorage"),

    AnimationControllerv22 = nil,

    AnimDisabledv22 = false,

    OldPlayAnimationv22 = nil,
    OldStopAnimationv22 = nil,

	--================ Boost Cpu ===============

    Playersv25 = game:GetService("Players"),
    Lightingv25 = game:GetService("Lighting"),

    Playerv25 = nil,
    BoostRunningv25 = false,

	--================ Anti Staf ===============


	--================ Freeze Character ===============

    Playersv26 = game:GetService("Players"),
    UISv26 = game:GetService("UserInputService"),

    Playerv26 = game:GetService("Players").LocalPlayer,

    Freezev26 = false,

    Characterv26 = nil,
    Rootv26 = nil,

    BVv26 = nil,
    BGv26 = nil,

    FreezeTogglev26 = nil,

	--================ Black Screen ===============

    Playersv27 = game:GetService("Players"),

    Playerv27 = game:GetService("Players").LocalPlayer,

    BlackGuiv27 = nil,
    BlackFramev27 = nil,
    AFKTextv27 = nil,

    --================ Fish Quantity and Value Status ===============

    ReplicatedStoragev30 = game:GetService("ReplicatedStorage"),
    Clientv30 = nil,
    ItemUtilityv30 = nil,
    VendorUtilityv30 = nil,
    Datav30 = nil,

    FishQuantityv30 = nil,

    PreviousInventoryv30 = {},

    HistoryMissingCountv30 = 0,
    HistoryMissingValuev30 = 0,

    --================ Auto Save Posisi Player ===============

    Playerv31 = game.Players.LocalPlayer,

    FileNamev31 = "saveposition.txt",

    Characterv31 = nil,
    HRPv31 = nil,
    Positionv31 = nil,

    --================ Auto Tp To Save Position ===============

    Playerv32 = game.Players.LocalPlayer,

    FileNamev32 = "saveposition.txt",

    RawDatav32 = nil,
    Xv32 = nil,
    Yv32 = nil,
    Zv32 = nil,

    Characterv32 = nil,
    HRPv32 = nil,
}

    --================ Auto Save Posisi Player ===============

if writefile and not isfile(GameData.FileNamev31) then
    writefile(GameData.FileNamev31, "")
end

task.spawn(function()
    while true do
        task.wait(10)

        GameData.Characterv31 = GameData.Playerv31.Character
        GameData.HRPv31 = GameData.Characterv31
            and GameData.Characterv31:FindFirstChild("HumanoidRootPart")

        if GameData.HRPv31 then
            GameData.Positionv31 = GameData.HRPv31.Position
            writefile(
                GameData.FileNamev31,
                GameData.Positionv31.X .. "," ..
                GameData.Positionv31.Y .. "," ..
                GameData.Positionv31.Z
            )
        end
    end
end)

    --================ Auto Tp To Save Position ===============

if isfile(GameData.FileNamev32) then
    GameData.RawDatav32 = readfile(GameData.FileNamev32)

    GameData.Xv32, GameData.Yv32, GameData.Zv32 =
        GameData.RawDatav32:match("([%-%d%.]+),([%-%d%.]+),([%-%d%.]+)")

    if GameData.Xv32 and GameData.Yv32 and GameData.Zv32 then
        GameData.Characterv32 = GameData.Playerv32.Character
        GameData.HRPv32 = GameData.Characterv32
            and GameData.Characterv32:FindFirstChild("HumanoidRootPart")

        if GameData.HRPv32 then
            GameData.HRPv32.CFrame = CFrame.new(
                tonumber(GameData.Xv32),
                tonumber(GameData.Yv32),
                tonumber(GameData.Zv32)
            )
        end
    end
end

--================ Wind Ui ===============

local Window = WindUI:CreateWindow({
    Title = "NexaHub | Fish It!",
    Author = "by Han",
    Folder = "NexaHub Wind UIV2",
    Icon = "rbxassetid://123906607434048",
    NewElements = true,
    Transparent = true, 
    HideSearchBar = false,
    
    OpenButton = {
        Title = "Open .ftgs hub UI", -- can be changed
        CornerRadius = UDim.new(1,0), -- fully rounded
        StrokeThickness = 3, -- removing outline
        Enabled = false, -- enable or disable openbutton
        Draggable = true,
        OnlyMobile = false,
        
        Color = ColorSequence.new( -- gradient
            Color3.fromHex("#30FF6A"), 
            Color3.fromHex("#e7ff2f")
        )
    },
    Topbar = {
        Height = 44,
        ButtonsType = "Mac", -- Default or Mac
    }
})


Window:Tag({
    Title = "v0.1.6",
    Icon = "rocket",
    Color = Color3.fromHex("#1c1c1c"),
    Border = true,
})

Window:Tag({
    Title = "Premium",
    Icon = "star",
    Color = Color3.fromHex("#1c1c1c"),
    Border = true,
})


local Tabs = {
    Home = Window:Tab({ Title = "Home", Icon = "circle-fading-plus" }),
    Main = Window:Tab({ Title = "Main", Icon = "house" }),
    Backpack = Window:Tab({ Title = "Backpack", Icon = "backpack" }),
    Event = Window:Tab({ Title = "Event", Icon = "calendar" }),
    Quest = Window:Tab({ Title = "Quest", Icon = "scroll-text" }),
    Trading = Window:Tab({ Title = "Trading", Icon = "handshake" }),
    Shop = Window:Tab({ Title = "Shop", Icon = "shopping-cart" }),
    Boat = Window:Tab({ Title = "Boat", Icon = "sailboat" }),
    Tp = Window:Tab({ Title = "Teleport", Icon = "map-pin" }),
    Player = Window:Tab({ Title = "Player", Icon = "user" }),
    Config = Window:Tab({ Title = "Config", Icon = "folder" }),
}

local Sec = {}

local ConfigManager = Window.ConfigManager
local AutoConfigName = "NexaHub_FishIt_Auto_V1"
local AutoFeatureEnabled = false

Sec.Home1 = Tabs.Home:Section({
    Title = "Update Log",
    Box = true,
    BoxBorder = true,
    Opened = true,
})

	--================ UPDATE LIST ===============

Sec.Home1:Paragraph({
    Title = "Update List",
    Desc = [[
[+] Added Teleport to Leviathan Room
[+] Added Teleport to Crystal Depths
[+] Added Teleport to Secret Passage
]],
    Locked = false
})

Sec.Home2 = Tabs.Home:Section({
    Title = "Reward",
    Box = true,
    BoxBorder = true,
})

	--================ REDEM ALL CODE ===============

local ReplicatedStorage = game:GetService("ReplicatedStorage")

local NetFolder = ReplicatedStorage:WaitForChild("Packages")
    :WaitForChild("_Index")
    :WaitForChild("sleitnick_net@0.2.0")
    :WaitForChild("net")

local RedeemRF = NetFolder:WaitForChild("RF/RedeemCode")

Sec.Home2:Button({
    Title = "Redeem All Codes",
    Locked = false,

    Callback = function()
        WindUI:Notify({
            Title = "Redeem",
            Content = "Redeeming all codes...",
            Duration = 3,
            Icon = "loader"
        })

        for _, code in ipairs(GameData.Codes) do
            task.wait(1)

            local success = pcall(function()
                RedeemRF:InvokeServer(code)
            end)

            if success then
                WindUI:Notify({
                    Title = "Success",
                    Content = "Redeemed: " .. code,
                    Duration = 3,
                    Icon = "check"
                })
            else
                WindUI:Notify({
                    Title = "Failed",
                    Content = "Failed redeem: " .. code,
                    Duration = 3,
                    Icon = "x"
                })
            end
        end

        WindUI:Notify({
            Title = "Done",
            Content = "All redeem codes processed.",
            Duration = 4,
            Icon = "flag"
        })
    end
})

Sec.Home2:Button({
    Title = "Auto Claim Event Reward",
    Desc = "Automatically claim all event rewards",
    Locked = false,

    Callback = function()
        local ReplicatedStorage = game:GetService("ReplicatedStorage")

        local remote = ReplicatedStorage
            :WaitForChild("Packages")
            :WaitForChild("_Index")
            :WaitForChild("sleitnick_net@0.2.0")
            :WaitForChild("net")
            :WaitForChild("RE/ClaimEventReward")

        for i = 1, 15 do
            remote:FireServer(i)
            task.wait(1) -- safe delay
        end

        WindUI:Notify({
            Title = "Event Reward",
            Content = "All event rewards claimed",
            Duration = 3,
            Icon = "gift"
        })
    end
})

function GameData:GetRemotev2()
    self.Packagesv2 = self.Servicesv2.ReplicatedStoragev2:FindFirstChild("Packages")
    if not self.Packagesv2 then return end

    self.Indexv2 = self.Packagesv2:FindFirstChild("_Index")
    if not self.Indexv2 then return end

    self.NetPackagev2 = self.Indexv2:FindFirstChild("sleitnick_net@0.2.0")
    if not self.NetPackagev2 then return end

    self.Netv2 = self.NetPackagev2:FindFirstChild("net")
    if not self.Netv2 then return end

    self.Remotev2 = self.Netv2:FindFirstChild("RF/SpecialDialogueEvent")
    return self.Remotev2
end

function GameData:GetNpcFolderv2()
    self.NpcFolderv2 = self.Servicesv2.ReplicatedStoragev2:FindFirstChild("NPC")
    return self.NpcFolderv2
end

function GameData:StartAutoChristmassv2()
    if self.AutoThreadv2 then return end

    self.AutoThreadv2 = task.spawn(function()
        while self.AutoChristmasv2 do

            self:GetNpcFolderv2()
            self:GetRemotev2()

            if not self.NpcFolderv2 or not self.Remotev2 then
                task.wait(1)
            else
                for _, npc in ipairs(self.NpcFolderv2:GetChildren()) do
                    if not self.AutoChristmasv2 then break end

                    if npc:IsA("Folder") or npc:IsA("Model") then
                        pcall(function()
                            self.Remotev2:InvokeServer(npc.Name, "ChristmasPresents")
                        end)
                        task.wait(0.3)
                    end
                end
            end

            task.wait(1)
        end

        self.AutoThreadv2 = nil
    end)
end

function GameData:StopAutoChristmassv2()
    self.AutoChristmasv2 = false
    self.AutoThreadv2 = nil
end

Sec.Home2:Toggle({
    Title = "Auto Christmas Presents",
    Desc = "Automatically claim Christmas presents from NPC",
    Value = false,

    Callback = function(value)
        GameData.AutoChristmasv2 = value

        WindUI:Notify({
            Title = "Christmas Presents",
            Content = (value and "Enabled " or "Disabled ") .. "Auto Christmas Presents",
            Duration = 3,
            Icon = value and "gift" or "x"
        })

        if value then
            GameData:StartAutoChristmassv2()
        else
            GameData:StopAutoChristmassv2()
        end
    end
})

function GameData:InitNetv1()
    local success, err = pcall(function()
        self.Packagesv1 = self.Servicesv1.ReplicatedStoragev1:FindFirstChild("Packages")
        if not self.Packagesv1 then return end

        self.Indexv1 = self.Packagesv1:FindFirstChild("_Index")
        if not self.Indexv1 then return end

        self.NetPackagev1 = self.Indexv1:FindFirstChild("sleitnick_net@0.2.0")
        if not self.NetPackagev1 then return end

        self.Netv1 = self.NetPackagev1:FindFirstChild("net")
        if not self.Netv1 then return end

        self.NetEventv1 = self.Netv1:FindFirstChild("RF/SpecialDialogueEvent")
    end)
    return success
end

function GameData:InitDoorsv1()
    local success, err = pcall(function()
        self.ChristmasDoorsv1 = self.Servicesv1.Workspacev1:FindFirstChild("ChristmasDoors")
    end)
    return success
end

function GameData:StartAutoPresentv1()
    if self.AutoThreadv1 then return end

    self:InitNetv1()
    self:InitDoorsv1()

    self.AutoThreadv1 = task.spawn(function()
        while self.AutoPresentChristmasDoorv1 do
            if not self.ChristmasDoorsv1 or not self.NetEventv1 then
                task.wait(1)
                continue
            end

            for _, door in pairs(self.ChristmasDoorsv1:GetChildren()) do
                if not self.AutoPresentChristmasDoorv1 then break end

                pcall(function()
                    self.NetEventv1:InvokeServer(door.Name, "PresentChristmasDoor")
                end)

                task.wait(0.5)
            end

            task.wait(1)
        end

        self.AutoThreadv1 = nil
    end)
end

function GameData:StopAutoPresentv1()
    self.AutoPresentChristmasDoorv1 = false
    self.AutoThreadv1 = nil
end

Sec.Home2:Toggle({
    Title = "Auto Present Christmas Door",
    Desc = "Automatically claim Christmas door presents",
    Value = false,

    Callback = function(value)
        GameData.AutoPresentChristmasDoorv1 = value

        WindUI:Notify({
            Title = "Christmas Door",
            Content = (value and "Enabled " or "Disabled ") .. "Auto Present Christmas Door",
            Duration = 3,
            Icon = value and "gift" or "x"
        })

        if value then
            GameData:StartAutoPresentv1()
        else
            GameData:StopAutoPresentv1()
        end
    end
})

Sec.Main1 = Tabs.Main:Section({
    Title = "Fishing",
    Box = true,
    BoxBorder = true,
    Opened = true,
})

GameData.REFishCaught =
    GameData.ReplicatedStorage
        .Packages
        ._Index["sleitnick_net@0.2.0"]
        .net["RE/FishCaught"]

-- PARAGRAPH UI BARU
GameData.FishCountParagraph = Sec.Main1:Paragraph({
    Title = "Fish Caught",
    Desc = "Total: 0",
})

-- EVENT LISTENER
GameData.REFishCaught.OnClientEvent:Connect(function(fishName, data)
    GameData.FishCount += 1

    local lines = {
        "Total: " .. GameData.FishCount
    }

    if fishName ~= nil then
        table.insert(lines, "Last Fish: " .. tostring(fishName))
    end

    if type(data) == "table" then
        for key, value in pairs(data) do
            table.insert(lines, tostring(key) .. ": " .. tostring(value))
        end
    end

    GameData.FishCountParagraph:SetDesc(
        table.concat(lines, "\n")
    )
end)

	--================ Click & Instant Fishing ===============

local FishingController = require(ReplicatedStorage.Controllers.FishingController)
local AutoFishingController = require(ReplicatedStorage.Controllers.AutoFishingController)
local Replion = require(ReplicatedStorage.Packages.Replion)

local UpdateAutoFishingState = ReplicatedStorage
    :WaitForChild("Packages")
    :WaitForChild("_Index")
    :WaitForChild("sleitnick_net@0.2.0")
    :WaitForChild("net")
    :WaitForChild("RF/UpdateAutoFishingState")

local REReplicateTextEffect = ReplicatedStorage
	.Packages._Index["sleitnick_net@0.2.0"].net["RE/ReplicateTextEffect"]

local REFishingCompleted = ReplicatedStorage
	.Packages._Index["sleitnick_net@0.2.0"].net["RE/FishingCompleted"]


local SelectedMode = "Click"    
local AutoClickEnabled = false
local InstantEnabled = false

local ClickSpeed = 0.05
local remoteDelay = 1
local clickThread = nil

Sec.Main1:Dropdown({
    Title = "Select Auto Fish Mode",
    Flag = "SelectAutoFishMode",
    Desc = "Choose Auto Fishing Mode",
    Values = {
        { Title = "Click",   Icon = "mouse" },
        { Title = "Instant", Icon = "zap" }
    },
    Value = "Click",

    Callback = function(option)
        SelectedMode = option.Title

        WindUI:Notify({
            Title = "Mode Updated",
            Content = "Mode set to: " .. SelectedMode,
            Duration = 3,
            Icon = option.Icon
        })
    end
})

Sec.Main1:Input({
    Title = "Click Speed",
    Flag = "ClickDelay",
    Justify = "Center",
    Desc = "Auto Click Delay",
    Value = "0.05",
    Type = "Input",
    Placeholder = "Default: 0.05",

    Callback = function(input)
        local num = tonumber(input)
        if num and num > 0 then
            ClickSpeed = num

            WindUI:Notify({
                Title = "Speed Updated",
                Content = "Click Speed = " .. num,
                Duration = 3,
                Icon = "clock"
            })
        end
    end
})


local function performClick()
	FishingController:RequestFishingMinigameClick()
	task.wait(ClickSpeed + math.random() * ClickSpeed)
end

local originalRodStarted = FishingController.FishingRodStarted
local originalFishingStopped = FishingController.FishingStopped

FishingController.FishingRodStarted = function(self, ...)
	originalRodStarted(self, ...)
	if SelectedMode ~= "Click" then return end
	if not AutoClickEnabled then return end

	if clickThread then task.cancel(clickThread) end
	clickThread = task.spawn(function()
		while AutoClickEnabled do
			performClick()
		end
	end)
end

FishingController.FishingStopped = function(self, ...)
	originalFishingStopped(self, ...)
	if clickThread then
		task.cancel(clickThread)
		clickThread = nil
	end
end

Sec.Main1:Input({
    Title = "Delay Reel",
    Flag = "DelayReel",
    Justify = "Center",
    Desc = "Delay Before Reel",
    Value = "1",
    Type = "Input",
    Placeholder = "Default: 1",

    Callback = function(input)
        local num = tonumber(input)
        if num then
            remoteDelay = num

            WindUI:Notify({
                Title = "Delay Updated",
                Content = "Delay Reel = " .. num,
                Duration = 3,
                Icon = "timer"
            })
        end
    end
})


-- ==========================================================
-- LISTEN FOR REEL (AUTO COMPLETE)
-- ==========================================================
REReplicateTextEffect.OnClientEvent:Connect(function(data)
	if SelectedMode ~= "Instant" then return end
	if not InstantEnabled then return end
	if not data or not data.TextData then return end

	local attach = data.TextData.AttachTo
	if not attach or not attach.Parent then return end

	local player = Players:GetPlayerFromCharacter(attach.Parent)
	if player ~= LocalPlayer then return end

	task.delay(remoteDelay, function()
		if InstantEnabled then
			REFishingCompleted:FireServer()
		end
	end)
end)

-- ==========================================================
-- REMOTE AUTO FISH STATE
-- ==========================================================
local function updateRemoteState(bool)
	task.spawn(function()
		pcall(function()
			UpdateAutoFishingState:InvokeServer(bool)
		end)
	end)
end

Sec.Main1:Toggle({
    Title = "Auto Fishing",
    Flag = "Auto Fishing",
    Desc = "Auto Fishing Mode (Click / Instant)",
    Value = false,

    Callback = function(state) 

        -- Kirim remote setiap toggle
        updateRemoteState(state)

        -- Mode selector
        if SelectedMode == "Click" then
            AutoClickEnabled = state
            InstantEnabled = false
        elseif SelectedMode == "Instant" then
            InstantEnabled = state
            AutoClickEnabled = false
        end

        -- WindUI Notify
        WindUI:Notify({
            Title = "Auto Fishing",
            Content = "Mode: " .. SelectedMode .. " → " .. (state and "ON" or "OFF"),
            Duration = 3,
            Icon = "fish"
        })
    end
})

function GameData:CreateGuiv7()
    if self.Guiv7 then return end

    self.Guiv7 = Instance.new("ScreenGui")
    self.Guiv7.Name = "NexaNetworkStatsV7"
    self.Guiv7.ResetOnSpawn = false
    self.Guiv7.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    self.Guiv7.Parent = self.Playerv7:WaitForChild("PlayerGui")

    -- Main Container
    self.MainFramev7 = Instance.new("Frame")
    self.MainFramev7.Size = UDim2.new(0, 240, 0, 150)
    self.MainFramev7.Position = UDim2.new(0, 20, 0, 20)
    self.MainFramev7.BackgroundColor3 = Color3.fromRGB(15, 15, 20)
    self.MainFramev7.BackgroundTransparency = 0.1
    self.MainFramev7.BorderSizePixel = 0
    self.MainFramev7.Active = true
    self.MainFramev7.Selectable = true
    self.MainFramev7.Parent = self.Guiv7

    -- Outer Corner
    local outerCorner = Instance.new("UICorner")
    outerCorner.CornerRadius = UDim.new(0, 16)
    outerCorner.Parent = self.MainFramev7

    -- Main Stroke
    local mainStroke = Instance.new("UIStroke")
    mainStroke.Color = Color3.fromRGB(60, 100, 200)
    mainStroke.Thickness = 1.5
    mainStroke.Transparency = 0.3
    mainStroke.Parent = self.MainFramev7

    -- Gradient Background
    local gradient = Instance.new("UIGradient")
    gradient.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Color3.fromRGB(25, 25, 35)),
        ColorSequenceKeypoint.new(0.5, Color3.fromRGB(20, 20, 30)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(15, 15, 25))
    }
    gradient.Rotation = 45
    gradient.Parent = self.MainFramev7

    -- Glass Effect
    local glassFrame = Instance.new("Frame")
    glassFrame.Size = UDim2.new(1, 0, 1, 0)
    glassFrame.BackgroundTransparency = 0.95
    glassFrame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    glassFrame.BorderSizePixel = 0
    glassFrame.Parent = self.MainFramev7

    local glassCorner = Instance.new("UICorner")
    glassCorner.CornerRadius = UDim.new(0, 16)
    glassCorner.Parent = glassFrame

    -- Inner Container
    local innerFrame = Instance.new("Frame")
    innerFrame.Size = UDim2.new(1, -20, 1, -20)
    innerFrame.Position = UDim2.new(0, 10, 0, 10)
    innerFrame.BackgroundTransparency = 1
    innerFrame.Parent = self.MainFramev7

    -- Title Bar
    local titleBar = Instance.new("Frame")
    titleBar.Size = UDim2.new(1, 0, 0, 36)
    titleBar.BackgroundTransparency = 1
    titleBar.Parent = innerFrame

    -- Logo/Icon Owner di kiri (tanpa glow) - GANTI ASSET ID DENGAN LOGO ANDA
    local ownerLogo = Instance.new("ImageLabel")
    ownerLogo.Size = UDim2.new(0, 35, 0, 35)
    ownerLogo.Position = UDim2.new(0, 3, 0.5, -19)
    ownerLogo.BackgroundTransparency = 1
    ownerLogo.Image = "rbxassetid://118079068036615" -- GANTI DENGAN ASSET ID LOGO OWNER ANDA
    ownerLogo.ImageColor3 = Color3.fromRGB(255, 255, 255) -- Warna putih bersih
    ownerLogo.ImageTransparency = 0 -- Tidak transparan
    ownerLogo.ScaleType = Enum.ScaleType.Fit
    ownerLogo.Parent = titleBar

    -- Stroke halus untuk logo
    local logoStroke = Instance.new("UIStroke")
    logoStroke.Color = Color3.fromRGB(200, 200, 200)
    logoStroke.Thickness = 0.8
    logoStroke.Transparency = 0.2
    logoStroke.Parent = ownerLogo

    -- Icon Nexa Network (dipindah ke kanan sedikit)
    local titleIcon = Instance.new("ImageLabel")
    titleIcon.Size = UDim2.new(0, 20, 0, 20)
    titleIcon.Position = UDim2.new(0, 25, 0.5, -10) -- Posisi X diubah dari 0 ke 25
    titleIcon.BackgroundTransparency = 1
    titleIcon.Image = "rbxassetid://12171505282"
    titleIcon.ImageColor3 = Color3.fromRGB(100, 180, 255)
    titleIcon.ImageTransparency = 0.2
    titleIcon.Parent = titleBar

    -- Title Text
    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1, -55, 1, 0) -- Lebar dikurangi dari 30 ke 55
    title.Position = UDim2.new(0, 40, 0, 0) -- Posisi X diubah dari 28 ke 53
    title.BackgroundTransparency = 1
    title.Text = "NEXA X NETWORK PANEL"
    title.Font = Enum.Font.GothamBold
    title.TextSize = 14
    title.TextXAlignment = Enum.TextXAlignment.Left
    title.TextColor3 = Color3.fromRGB(200, 220, 255)
    title.Parent = titleBar

    -- Subtitle
    local subtitle = Instance.new("TextLabel")
    subtitle.Size = UDim2.new(1, -55, 0, 12) -- Lebar dikurangi dari 30 ke 55
    subtitle.Position = UDim2.new(0, 56, 0, 20) -- Posisi X diubah dari 28 ke 53
    subtitle.BackgroundTransparency = 1
    subtitle.Text = "Real-time Performance Metrics"
    subtitle.Font = Enum.Font.Gotham
    subtitle.TextSize = 10
    subtitle.TextXAlignment = Enum.TextXAlignment.Left
    subtitle.TextColor3 = Color3.fromRGB(150, 170, 200)
    subtitle.Parent = titleBar

    -- Separator
    local separator = Instance.new("Frame")
    separator.Size = UDim2.new(1, 0, 0, 1)
    separator.Position = UDim2.new(0, 0, 0, 38)
    separator.BackgroundColor3 = Color3.fromRGB(60, 100, 200)
    separator.BackgroundTransparency = 0.7
    separator.BorderSizePixel = 0
    separator.Parent = innerFrame

    -- Stats Container
    local statsContainer = Instance.new("Frame")
    statsContainer.Size = UDim2.new(1, 0, 1, -45)
    statsContainer.Position = UDim2.new(0, 0, 0, 45)
    statsContainer.BackgroundTransparency = 1
    statsContainer.Parent = innerFrame

    -- Stat Item Template Function (DIPERBAIKI)
    local function createStatItem(name, iconId, positionY)
        local container = Instance.new("Frame")
        container.Size = UDim2.new(1, 0, 0, 28)
        container.Position = UDim2.new(0, 0, 0, positionY)
        container.BackgroundTransparency = 1
        container.Parent = statsContainer

        local icon = Instance.new("ImageLabel")
        icon.Size = UDim2.new(0, 20, 0, 20)
        icon.Position = UDim2.new(0, 0, 0.5, -10)
        icon.BackgroundTransparency = 1
        icon.Image = "rbxassetid://" .. iconId
        icon.ImageColor3 = Color3.fromRGB(180, 200, 255)
        icon.Parent = container

        local label = Instance.new("TextLabel")
        label.Size = UDim2.new(0, 60, 1, 0)
        label.Position = UDim2.new(0, 28, 0, 0)
        label.BackgroundTransparency = 1
        label.Text = name .. ":"
        label.Font = Enum.Font.GothamSemibold
        label.TextSize = 12
        label.TextXAlignment = Enum.TextXAlignment.Left
        label.TextColor3 = Color3.fromRGB(180, 200, 220)
        label.Parent = container

        -- PERBAIKAN: Lebar valueFrame diperbesar
        local valueFrame = Instance.new("Frame")
        valueFrame.Size = UDim2.new(0, 135, 0, 24) -- DARI 120 KE 135
        valueFrame.Position = UDim2.new(1, -139, 0.5, -12) -- SESUAIKAN POSISI
        valueFrame.BackgroundColor3 = Color3.fromRGB(10, 15, 25)
        valueFrame.BackgroundTransparency = 0.8
        valueFrame.BorderSizePixel = 0
        valueFrame.Parent = container

        local valueCorner = Instance.new("UICorner")
        valueCorner.CornerRadius = UDim.new(0, 8)
        valueCorner.Parent = valueFrame

        local valueStroke = Instance.new("UIStroke")
        valueStroke.Color = Color3.fromRGB(40, 80, 160)
        valueStroke.Thickness = 1
        valueStroke.Transparency = 0.5
        valueStroke.Parent = valueFrame

        -- PERBAIKAN: Padding teks disesuaikan
        local valueText = Instance.new("TextLabel")
        valueText.Size = UDim2.new(1, -12, 1, 0) -- DARI -8 KE -12
        valueText.Position = UDim2.new(0, 6, 0, 0) -- DARI 4 KE 6
        valueText.BackgroundTransparency = 1
        valueText.Text = "--"
        valueText.Font = Enum.Font.GothamBold
        valueText.TextSize = 13
        valueText.TextXAlignment = Enum.TextXAlignment.Left
        valueText.TextColor3 = Color3.fromRGB(255, 255, 255)
        valueText.TextTruncate = Enum.TextTruncate.AtEnd -- Tambah truncate
        valueText.Parent = valueFrame

        return valueText
    end

    -- Create Stat Items
    self.PingTextv7 = createStatItem("PING", "140088536295002", 0) -- Network icon
    self.CpuTextv7 = createStatItem("CPU", "104660079852389", 32) -- CPU icon
    self.FpsTextv7 = createStatItem("FPS", "133224545848420", 64) -- Speedometer icon

    -- Status Indicator
    local statusBar = Instance.new("Frame")
    statusBar.Size = UDim2.new(0, 6, 1, -10)
    statusBar.Position = UDim2.new(1, -8, 0, 5)
    statusBar.BackgroundColor3 = Color3.fromRGB(0, 220, 120)
    statusBar.BorderSizePixel = 0
    statusBar.Parent = statsContainer

    local statusCorner = Instance.new("UICorner")
    statusCorner.CornerRadius = UDim.new(0, 3)
    statusCorner.Parent = statusBar

    self.StatusBar = statusBar

    -- Glow Effect (untuk panel utama, bukan untuk logo)
    local glow = Instance.new("ImageLabel")
    glow.Size = UDim2.new(1.5, 0, 1.5, 0)
    glow.Position = UDim2.new(0.5, 0, 0.5, 0)
    glow.AnchorPoint = Vector2.new(0.5, 0.5)
    glow.BackgroundTransparency = 1
    glow.Image = "rbxassetid://12171505282"
    glow.ImageColor3 = Color3.fromRGB(0, 100, 255)
    glow.ImageTransparency = 0.9
    glow.ZIndex = 0
    glow.Parent = self.MainFramev7

    -- Drag support for mouse & touch
    self.MainFramev7.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or
           input.UserInputType == Enum.UserInputType.Touch then
            self.Draggingv7 = true
            self.DragInputv7 = input
            self.DragStartv7 = input.Position
            self.StartPosv7 = self.MainFramev7.Position

            -- Animation feedback
            self.Servicesv7.TweenServicev7:Create(
                self.MainFramev7,
                TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
                {BackgroundTransparency = 0.2}
            ):Play()

            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    if self.DragInputv7 == input then
                        self.Draggingv7 = false
                        self.DragInputv7 = nil
                        
                        self.Servicesv7.TweenServicev7:Create(
                            self.MainFramev7,
                            TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
                            {BackgroundTransparency = 0.1}
                        ):Play()
                    end
                end
            end)
        end
    end)

    self.Servicesv7.UISv7.InputChanged:Connect(function(input)
        if self.Draggingv7 and input == self.DragInputv7 and
           (input.UserInputType == Enum.UserInputType.MouseMovement or
            input.UserInputType == Enum.UserInputType.Touch) then
            local delta = input.Position - self.DragStartv7
            self.MainFramev7.Position = UDim2.new(
                self.StartPosv7.X.Scale,
                self.StartPosv7.X.Offset + delta.X,
                self.StartPosv7.Y.Scale,
                self.StartPosv7.Y.Offset + delta.Y
            )
        end
    end)

    -- FPS helper vars
    self._lastTickv7 = tick()
    self._frameCountv7 = 0
    self._fpsv7 = 0

    -- Update loop
    self.UpdateConnectionv7 = self.Servicesv7.RunServicev7.RenderStepped:Connect(function()
        -- Ping
        local network = self.Servicesv7.Statsv7:FindFirstChild("Network")
        local pingValue = 0
        if network and network:FindFirstChild("ServerStatsItem") then
            local ping = network.ServerStatsItem:FindFirstChild("Data Ping")
            if ping then
                pingValue = math.floor(ping:GetValue())
            end
        end
        
        -- PERBAIKAN: Gunakan singkatan untuk menghemat ruang
        local pingColor, pingStatus
        if pingValue <= 50 then
            pingColor = Color3.fromRGB(0, 220, 120)
            pingStatus = "🟢" -- EXCELLENT -> EXC
        elseif pingValue <= 100 then
            pingColor = Color3.fromRGB(100, 220, 255)
            pingStatus = "🟢"
        elseif pingValue <= 200 then
            pingColor = Color3.fromRGB(255, 190, 60)
            pingStatus = "🟡"
        else
            pingColor = Color3.fromRGB(255, 80, 80)
            pingStatus = "🔴"
        end
        
        self.PingTextv7.Text = string.format("%d ms • %s", pingValue, pingStatus)
        self.Servicesv7.TweenServicev7:Create(
            self.PingTextv7,
            TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
            {TextColor3 = pingColor}
        ):Play()

        -- CPU ms
        local perf = self.Servicesv7.Statsv7:FindFirstChild("PerformanceStats")
        local cpuMs = self.CPU_MSv7
        if perf then
            local cpu = perf:FindFirstChild("CPU")
            if cpu then
                cpuMs = cpu:GetValue()
                self.CPU_MSv7 = cpuMs
            end
        end
        
        -- PERBAIKAN: Gunakan singkatan untuk menghemat ruang
        local cpuColor, cpuStatus
        if cpuMs <= 5 then
            cpuColor = Color3.fromRGB(0, 220, 120)
            cpuStatus = "🟢" -- OPTIMAL -> OPT
        elseif cpuMs <= 10 then
            cpuColor = Color3.fromRGB(100, 220, 255)
            cpuStatus = "🟢"
        elseif cpuMs <= 20 then
            cpuColor = Color3.fromRGB(255, 190, 60)
            cpuStatus = "🟡" -- MODERATE -> MOD
        else
            cpuColor = Color3.fromRGB(255, 80, 80)
            cpuStatus = "🔴" -- HIGH LOAD -> HIGH
        end
        
        self.CpuTextv7.Text = string.format("%.1f ms • %s", cpuMs, cpuStatus)
        self.Servicesv7.TweenServicev7:Create(
            self.CpuTextv7,
            TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
            {TextColor3 = cpuColor}
        ):Play()

        -- FPS
        self._frameCountv7 = self._frameCountv7 + 1
        local currentTick = tick()
        if currentTick - self._lastTickv7 >= 0.5 then
            self._fpsv7 = math.floor(self._frameCountv7 * 2)
            self._frameCountv7 = 0
            self._lastTickv7 = currentTick

            -- PERBAIKAN: Gunakan singkatan untuk menghemat ruang
            local fpsColor, fpsStatus
            if self._fpsv7 >= 120 then
                fpsColor = Color3.fromRGB(0, 220, 120)
                fpsStatus = "🟢" -- SMOOTH -> SMT
            elseif self._fpsv7 >= 60 then
                fpsColor = Color3.fromRGB(100, 220, 255)
                fpsStatus = "🟢"
            elseif self._fpsv7 >= 30 then
                fpsColor = Color3.fromRGB(255, 190, 60)
                fpsStatus = "🟡" -- PLAYABLE -> PLY
            else
                fpsColor = Color3.fromRGB(255, 80, 80)
                fpsStatus = "🔴" -- LAGGY -> LAG
            end
            
            self.FpsTextv7.Text = string.format("%d • %s", self._fpsv7, fpsStatus)
            self.Servicesv7.TweenServicev7:Create(
                self.FpsTextv7,
                TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
                {TextColor3 = fpsColor}
            ):Play()
            
            -- Update status bar based on overall performance
            local overallStatus = math.min(pingValue / 300, cpuMs / 20, (120 - math.min(self._fpsv7, 120)) / 120)
            local statusColor = Color3.new(2 - overallStatus * 2, overallStatus * 2, 0)
            
            self.Servicesv7.TweenServicev7:Create(
                self.StatusBar,
                TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
                {BackgroundColor3 = statusColor}
            ):Play()
        end
    end)
end

function GameData:RemoveGuiv7()
    if self.UpdateConnectionv7 then
        self.UpdateConnectionv7:Disconnect()
        self.UpdateConnectionv7 = nil
    end

    if self.Guiv7 then
        self.Guiv7:Destroy()
        self.Guiv7 = nil
        self.MainFramev7 = nil
        self.PingTextv7 = nil
        self.CpuTextv7 = nil
        self.FpsTextv7 = nil
        self.StatusBar = nil
    end
end

Sec.Main1:Toggle({
    Title = "Show Network Stats",
    Flag = "Show Network Stats",
    Desc = "Display advanced network panel with real-time metrics",
    Value = false,

    Callback = function(value)
        if value then
            GameData:CreateGuiv7()
        else
            GameData:RemoveGuiv7()
        end

        -- Notifikasi jika library Anda mendukung
        if WindUI and WindUI.Notify then
            WindUI:Notify({
                Title = "Network Stats",
                Content = value and "Panel Enabled • Monitoring Active" or "Panel Disabled",
                Duration = 3,
                Icon = "activity"
            })
        end
    end
})

GameData.CancelFishingv9 =
	GameData.Servicesv9.ReplicatedStoragev9
		:WaitForChild("Packages")
		:WaitForChild("_Index")
		:WaitForChild("sleitnick_net@0.2.0")
		:WaitForChild("net")
		:WaitForChild("RF/CancelFishingInputs")

Sec.Main1:Button({
	Title = "Cancel Fishing",
	Locked = false,
	Callback = function()
		pcall(function()
			GameData.CancelFishingv9:InvokeServer()
		end)
	end
})

Sec.Main9 = Tabs.Main:Section({
    Title = "Skip Rarity",
    Box = true,
    BoxBorder = true,
    Opened = false,
})

_G.RarityFilterEnabled = false
_G.BlacklistedRarity = { "Common" }

GameData.player = GameData.Players.LocalPlayer

GameData.net = GameData.RS.Packages._Index["sleitnick_net@0.2.0"].net
GameData.RF_CancelFishing = GameData.net:WaitForChild("RF/CancelFishingInputs")
GameData.RE_TextEffect = GameData.net:WaitForChild("RE/ReplicateTextEffect")

_G.BlacklistedRarity = _G.BlacklistedRarity or {}

Sec.Main9:Dropdown({
    Title = "Skip Rarity List",
    Flag = "Skip Rarity List",
    Desc = "Select rarities to skip",
    Values = {
        "Common",
        "Uncommon",
        "Rare",
        "Epic"
    },
    Value = { "Common" },
    Multi = true,
    AllowNone = true,

    Callback = function(selected)
        -- selected = { "Common", "Rare", ... }
        _G.BlacklistedRarity = selected
    end
})

Sec.Main9:Toggle({
    Title = "Skip Rarity",
    Flag = "Skip Rarity",
    Desc = "Skip selected fish rarities",
    Value = false,

    Callback = function(value)
        _G.RarityFilterEnabled = value

        WindUI:Notify({
            Title = "Skip Rarity",
            Content = value and "Enabled" or "Disabled",
            Duration = 3,
            Icon = value and "filter" or "x"
        })
    end
})


function GameData.approx(a, b, tol)
    return math.abs(a - b) <= (tol or 0.02)
end

function GameData.isColor(r,g,b,R,G,B)
    return GameData.approx(r,R) and GameData.approx(g,G) and GameData.approx(b,B)
end

function GameData.detectRarity(color3)
    if not color3 then return "UNKNOWN" end
    for rarity, c in pairs(GameData.RARITY_COLORS) do
        if GameData.isColor(color3.R, color3.G, color3.B, c[1], c[2], c[3]) then
            return rarity
        end
    end
    return "UNKNOWN"
end

GameData.RE_TextEffect.OnClientEvent:Connect(function(data)
    if not _G.RarityFilterEnabled then return end
    if not data or not data.TextData then return end
    if data.TextData.EffectType ~= "Exclaim" then return end

    local head = GameData.player.Character and GameData.player.Character:FindFirstChild("Head")
    if data.Container ~= head then return end

    local id = tostring(data)
    if GameData.lastProcessed[id] and tick() - GameData.lastProcessed[id] < GameData.COOLDOWN then
        return
    end
    GameData.lastProcessed[id] = tick()

    local color = data.TextData.TextColor
    if typeof(color) == "ColorSequence" then
        color = color.Keypoints[1].Value
    end
    if typeof(color) ~= "Color3" then return end

    local rarity = GameData.detectRarity(color):upper()

    for _, blocked in ipairs(_G.BlacklistedRarity) do
        if blocked:upper() == rarity then
            GameData.RF_CancelFishing:InvokeServer()
            return
        end
    end
end)

Sec.Main7 = Tabs.Main:Section({
    Title = "Perfect Fishing",
    Box = true,
    BoxBorder = true,
    Opened = false,
})

GameData.LocalPlayer = GameData.Players.LocalPlayer

--// ================= INIT NET =================
GameData.Net = GameData.ReplicatedStorage
    :WaitForChild("Packages")
    :WaitForChild("_Index")
    :WaitForChild("sleitnick_net@0.2.0")
    :WaitForChild("net")

--// ================= INIT REMOTES =================
GameData.RFRequestFishingMinigameStarted =
    GameData.Net:WaitForChild("RF/RequestFishingMinigameStarted")

GameData.REReplicateTextEffect =
    GameData.Net:WaitForChild("RE/ReplicateTextEffect")

GameData.REFishingCompleted =
    GameData.Net:WaitForChild("RE/FishingCompleted")

GameData.REPlayFishingEffect =
    GameData.Net:WaitForChild("RE/PlayFishingEffect")

GameData.RFCancelFishingInputs =
    GameData.Net:WaitForChild("RF/CancelFishingInputs")

--// ================= BASE LUCK UI =================
GameData.BaseLuckLabel =
    GameData.LocalPlayer.PlayerGui
        :WaitForChild("Charge")
        .Main.Frame.Top:WaitForChild("BaseLuck")

function GameData.CheckBaseLuck()
    local text = GameData.BaseLuckLabel.Text
    local luck = tonumber(text:match("x([%d%.]+)"))

    if luck and luck >= 1.9 then
        GameData.BaseLuckX2 = true
    else
        GameData.BaseLuckX2 = false
        GameData.FiredMinigame = false
    end
end

GameData.CheckBaseLuck()
GameData.BaseLuckLabel:GetPropertyChangedSignal("Text"):Connect(function()
    GameData.CheckBaseLuck()
end)

--// ================= GET MODULES =================
for _, v in pairs(getgc(true)) do
    if type(v) == "table" then
        if rawget(v, "_getPower") then
            GameData.FishingModule = v
        end
        if rawget(v, "RequestChargeFishingRod") then
            GameData.ChargeModule = v
        end
    end
end

--// ================= AUTO FISH LOOP =================
task.spawn(function()
    while task.wait(0) do
        if not GameData.AutoFishing then
            continue
        end

        -- START CHARGE
        if GameData.ChargeModule and not _G.confirmFishingInput then
            local center = Vector2.new(
                GameData.Camera.ViewportSize.X / 2,
                GameData.Camera.ViewportSize.Y / 2
            )

            GameData.ChargeModule:RequestChargeFishingRod(center)
        end

        -- FORCE MINIGAME (x2 LUCK)
        if GameData.BaseLuckX2
        and not GameData.FiredMinigame
        and GameData.FishingModule then

            GameData.FiredMinigame = true

            local power = GameData.FishingModule:_getPower()
            local serverTime = workspace:GetServerTimeNow()

            local hrp =
                GameData.LocalPlayer.Character
                and GameData.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")

            local hitY = hrp and hrp.Position.Y or 0

            pcall(function()
                GameData.RFRequestFishingMinigameStarted:InvokeServer(
                    hitY,
                    power,
                    serverTime
                )
            end)
        end
    end
end)

--// ================= AUTO COMPLETE =================
GameData.REReplicateTextEffect.OnClientEvent:Connect(function(data)
    if not GameData.AutoFishing then
        return
    end

    if not data or not data.TextData then
        return
    end

    if data.TextData.EffectType ~= "Exclaim" then
        return
    end

    local character = GameData.LocalPlayer.Character
    if not character then
        return
    end

    if data.Container ~= character:FindFirstChild("Head") then
        return
    end

    task.delay(GameData.CompletedDelay, function()
        if GameData.AutoFishing then
            pcall(function()
                GameData.REFishingCompleted:FireServer()
            end)
        end
    end)
end)

--// ================= CANCEL INPUT (INDEX 1–4) =================
GameData.REPlayFishingEffect.OnClientEvent:Connect(function(plr, head, index)

    -- 🔒 HARD STOP JIKA TOGGLE OFF
    if not GameData.AutoFishing then
        return
    end

    -- pastikan event untuk karakter kita
    if plr ~= GameData.LocalPlayer then
        return
    end

    -- hanya index 1–4
    if index >= 1 and index <= 4 then
        task.delay(0.1, function()
            if GameData.AutoFishing then
                pcall(function()
                    GameData.RFCancelFishingInputs:InvokeServer()
                end)
            end
        end)
    end
end)

--// ================= UI =================
Sec.Main7:Input({
    Title = "Completed Delay",
    Value = tostring(GameData.CompletedDelay),
    InputIcon = "timer",
    Placeholder = "1.5",
    Callback = function(input)
        local num = tonumber(input)
        if num then
            GameData.CompletedDelay = num
        end
    end
})

Sec.Main7:Toggle({
    Title = "Auto Fishing",
    Value = false,
    Callback = function(state)
        GameData.AutoFishing = state
    end
})
Sec.Main2 = Tabs.Main:Section({
    Title = "Instant",
    Box = true,
    BoxBorder = true,
    Opened = false,
})

GameData.ChargeFishingRod = GameData.package["RF/ChargeFishingRod"]
GameData.RequestFishingMinigameStarted = GameData.package["RF/RequestFishingMinigameStarted"]
GameData.REReplicateTextEffect = GameData.package["RE/ReplicateTextEffect"]
GameData.REFishingCompleted = GameData.package["RE/FishingCompleted"]
GameData.REFishCaught = GameData.package["RE/FishCaught"]
GameData.CancelFishingInputs = GameData.package["RF/CancelFishingInputs"]

local function SafeWait(t)
    local start = os.clock()
    while os.clock() - start < t do
        if not GameData.autoFishingEnabled then return false end
        task.wait()
    end
    return true
end

local function StartFishingCycle()
    if not GameData.autoFishingEnabled or GameData.isFishing then return end

    GameData.isFishing = true
    GameData.lastCatchTime = os.clock()

    GameData.ChargeFishingRod:InvokeServer()
    if not SafeWait(0.1) then return end

    GameData.RequestFishingMinigameStarted:InvokeServer(unpack(GameData.miniggameArgs))
end

task.spawn(function()
    while true do
        task.wait(0.1)

        if GameData.autoFishingEnabled and GameData.isFishing then
            if os.clock() - GameData.lastCatchTime >= GameData.antiStuckTime then

                print("[Anti-Stuck] Tidak ada FishCaught selama "..GameData.antiStuckTime.." detik. Reset fishing...")

                pcall(function()
                    GameData.CancelFishingInputs:InvokeServer()
                end)

                GameData.isFishing = false
                task.wait(0.1)

                StartFishingCycle()
            end
        end
    end
end)

GameData.REReplicateTextEffect.OnClientEvent:Connect(function(data)
    if not GameData.autoFishingEnabled or not data or not data.TextData then return end

    local attach = data.TextData.AttachTo
    if not attach or not attach.Parent then return end

    local playerFromChar = GameData.Players:GetPlayerFromCharacter(attach.Parent)
    if playerFromChar ~= GameData.player then return end

    task.spawn(function()
        if not SafeWait(GameData.completedDelay) then return end
        GameData.REFishingCompleted:FireServer()
    end)
end)

GameData.REFishCaught.OnClientEvent:Connect(function(fishName, data)
    if not GameData.autoFishingEnabled then return end

    GameData.lastCatchTime = os.clock()

    task.spawn(function()
        pcall(function()
            GameData.CancelFishingInputs:InvokeServer()
        end)

        GameData.isFishing = false
        if not SafeWait(GameData.castDelay) then return end

        StartFishingCycle()
    end)
end)

Sec.Main2:Toggle({
    Title = "Instant Fishing",
    Flag = "InstantFishingv1",
    Desc = "Enable instant fishing system",
    Value = false,
    Callback = function(state)
        GameData.autoFishingEnabled = state
        if state then
            StartFishingCycle()
        else
            GameData.isFishing = false
        end
    end
})

Sec.Main2:Input({
    Title = "Cast Delay",
    Flag = "CastDelayv1",
    Desc = "Delay before casting fishing rod",
    Value = "1.5",
    InputIcon = "clock",
    Type = "Input",
    Placeholder = "Default: 1.5",
    Callback = function(input)
        GameData.castDelay = tonumber(input) or 1.5
    end
})

Sec.Main2:Input({
    Title = "Completed Delay",
    Flag = "CompletedDelayv1",
    Desc = "Delay after fishing completed",
    Value = "1",
    InputIcon = "clock",
    Type = "Input",
    Placeholder = "Default: 1",
    Callback = function(input)
        GameData.completedDelay = tonumber(input) or 1
    end
})

Sec.Main2:Input({
    Title = "Anti-Stuck Time (Seconds)",
    Flag = "AntiStuckTime",
    Desc = "Auto reset if fishing stuck",
    Value = "10",
    InputIcon = "shield",
    Type = "Input",
    Placeholder = "Default: 10",
    Callback = function(input)
        local value = tonumber(input)
        if value then
            GameData.antiStuckTime = value
        end
    end
})

Sec.Main3 = Tabs.Main:Section({
    Title = "Animation Fishing",
    Box = true,
    BoxBorder = true,
    Opened = false,
})

GameData.Playerv23 = GameData.Servicesv23.Playersv23.LocalPlayer

GameData.REFishCaughtv23 =
    GameData.Servicesv23.ReplicatedStoragev23
        .Packages._Index["sleitnick_net@0.2.0"]
        .net["RE/FishCaught"]

GameData.AnimationsFolderv23 =
    GameData.Servicesv23.ReplicatedStoragev23
        :WaitForChild("Modules")
        :WaitForChild("Animations")

GameData.AnimationControllerv23 =
    require(GameData.Servicesv23.ReplicatedStoragev23.Controllers.AnimationController)

GameData.OldPlayAnimationv23 = GameData.AnimationControllerv23.PlayAnimation
GameData.AnimationControllerv23.PlayAnimation = function(self, animName, ...)
    if GameData.BlockGameAnimv23 then
        return
    end
    return GameData.OldPlayAnimationv23(self, animName, ...)
end

for _, anim in ipairs(GameData.AnimationsFolderv23:GetChildren()) do
    if anim:IsA("Animation") then
        if anim.Name:find("FishCaught") then
            table.insert(GameData.FishCaughtListv23, anim.Name)
            GameData.FishCaughtMapv23[anim.Name] = anim.AnimationId
        elseif anim.Name:find("EquipIdle") then
            table.insert(GameData.EquipIdleListv23, anim.Name)
            GameData.EquipIdleMapv23[anim.Name] = anim.AnimationId
        end
    end
end

function GameData:GetAnimatorv23()
    local char = self.Playerv23.Character or self.Playerv23.CharacterAdded:Wait()
    local hum = char:FindFirstChildOfClass("Humanoid")
    if not hum then return end

    local animator = hum:FindFirstChildOfClass("Animator")
    if not animator then
        animator = Instance.new("Animator", hum)
    end
    return animator
end

function GameData:PlayEquipIdlev23()
    if not self.EquipIdleEnabledv23 then return end
    if not self.SelectedEquipIdleIdv23 then return end

    local animator = self:GetAnimatorv23()
    if not animator then return end

    if self.EquipIdleTrackv23 then
        self.EquipIdleTrackv23:Stop()
        self.EquipIdleTrackv23:Destroy()
    end

    local anim = Instance.new("Animation")
    anim.AnimationId = self.SelectedEquipIdleIdv23

    local track = animator:LoadAnimation(anim)
    track.Looped = true
    track.Priority = Enum.AnimationPriority.Idle
    track:Play()

    self.EquipIdleTrackv23 = track
end

function GameData:StopEquipIdleTempv23()
    if self.EquipIdleTrackv23 then
        self.EquipIdleTrackv23:Stop()
    end
end

function GameData:PlayFishCaughtv23()
    if not self.FishCaughtEnabledv23 then return end
    if not self.SelectedFishCaughtIdv23 then return end

    local animator = self:GetAnimatorv23()
    if not animator then return end

    self:StopEquipIdleTempv23()

    if self.FishCaughtTrackv23 then
        self.FishCaughtTrackv23:Stop()
        self.FishCaughtTrackv23:Destroy()
    end

    local anim = Instance.new("Animation")
    anim.AnimationId = self.SelectedFishCaughtIdv23

    local track = animator:LoadAnimation(anim)
    track.Priority = Enum.AnimationPriority.Action
    track:Play()

    self.FishCaughtTrackv23 = track

    track.Stopped:Once(function()
        task.delay(0.1, function()
            GameData:PlayEquipIdlev23()
        end)
    end)
end

GameData.REFishCaughtv23.OnClientEvent:Connect(function()
    GameData:PlayFishCaughtv23()
end)

Sec.Main3:Dropdown({
    Title = "FishCaught Animation V1",
    Flag = "FishCaughtAnimV1",
    SearchBarEnabled = true,
    Values = GameData.FishCaughtListv23,
    Callback = function(value)
        GameData.SelectedFishCaughtIdv23 = GameData.FishCaughtMapv23[value]
    end
})

Sec.Main3:Dropdown({
    Title = "EquipIdle Animation V1",
    Flag = "EquipIdleAnimV1",
    SearchBarEnabled = true,
    Values = GameData.EquipIdleListv23,
    Callback = function(value)
        GameData.SelectedEquipIdleIdv23 = GameData.EquipIdleMapv23[value]
        GameData:PlayEquipIdlev23()
    end
})

Sec.Main3:Toggle({
    Title = "Enable FishCaught V1",
    Flag = "EnableFishCaughtV1",
    Value = false,
    Callback = function(value)
        GameData.FishCaughtEnabledv23 = value
        GameData.BlockGameAnimv23 = value

        if value then
            pcall(function()
                GameData.AnimationControllerv23:DestroyActiveAnimationTracks()
            end)
        end
    end
})

Sec.Main3:Toggle({
    Title = "Enable EquipIdle V1",
    Flag = "EnableEquipIdleV1",
    Value = false,
    Callback = function(value)
        GameData.EquipIdleEnabledv23 = value
        GameData.BlockGameAnimv23 = value

        if not value and GameData.EquipIdleTrackv23 then
            GameData.EquipIdleTrackv23:Stop()
            GameData.EquipIdleTrackv23:Destroy()
            GameData.EquipIdleTrackv23 = nil
        end

        if value then
            GameData:PlayEquipIdlev23()
        end
    end
})

Sec.Main3:Space()

for namev34, animv34 in pairs(GameData.Animationsv34) do
    if typeof(animv34) == "Instance" then
        GameData.AnimationBackupv34[namev34] = animv34
    end
end

GameData.ApplyAnimationPresetv34 = function()
    for namev34, animv34 in pairs(GameData.AnimationBackupv34) do
        GameData.Animationsv34[namev34] = animv34
    end

    if not GameData.CustomAnimationEnabledv34 then
        return
    end

    local presetv34 =
        GameData.AnimationPresetsv34[GameData.SelectedAnimationWeaponv34]
    if not presetv34 then return end

    for defaultNamev34, overrideNamev34 in pairs(presetv34) do
        if GameData.Animationsv34[overrideNamev34] then
            GameData.Animationsv34[defaultNamev34] =
                GameData.Animationsv34[overrideNamev34]
        end
    end
end

if typeof(GameData.Animationsv34.GetAnimation) == "function" then
    GameData.Animationsv34.GetAnimation = function(_, namev34)
        if not GameData.CustomAnimationEnabledv34 then
            return GameData.Animationsv34[namev34]
        end

        local presetv34 =
            GameData.AnimationPresetsv34[GameData.SelectedAnimationWeaponv34]

        if presetv34 and presetv34[namev34]
            and GameData.Animationsv34[presetv34[namev34]] then
            return GameData.Animationsv34[presetv34[namev34]]
        end

        return GameData.Animationsv34[namev34]
    end
end

ProtectCallback = _G.ProtectCallback

Sec.Main3:Dropdown({
    Title = "Custom Animation Weapon V2",
    Flag = "CustomAnimationWeaponV2",
    Values = {
        "The Vanquisher","Soul Scythe","Princess Parasol","Oceanic Harpoon",
        "Holy Trident","Gingerbread Katana","Frozen Krampus Scythe",
        "Eternal Flower","Eclipse Katana","Corruption Edge","Christmas Parasol",
        "Blackhole Sword","Binary Edge","1x1x1x1 Ban Hammer",
    },
    Value = "Holy Trident",
    Callback = ProtectCallback and ProtectCallback(function(optionv34)
        GameData.SelectedAnimationWeaponv34 = optionv34
        GameData.ApplyAnimationPresetv34()
    end) or function(optionv34)
        GameData.SelectedAnimationWeaponv34 = optionv34
        GameData.ApplyAnimationPresetv34()
    end
})

Sec.Main3:Toggle({
    Title = "Enable Custom Animations V2",
    Flag = "EnableCustomAnimationsV2",
    Value = false,
    Callback = function(statev34)
        GameData.CustomAnimationEnabledv34 = statev34
        GameData.ApplyAnimationPresetv34()
    end
})

Sec.Main4 = Tabs.Main:Section({
    Title = "Blatant",
    Box = true,
    BoxBorder = true,
    Opened = true,
})

GameData.AnimationControllerv22 =
    require(GameData.ReplicatedStoragev22.Controllers.AnimationController)

GameData.OldPlayAnimationv22 = GameData.AnimationControllerv22.PlayAnimation
GameData.OldStopAnimationv22 = GameData.AnimationControllerv22.StopAnimation

GameData.AnimationControllerv22.PlayAnimation = function(self, animName, ...)
    if GameData.AnimDisabledv22 then
        return
    end
    return GameData.OldPlayAnimationv22(self, animName, ...)
end

Sec.Main4:Toggle({
    Title = "No Animation",
    Value = false,
    Callback = function(state)
        GameData.AnimDisabledv22 = state

        if state then
            pcall(function()
                if GameData.AnimationControllerv22.DestroyActiveAnimationTracks then
                    GameData.AnimationControllerv22:DestroyActiveAnimationTracks()
                end
            end)
        end
    end
})

-- SETUP NET
GameData.net = GameData.SVC.RS.Packages._Index["sleitnick_net@0.2.0"]:WaitForChild("net")

GameData.RF = {
    ChargeFishingRod = GameData.net:WaitForChild("RF/ChargeFishingRod"),
    RequestFishingMinigameStarted = GameData.net:WaitForChild("RF/RequestFishingMinigameStarted"),
    CancelFishing = GameData.net:WaitForChild("RF/CancelFishingInputs")
}

GameData.RE = {
    FishingCompleted = GameData.net:WaitForChild("RE/FishingCompleted"),
    FishCaught = GameData.net:WaitForChild("RE/FishCaught")
}

-- CUTSCENE CONTROLLER
do
    local ok, controller = pcall(function()
        return require(GameData.SVC.RS.Controllers.CutsceneController)
    end)

    if ok and controller then
        GameData.cutsceneController = controller
        GameData.originalPlay = controller.Play
        GameData.originalStop = controller.Stop
    end
end

-- ENABLE SKIP SYSTEM
GameData.EnableSkip = function()
    if GameData.cutsceneController then
        if GameData.cutsceneController.ReplicateCutscene then
            GameData.cutsceneController.ReplicateCutscene.OnClientEvent:Connect(function() end)
        end
        if GameData.cutsceneController.StopCutscene then
            GameData.cutsceneController.StopCutscene.OnClientEvent:Connect(function() end)
        end

        GameData.cutsceneController.Play = function() end
        GameData.cutsceneController.Stop = function() end
    end
end

GameData.EnableSkip()

-- GLOBAL CONFIG
_G.BlatantV2 = false
_G.DelayLoopStartV2 = 1.78     -- delay cast
_G.DelayCompleteV2 = 0.7       -- delay complete + cancel

-- AUTO CANCEL SAAT FISH CAUGHT
local lastCancel = 0
GameData.RE.FishCaught.OnClientEvent:Connect(function()
    if tick() - lastCancel < 0.001 then return end
    lastCancel = tick()

    pcall(function()
        GameData.RF.CancelFishing:InvokeServer()
    end)
end)

-- FASTEST FUNCTION
GameData.Fastest = function()
    task.spawn(function()
        task.wait(_G.DelayCompleteV2)
        pcall(function() GameData.RF.CancelFishing:InvokeServer() end)
        pcall(function() GameData.RF.ChargeFishingRod:InvokeServer(workspace:GetServerTimeNow()) end)
        pcall(function() GameData.RF.RequestFishingMinigameStarted:InvokeServer(-1, 0.999) end)

        task.wait(_G.DelayCompleteV2)
        pcall(function() GameData.RE.FishingCompleted:FireServer() end)
    end)
end

-- LOOP START
GameData.startBlatantV2 = function()
    task.spawn(function()
        while _G.BlatantV2 do
            GameData.Fastest()
            task.wait(_G.DelayLoopStartV2)
        end
    end)
end

Sec.Main4:Input({
    Title = "Delay Cast V1",
    Flag = "DelayCastV1",
    Value = "1.78",
    InputIcon = "clock",
    Type = "Input",
    Placeholder = "1.78 Or 1.9",

    Callback = function(input)
        local num = tonumber(input)
        if num then
            _G.DelayLoopStartV2 = num
        end
    end
})

Sec.Main4:Input({
    Title = "Delay Complete V1",
    Flag = "DelayCompleteV1",
    Value = "0.7",
    InputIcon = "clock",
    Type = "Input",
    Placeholder = "0.7 Or 0.8",

    Callback = function(input)
        local num = tonumber(input)
        if num then
            _G.DelayCompleteV2 = num
        end
    end
})

Sec.Main4:Toggle({
    Title = "Blatant V1",
    Flag = "BlatantV1",
    Value = _G.BlatantV2,

    Callback = function(value)
        _G.BlatantV2 = value
        if value then
            GameData.startBlatantV2()
        end
    end
})


Sec.Main4:Space()

GameData.NetFolderv19 = GameData.ReplicatedStoragev19
    :WaitForChild("Packages")
    :WaitForChild("_Index")
    :WaitForChild("sleitnick_net@0.2.0")
    :WaitForChild("net")

GameData.RF_ChargeFishingRodv19 = GameData.NetFolderv19:WaitForChild("RF/ChargeFishingRod")
GameData.RF_RequestMinigamev19 = GameData.NetFolderv19:WaitForChild("RF/RequestFishingMinigameStarted")
GameData.RF_CancelFishingInputsv19 = GameData.NetFolderv19:WaitForChild("RF/CancelFishingInputs")
GameData.RF_UpdateAutoFishingStatev19 = GameData.NetFolderv19:WaitForChild("RF/UpdateAutoFishingState")
GameData.RE_FishingCompletedv19 = GameData.NetFolderv19:WaitForChild("RE/FishingCompleted")
GameData.RE_MinigameChangedv19 = GameData.NetFolderv19:WaitForChild("RE/FishingMinigameChanged")

function GameData.ultraSpamLoopv19()
    while GameData.Activev19 do
        local startTime = tick()

        GameData.safeFirev19(function()
            GameData.RF_ChargeFishingRodv19:InvokeServer({ [1] = startTime })
        end)

        task.wait(GameData.Settingsv19.ChargeDelay)

        local releaseTime = tick()
        GameData.safeFirev19(function()
            GameData.RF_RequestMinigamev19:InvokeServer(1, 0, releaseTime)
        end)

        task.wait(GameData.Settingsv19.CompleteDelay)

        GameData.safeFirev19(function()
            GameData.RE_FishingCompletedv19:FireServer()
        end)

        task.wait(GameData.Settingsv19.CancelDelay)

        GameData.safeFirev19(function()
            GameData.RF_CancelFishingInputsv19:InvokeServer()
        end)
    end
end

GameData.RE_MinigameChangedv19.OnClientEvent:Connect(function()
    if not GameData.Activev19 then return end

    task.spawn(function()
        task.wait(GameData.Settingsv19.CompleteDelay)

        GameData.safeFirev19(function()
            GameData.RE_FishingCompletedv19:FireServer()
        end)

        task.wait(GameData.Settingsv19.CancelDelay)

        GameData.safeFirev19(function()
            GameData.RF_CancelFishingInputsv19:InvokeServer()
        end)
    end)
end)

function GameData.UpdateSettingsv19(completeDelay, cancelDelay)
    if completeDelay ~= nil then
        GameData.Settingsv19.CompleteDelay = math.max(0, completeDelay)
    end
    if cancelDelay ~= nil then
        GameData.Settingsv19.CancelDelay = math.max(0, cancelDelay)
    end
end

function GameData.Startv19()
    if GameData.Activev19 then return end
    GameData.Activev19 = true
    task.spawn(GameData.ultraSpamLoopv19)
end

function GameData.Stopv19()
    if not GameData.Activev19 then return end
    GameData.Activev19 = false

    GameData.safeFirev19(function()
        GameData.RF_UpdateAutoFishingStatev19:InvokeServer(true)
    end)

    task.wait(0.2)

    GameData.safeFirev19(function()
        GameData.RF_CancelFishingInputsv19:InvokeServer()
    end)
end

Sec.Main4:Input({
    Title = "Complete Delay v2",
    Flag = "CompleteDelayv2",
    Value = tostring(GameData.Settingsv19.CompleteDelay),
    InputIcon = "clock",
    Placeholder = "0.685",
    Callback = function(input)
        local value = tonumber(input)
        if value then
            GameData.UpdateSettingsv19(value, nil)
        end
    end
})

Sec.Main4:Input({
    Title = "Cancel Delay v2",
    Flag = "CancelDelayv2",
    Value = tostring(GameData.Settingsv19.CancelDelay),
    InputIcon = "clock",
    Placeholder = "0.3",
    Callback = function(input)
        local value = tonumber(input)
        if value then
            GameData.UpdateSettingsv19(nil, value)
        end
    end
})

Sec.Main4:Toggle({
    Title = "Blatant V2",
    Flag = "BlatantV2",
    Value = false,
    Callback = function(state)
        if state then
            GameData.Startv19()
        else
            GameData.Stopv19()
        end
    end
})

Sec.Main5 = Tabs.Main:Section({
    Title = "Webhook Notification",
    Box = true,
    BoxBorder = true,
    Opened = false,
})

GameData.LocalPlayer         = GameData.Service.Players.LocalPlayer
GameData.ReplicatedStorage   = GameData.Service.ReplicatedStorage
GameData.HttpService         = GameData.Service.HttpService
GameData.RequestExecutor     = GameData.Request


Sec.Main5:Input({
    Title = "Webhook URL",
    Flag = "WebhookURL",
    Desc = "Masukkan Webhook URL",
    Value = "",
    InputIcon = "link",
    Type = "Input",
    Placeholder = "Masukkan Webhook",

    Callback = function(input)
        GameData.WebhookURL = input
    end
})

Sec.Main5:Toggle({
    Title = "Webhook Status",
    Flag = "WebhookStatus",
    Desc = "Enable / disable webhook",
    Value = false,

    Callback = function(value)
        GameData.WebhookActive = value
    end
})

Sec.Main5:Dropdown({
    Title = "Filter Tier",
    Flag = "FilterTier",
    Desc = "Select tiers to filter",
    Values = GameData.TierList,
    Value = { "All" },
    Multi = true,
    AllowNone = true,

    Callback = function(selected)
        GameData.SelectedTiers = {}

        for _, tier in ipairs(selected) do
            table.insert(GameData.SelectedTiers, tier)
        end
    end
})

GameData.FormatNumber = function(num)
    num = tonumber(num) or 0
    if num >= 1e9 then
        return string.format("%.2fb", num / 1e9)
    elseif num >= 1e6 then
        return string.format("%.2fm", num / 1e6)
    elseif num >= 1e3 then
        return string.format("%.2fk", num / 1e3)
    else
        return tostring(num)
    end
end

GameData.FormatChance = function(chance)
    chance = tonumber(chance) or 0
    return string.format("%.2f%%", chance * 100)
end


--========================================================--
-- ROBLOX THUMBNAIL
--========================================================--

GameData.GetRobloxImage = function(assetId)

    if not assetId then return nil end

    local url = "https://thumbnails.roblox.com/v1/assets?assetIds=" .. assetId .. "&size=420x420&format=Png&isCircular=false"
    local success, response = pcall(game.HttpGet, game, url)

    if success then
        local data = GameData.HttpService:JSONDecode(response)
        if data and data.data and data.data[1] and data.data[1].imageUrl then
            return data.data[1].imageUrl
        end
    end

    return nil
end


--========================================================--
-- WEBHOOK SENDER
--========================================================--

GameData.SendEmbed = function(data)
    if GameData.WebhookURL == "" then return end
    if not GameData.RequestExecutor then return end

    GameData.RequestExecutor({
        Url = GameData.WebhookURL,
        Method = "POST",
        Headers = {["Content-Type"] = "application/json"},
        Body = GameData.HttpService:JSONEncode({embeds = data.embeds})
    })
end


--========================================================--
-- FIND FISH MODULE
--========================================================--

GameData.FindFishModule = function(fishName)

    local ItemsFolder = GameData.ReplicatedStorage:WaitForChild("Items")

    for _, moduleScript in ipairs(ItemsFolder:GetChildren()) do
        if moduleScript:IsA("ModuleScript") then
            local ok, data = pcall(require, moduleScript)
            if ok and data and data.Data and data.Data.Name then
                if string.find(string.lower(fishName), string.lower(data.Data.Name)) then
                    return data
                end
            end
        end
    end

    return nil
end


--========================================================--
-- UI REFERENCES (AUTO)
--========================================================--

local notif = GameData.LocalPlayer:WaitForChild("PlayerGui"):WaitForChild("Small Notification")

GameData.UI.Container      = notif.Display.Container
GameData.UI.ItemName       = GameData.UI.Container:WaitForChild("ItemName")
GameData.UI.NewLabel       = notif.Display.NewFrame.Frame:WaitForChild("NewLabel")
GameData.UI.VectorFrame    = notif.Display.VectorFrame.Vector
GameData.UI.RarityLabel    = GameData.UI.Container:WaitForChild("Rarity")
GameData.UI.BagLabel       = GameData.LocalPlayer.PlayerGui.Inventory.Main.Top.Options.Fish.Label.BagSize


--========================================================--
-- MAIN WEBHOOK LISTENER
--========================================================--

GameData.UI.ItemName:GetPropertyChangedSignal("Text"):Connect(function()

    if not (GameData.WebhookActive and GameData.WebhookURL ~= "" and GameData.RequestExecutor) then
        return
    end

    local text = GameData.UI.ItemName.Text
    if text == "" then return end

    -- extract
    local fishName, fishWeight = text:match("^(.-)%s*%((.-)%)$")
    fishName = fishName or text
    fishWeight = fishWeight or "Unknown"

    local fishData = GameData.FindFishModule(fishName)
    local tierNum = fishData and fishData.Data.Tier or 0
    local tierName = GameData.TierMap[tierNum] or "Unknown"

    local sellPrice = fishData and fishData.SellPrice or "Unknown"
    local chance    = fishData and fishData.Probability and fishData.Probability.Chance or 0

    local currentData = {
        Fish = fishName,
        Weight = fishWeight,
        Bag = GameData.UI.BagLabel.Text,
        Rarity = GameData.UI.RarityLabel.Text
    }

    -- avoid duplicate spam
    if GameData.LastFishData
    and GameData.LastFishData.Fish == currentData.Fish
    and GameData.LastFishData.Weight == currentData.Weight
    and GameData.LastFishData.Bag == currentData.Bag
    and GameData.LastFishData.Rarity == currentData.Rarity then
        return
    end

    GameData.LastFishData = currentData

    -- tier filter
    if #GameData.SelectedTiers > 0 then
        if not table.find(GameData.SelectedTiers, "All") and not table.find(GameData.SelectedTiers, tierName) then
            return
        end
    end

    -- stats
    if GameData.FishCounter[tierName] then
        GameData.FishCounter[tierName] = GameData.FishCounter[tierName] + 1
    end

    -- thumbnail
    local assetId = string.match(GameData.UI.VectorFrame.Image, "%d+")
    local imageUrl = GameData.GetRobloxImage(assetId)


    -- DISCORD EMBED
    local embed = {{

        ["title"] = "🎣 **Fish Caught!**",

        ["description"] = string.format(
            "### 🐟 **%s**\n" ..
            "```\nWeight : %s\nTier   : %s\nRarity : %s\nBag    : %s\n```\n\n" ..
            "### 💰 Stats\n" ..
            "- **Sell Price:** `%s`\n" ..
            "- **Chance:** `%s`\n",
            fishName,
            fishWeight,
            tierName,
            currentData.Rarity,
            currentData.Bag,
            GameData.FormatNumber(sellPrice),
            GameData.FormatChance(chance)
        ),

        ["color"] = GameData.TierColor[tierName] or 5814783,

        ["thumbnail"] = {
            ["url"] = imageUrl or "https://i.imgur.com/zwCkN8P.png"
        },

        ["image"] = {
            ["url"] = "https://i.imgur.com/4PfH6rb.jpeg"
        },

        ["author"] = {
            ["name"] = "Nexa | Fishing System",
            ["icon_url"] = "https://i.imgur.com/4PfH6rb.jpeg"
        },

        ["footer"] = {
            ["text"] = "Caught by " .. GameData.LocalPlayer.Name .. " | " .. os.date("%H:%M:%S"),
            ["icon_url"] = "https://tr.rbxcdn.com/180DAY-f446c1264701227ae463835b155f44af/768/432/Image/Webp/noFilter"
        },

        ["fields"] = {
            {
                ["name"] = "📊 Total " .. tierName .. " Caught",
                ["value"] = "**" .. tostring(GameData.FishCounter[tierName]) .. "**",
                ["inline"] = true
            },
            {
                ["name"] = "🧭 Rarity",
                ["value"] = currentData.Rarity,
                ["inline"] = true
            }
        }
    }}

    GameData.SendEmbed({embeds = embed})

end)

Sec.Main6 = Tabs.Main:Section({
    Title = "Favorite",
    Box = true,
    BoxBorder = true,
    Opened = false,
})

local Net = require(ReplicatedStorage.Packages.Net)
local ReplionClient = require(ReplicatedStorage.Packages.Replion).Client
local DataReplion = ReplionClient:WaitReplion("Data")
local ItemUtility = require(ReplicatedStorage.Shared.ItemUtility)

-- Remotes
local FavoriteRemote = Net:RemoteEvent("FavoriteItem")

local ItemsFolder = ReplicatedStorage:WaitForChild("Items")

local state = {
    selectedTiers = {},

    autoFavorite = false,
    autoUnfavorite = false,

    stopFavorite = false,
    stopUnfavorite = false,
}

local TierList = GameData.TierList

-- bikin map kebalikan: "Common" → 1
local nameToTier = {}
for num, name in pairs(GameData.TierMap) do
    nameToTier[name] = num
end

-- normalizer dropdown multi
local function normalize(value)
    if not value then return {} end
    if type(value) == "string" then return { value } end

    local out = {}
    for k, v in pairs(value) do
        if type(k) == "string" and v == true then
            table.insert(out, k)
        elseif type(v) == "string" then
            table.insert(out, v)
        end
    end
    return out
end

local function isTierMatch(itemTier, selected)
    for _, tName in ipairs(selected) do
        if nameToTier[tName] == tonumber(itemTier) then
            return true
        end
    end
    return false
end

local function safeFavorite(uuid)
    pcall(function()
        FavoriteRemote:FireServer(uuid)
    end)
end

local function workerFavorite()
    local RATE = 0.06
    local LOOP_DELAY = 1.1

    while state.autoFavorite do
        if state.stopFavorite then return end

        local inventory = DataReplion:GetExpect("Inventory")
        if inventory and inventory.Items then
            for _, item in ipairs(inventory.Items) do
                if state.stopFavorite then return end

                local ok, data = pcall(function()
                    return ItemUtility.GetItemDataFromItemType("Items", item.Id)
                end)

                if ok and data and data.Data then
                    local tier = data.Data.Tier

                    if isTierMatch(tier, state.selectedTiers) and not item.Favorited then
                        safeFavorite(item.UUID)
                        task.wait(RATE)
                    end
                end
            end
        end

        task.wait(LOOP_DELAY)
    end
end

local function workerUnfavorite()
    local RATE = 0.06
    local LOOP_DELAY = 1.1

    while state.autoUnfavorite do
        if state.stopUnfavorite then return end

        local inventory = DataReplion:GetExpect("Inventory")
        if inventory and inventory.Items then
            for _, item in ipairs(inventory.Items) do
                if state.stopUnfavorite then return end

                local ok, data = pcall(function()
                    return ItemUtility.GetItemDataFromItemType("Items", item.Id)
                end)

                if ok and data and data.Data then
                    local tier = data.Data.Tier

                    if isTierMatch(tier, state.selectedTiers) and item.Favorited then
                        safeFavorite(item.UUID)
                        task.wait(RATE)
                    end
                end
            end
        end

        task.wait(LOOP_DELAY)
    end
end

Sec.Main6:Dropdown({
    Title = "Select Tier(s)",
    Flag = "SelectTiers",
    Desc = "Choose tiers to favorite",
    Values = TierList,
    Value = { "Rare" },
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        state.selectedTiers = option
    end
})

Sec.Main6:Toggle({
    Title = "Auto Favorite",
    Flag = "AutoFavorite",
    Value = false,
    Callback = function(b)
        state.autoFavorite = b
        state.stopFavorite = not b
        if b then
            task.spawn(workerFavorite)
        end
    end
})

Sec.Main6:Toggle({
    Title = "Auto Unfavorite",
    Flag = "AutoUnfavorite",
    Value = false,
    Callback = function(b)
        state.autoUnfavorite = b
        state.stopUnfavorite = not b
        if b then
            task.spawn(workerUnfavorite)
        end
    end
})

GameData.Netv17 = require(GameData.ReplicatedStoragev17.Packages.Net)
GameData.ReplionClientv17 = require(GameData.ReplicatedStoragev17.Packages.Replion).Client
GameData.ItemUtilityv17 = require(GameData.ReplicatedStoragev17.Shared.ItemUtility)
GameData.DataReplionv17 = GameData.ReplionClientv17:WaitReplion("Data")
GameData.FavoriteRemotev17 = GameData.Netv17:RemoteEvent("FavoriteItem")
GameData.ItemsFolderv17 = GameData.ReplicatedStoragev17:WaitForChild("Items")

for _, module in ipairs(GameData.ItemsFolderv17:GetChildren()) do
    if module:IsA("ModuleScript") then
        local ok, data = pcall(require, module)
        if ok and data and data.Data and data.Data.Type == "Fish" then
            local name = data.Data.Name or module.Name
            if not GameData.FishMap[name] then
                GameData.FishMap[name] = true
                table.insert(GameData.FishNameList, name)
            end
        end
    end
end

table.sort(GameData.FishNameList)

local function workerFavorite()
    while GameData.state.autoFavorite do
        if GameData.state.stopFavorite then return end

        local inventory = GameData.DataReplionv17:GetExpect("Inventory")
        if inventory and inventory.Items then
            for _, item in ipairs(inventory.Items) do
                if GameData.state.stopFavorite then return end
                if not item.UUID then continue end
                if item.Favorited == true then continue end

                local ok, data = pcall(function()
                    return GameData.ItemUtilityv17.GetItemDataFromItemType("Items", item.Id)
                end)

                if ok and data and data.Data and data.Data.Type == "Fish" then
                    local fishName = data.Data.Name
                    if table.find(GameData.state.selectedFish, fishName) then
                        GameData.FavoriteRemotev17:FireServer(item.UUID)
                        task.wait(GameData.RATE)
                    end
                end
            end
        end

        task.wait(GameData.LOOP_DELAY)
    end
end

local function workerUnfavorite()
    while GameData.state.autoUnfavorite do
        if GameData.state.stopUnfavorite then return end

        local inventory = GameData.DataReplionv17:GetExpect("Inventory")
        if inventory and inventory.Items then
            for _, item in ipairs(inventory.Items) do
                if GameData.state.stopUnfavorite then return end
                if not item.UUID then continue end
                if item.Favorited ~= true then continue end

                local ok, data = pcall(function()
                    return GameData.ItemUtilityv17.GetItemDataFromItemType("Items", item.Id)
                end)

                if ok and data and data.Data and data.Data.Type == "Fish" then
                    local fishName = data.Data.Name
                    if table.find(GameData.state.selectedFish, fishName) then
                        GameData.FavoriteRemotev17:FireServer(item.UUID)
                        task.wait(GameData.RATE)
                    end
                end
            end
        end

        task.wait(GameData.LOOP_DELAY)
    end
end

Sec.Main6:Dropdown({
    Title = "Select Fish",
    Flag = "SelectFish",
    Desc = "Favorite / Unfavorite Based on Fish Name",
    SearchBarEnabled = true,
    Values = GameData.FishNameList,
    Value = {},
    Multi = true,
    AllowNone = false,
    Callback = function(option)
        GameData.state.selectedFish = option or {}
    end
})

Sec.Main6:Toggle({
    Title = "Favorite Fish",
    Flag = "FavoriteFish",
    Value = false,
    Callback = function(b)
        GameData.state.autoFavorite = b
        GameData.state.stopFavorite = not b

        if b then
            GameData.state.autoUnfavorite = false
            GameData.state.stopUnfavorite = true
            task.spawn(workerFavorite)
        end
    end
})

Sec.Main6:Toggle({
    Title = "Unfavorite Fish",
    Flag = "UnfavoriteFish",
    Value = false,
    Callback = function(b)
        GameData.state.autoUnfavorite = b
        GameData.state.stopUnfavorite = not b

        if b then
            GameData.state.autoFavorite = false
            GameData.state.stopFavorite = true
            task.spawn(workerUnfavorite)
        end
    end
})

Sec.Main7 = Tabs.Main:Section({
    Title = "Enchant",
    Box = true,
    BoxBorder = true,
    Opened = false,
})

Sec.Main7:Paragraph({
    Title = "Note:",
    Desc = "Enchant Stone Place in Slot 5 Hotbar",
    Thumbnail = "https://i.imgur.com/6RexUmw.png",
    ThumbnailSize = 40,
})

GameData.RollEnchantREv18 = GameData.Netv18:RemoteEvent("RollEnchant")
GameData.ActivateAltarREv18 = GameData.Netv18:RemoteEvent("ActivateEnchantingAltar")
GameData.Datav18 = GameData.Replionv18.Client:WaitReplion("Data")

for enchantName, enchantData in pairs(GameData.Enchantsv18) do
    if type(enchantName) == "string" and type(enchantData) == "table" then
        table.insert(GameData.ALL_ENCHANT_NAMESv18, enchantName)
    end
end
table.sort(GameData.ALL_ENCHANT_NAMESv18)

function GameData.isEnchantStoneEquippedv18()
    return GameData.Datav18:GetExpect("EquippedType") == "Enchant Stones"
end

task.spawn(function()
    while true do
        if GameData.AUTO_ENCHANTv18 and GameData.isEnchantStoneEquippedv18() then
            GameData.ActivateAltarREv18:FireServer()
            task.wait(GameData.DELAYv18)
            GameData.RollEnchantREv18:FireServer()
        end
        task.wait(GameData.DELAYv18)
    end
end)

GameData.RollEnchantREv18.OnClientEvent:Connect(function(stoneId, enchantId, success)
    if not success then return end
    local enchantData = GameData.ItemUtilityv18:GetEnchantData(enchantId)
    if not enchantData then return end
    local enchantName = enchantData.Data.Name

    WindUI:Notify({
        Title = "Enchant Result",
        Content = "Got: "..enchantName,
        Duration = 2,
        Icon = "sparkles"
    })

    if GameData.TARGET_ENCHANTSv18[enchantName] then
        GameData.AUTO_ENCHANTv18 = false
        WindUI:Notify({
            Title = "Auto Enchant Stopped",
            Content = "Target Enchant Found: "..enchantName,
            Duration = 4,
            Icon = "check"
        })
    end
end)

Sec.Main7:Dropdown({
    Title = "Target Enchant",
    Flag = "TargetEnchant",
    Desc = "Automatically stop if this enchantment is obtained",
    SearchBarEnabled = true,
    Values = GameData.ALL_ENCHANT_NAMESv18,
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(options)
        table.clear(GameData.TARGET_ENCHANTSv18)
        for _, name in ipairs(options) do
            GameData.TARGET_ENCHANTSv18[name] = true
        end
    end
})

Sec.Main7:Toggle({
    Title = "Auto Enchant",
    Flag = "AutoEnchant",
    Value = false,
    Callback = function(state)
        GameData.AUTO_ENCHANTv18 = state
    end
})

local EquipLoop = false
local args = {5}

Sec.Main7:Toggle({
    Title = "Auto Equip Hotbar 5",
    Flag = "AutoEquipHotbar5",
    Value = false,
    Callback = function(state)
        EquipLoop = state

        if state then
            task.spawn(function()
                while EquipLoop do
                    game:GetService("ReplicatedStorage")
                        :WaitForChild("Packages")
                        :WaitForChild("_Index")
                        :WaitForChild("sleitnick_net@0.2.0")
                        :WaitForChild("net")
                        :WaitForChild("RE/EquipToolFromHotbar")
                        :FireServer(unpack(args))

                    task.wait(1.5)
                end
            end)
        end
    end
})

Sec.Main8 = Tabs.Main:Section({
    Title = "Pirate",
    Box = true,
    BoxBorder = true,
    Opened = false,
})

GameData.FirePromptv33 = function(prompt)
    if prompt and prompt:IsA("ProximityPrompt") then
        pcall(function()
            fireproximityprompt(prompt)
        end)
        task.wait(GameData.PromptDelayv33)
    end
end

GameData.OpenAllPirateChestsv33 = function()
    if not GameData.PirateChestStoragev33 then
        GameData.PirateChestStoragev33 = workspace:FindFirstChild("PirateChestStorage")
        if not GameData.PirateChestStoragev33 then
            return
        end
    end

    local Openedv33 = 0

    for _, modelv33 in ipairs(GameData.PirateChestStoragev33:GetChildren()) do
        if modelv33:IsA("Model") then
            local Coverv33 = modelv33:FindFirstChild("Cover")

            if Coverv33 then
                local Promptv33 =
                    Coverv33:FindFirstChildWhichIsA("ProximityPrompt", true)

                if Promptv33 then
                    GameData.FirePromptv33(Promptv33)
                    Openedv33 += 1
                end
            end
        end
    end
end

Sec.Main8:Button({
    Title = "Open All Pirate Chest",
    Callback = function()
        task.spawn(function()
            GameData.OpenAllPirateChestsv33()
        end)
    end
})
Sec.Main10 = Tabs.Main:Section({
    Title = "Freecamera Drone",
    Box = true,
    BoxBorder = true,
    Opened = false,
})

function GameData:ResetCameraToPlayerv28()
	local charv28 = self.Playerv28.Character
	if not charv28 then return end
	local headv28 = charv28:FindFirstChild("Head") or charv28:FindFirstChild("HumanoidRootPart")
	if headv28 then
		self.Camerasv28.CFrame = headv28.CFrame
	end
end

function GameData:SetCharacterMovev28(enabledv28)
	local charv28 = self.Playerv28.Character
	if not charv28 then return end
	local humv28 = charv28:FindFirstChildOfClass("Humanoid")
	if not humv28 then return end
	if enabledv28 then
		humv28.WalkSpeed = 16
		humv28.JumpPower = 50
	else
		humv28.WalkSpeed = 0
		humv28.JumpPower = 50
	end
end

GameData.GUIsv28 = Instance.new("ScreenGui")
GameData.GUIsv28.Name = "DroneCameraGUIv28"
GameData.GUIsv28.ResetOnSpawn = false
GameData.GUIsv28.Enabled = false
GameData.GUIsv28.Parent = GameData.Playerv28.PlayerGui

GameData.LeftFramev28 = Instance.new("Frame")
GameData.LeftFramev28.Size = UDim2.fromScale(0.28, 0.35)
GameData.LeftFramev28.Position = UDim2.fromScale(0.03, 0.55)
GameData.LeftFramev28.AnchorPoint = Vector2.new(0, 1)
GameData.LeftFramev28.BackgroundTransparency = 1
GameData.LeftFramev28.Parent = GameData.GUIsv28

function GameData:CreateButtonv28(textv28, posv28)
	local bv28 = Instance.new("TextButton")
	bv28.Size = UDim2.fromScale(0.32, 0.32)
	bv28.Position = posv28
	bv28.Text = textv28
	bv28.Font = Enum.Font.GothamBold
	bv28.TextScaled = true
	bv28.BackgroundColor3 = Color3.fromRGB(30,30,30)
	bv28.TextColor3 = Color3.new(1,1,1)
	bv28.Parent = self.LeftFramev28
	local cv28 = Instance.new("UICorner")
	cv28.CornerRadius = UDim.new(0.25,0)
	cv28.Parent = bv28
	return bv28
end

GameData.Buttonsv28.Forward = GameData:CreateButtonv28("▲", UDim2.fromScale(0.34, 0))
GameData.Buttonsv28.Back    = GameData:CreateButtonv28("▼", UDim2.fromScale(0.34, 0.68))
GameData.Buttonsv28.Left    = GameData:CreateButtonv28("◀", UDim2.fromScale(0, 0.34))
GameData.Buttonsv28.Right   = GameData:CreateButtonv28("▶", UDim2.fromScale(0.68, 0.34))

function GameData:EnableDronev28()
	self.Dronev28 = true
	self.Yawv28 = 0
	self.Pitchv28 = 0
	self:SetCharacterMovev28(false)
	self.Camerasv28.CameraType = Enum.CameraType.Scriptable
	self:ResetCameraToPlayerv28()
	self.GUIsv28.Enabled = true
end

function GameData:DisableDronev28()
	self.Dronev28 = false
	self:SetCharacterMovev28(true)
	self.Camerasv28.CameraType = Enum.CameraType.Custom
	self:ResetCameraToPlayerv28()
	self.GUIsv28.Enabled = false
end

GameData.Buttonsv28.Forward.MouseButton1Down:Connect(function()
	GameData.MoveForwardv28 = 1
end)
GameData.Buttonsv28.Forward.MouseButton1Up:Connect(function()
	GameData.MoveForwardv28 = 0
end)

GameData.Buttonsv28.Back.MouseButton1Down:Connect(function()
	GameData.MoveForwardv28 = -1
end)
GameData.Buttonsv28.Back.MouseButton1Up:Connect(function()
	GameData.MoveForwardv28 = 0
end)

GameData.Buttonsv28.Left.MouseButton1Down:Connect(function()
	GameData.MoveRightv28 = -1
end)
GameData.Buttonsv28.Left.MouseButton1Up:Connect(function()
	GameData.MoveRightv28 = 0
end)

GameData.Buttonsv28.Right.MouseButton1Down:Connect(function()
	GameData.MoveRightv28 = 1
end)
GameData.Buttonsv28.Right.MouseButton1Up:Connect(function()
	GameData.MoveRightv28 = 0
end)

GameData.Servicesv28.UIS.TouchMoved:Connect(function(inputv28, gpev28)
	if not GameData.Dronev28 or gpev28 then return end
	GameData.Yawv28 -= inputv28.Delta.X * GameData.Sensitivityv28
	GameData.Pitchv28 -= inputv28.Delta.Y * GameData.Sensitivityv28
	GameData.Pitchv28 = math.clamp(GameData.Pitchv28, -80, 80)
end)

GameData.Servicesv28.UIS.InputBegan:Connect(function(inputv28, gpev28)
	if gpev28 or not GameData.Dronev28 then return end
	if inputv28.KeyCode == Enum.KeyCode.W then
		GameData.MoveForwardv28 = 1
	elseif inputv28.KeyCode == Enum.KeyCode.S then
		GameData.MoveForwardv28 = -1
	elseif inputv28.KeyCode == Enum.KeyCode.A then
		GameData.MoveRightv28 = -1
	elseif inputv28.KeyCode == Enum.KeyCode.D then
		GameData.MoveRightv28 = 1
	end
end)

GameData.Servicesv28.UIS.InputEnded:Connect(function(inputv28)
	if not GameData.Dronev28 then return end
	if inputv28.KeyCode == Enum.KeyCode.W or inputv28.KeyCode == Enum.KeyCode.S then
		GameData.MoveForwardv28 = 0
	elseif inputv28.KeyCode == Enum.KeyCode.A or inputv28.KeyCode == Enum.KeyCode.D then
		GameData.MoveRightv28 = 0
	end
end)

GameData.Servicesv28.UIS.InputChanged:Connect(function(inputv28, gpev28)
	if not GameData.Dronev28 or gpev28 then return end
	if inputv28.UserInputType == Enum.UserInputType.MouseMovement then
		GameData.Yawv28 -= inputv28.Delta.X * GameData.Sensitivityv28
		GameData.Pitchv28 -= inputv28.Delta.Y * GameData.Sensitivityv28
	end
	if inputv28.KeyCode == Enum.KeyCode.Thumbstick1 then
		GameData.MoveRightv28 = inputv28.Position.X
		GameData.MoveForwardv28 = -inputv28.Position.Y
	end
	if inputv28.KeyCode == Enum.KeyCode.Thumbstick2 then
		GameData.Yawv28 -= inputv28.Position.X * GameData.Sensitivityv28 * 5
		GameData.Pitchv28 -= inputv28.Position.Y * GameData.Sensitivityv28 * 5
	end
	GameData.Pitchv28 = math.clamp(GameData.Pitchv28, -80, 80)
end)

GameData.Servicesv28.RunService.RenderStepped:Connect(function()
	if not GameData.Dronev28 then return end
	local cfv28 =
		CFrame.new(GameData.Camerasv28.CFrame.Position) *
		CFrame.Angles(0, math.rad(GameData.Yawv28), 0) *
		CFrame.Angles(math.rad(GameData.Pitchv28), 0, 0)
	local movev28 =
		(cfv28.LookVector * GameData.MoveForwardv28) +
		(cfv28.RightVector * GameData.MoveRightv28)
	GameData.Camerasv28.CFrame = cfv28 + (movev28 * GameData.Speedv28)
end)

Sec.Main10:Toggle({
    Title = "Drone Camera",
    Flag = "DroneCamera",
    Default = false,
    Callback = function(valuev28)
        if valuev28 then
            GameData:EnableDronev28()
        else
            GameData:DisableDronev28()
        end
    end
})

Sec.Main10:Toggle({
    Title = "Hide Gui Drone",
    Flag = "HideGuiDrone",
    Default = false,
    Callback = function(value)
        local gui = game.Players.LocalPlayer.PlayerGui:WaitForChild("DroneCameraGUI")
        gui.Enabled = not value
    end
})

Sec.Backpack1 = Tabs.Backpack:Section({
    Title = "Equipment Feature",
    Box = true,
    BoxBorder = true,
    Opened = false,
})

local Net = require(ReplicatedStorage.Packages.Net)
local Replion = require(ReplicatedStorage.Packages.Replion).Client

local EquipItemEvent = Net:RemoteEvent("EquipItem")

local data = Replion:WaitReplion("Data")

local RodIDs = GameData.RodIDs

local RodNames = {}
for name, _ in pairs(RodIDs) do
    table.insert(RodNames, name)
end

local SelectedRodName = "Starter Rod"

Sec.Backpack1:Dropdown({
    Title = "Select Rod",
    Flag = "SelectRod",
    SearchBarEnabled = true,
    Desc = "Choose your fishing rod",
    Values = RodNames,
    Value = SelectedRodName,
    Multi = false,
    AllowNone = true,
    Callback = function(value)
        SelectedRodName = value
    end
})

Sec.Backpack1:Button({
    Title = "Equip Selected Rod",
    Desc = "Equip the rod you selected",
    Locked = false,
    Callback = function()
        local selectedID = RodIDs[SelectedRodName]
        if not selectedID then return end

        local rods = data:GetExpect({"Inventory", "Fishing Rods"})
        if not rods then return end

        for _, rod in ipairs(rods) do
            if rod and rod.Id == selectedID then
                EquipItemEvent:FireServer(rod.UUID, "Fishing Rods")
                break
            end
        end
    end
})

local BaitIDs = GameData.BaitIDs

local equipBaitRemote = ReplicatedStorage
    :WaitForChild("Packages")
    :WaitForChild("_Index")
    :WaitForChild("sleitnick_net@0.2.0")
    :WaitForChild("net")
    :WaitForChild("RE/EquipBait")

local baitNames = {}
for name, _ in pairs(BaitIDs) do
    table.insert(baitNames, name)
end

local selectedBaitID = BaitIDs["Starter Bait"]

Sec.Backpack1:Dropdown({
    Title = "Select Bait",
    Flag = "SelectBait",
    SearchBarEnabled = true,
    Desc = "Choose your bait",
    Values = baitNames,
    Value = "Starter Bait",
    Multi = false,
    AllowNone = true,
    Callback = function(selected)
        selectedBaitID = BaitIDs[selected]
    end
})

Sec.Backpack1:Button({
    Title = "Equip Selected Bait",
    Desc = "Equip the bait you selected",
    Locked = false,
    Callback = function()
        if selectedBaitID then
            equipBaitRemote:FireServer(selectedBaitID)
        end
    end
})
local netEvent = ReplicatedStorage
	:WaitForChild("Packages")
	:WaitForChild("_Index")
	:WaitForChild("sleitnick_net@0.2.0")
	:WaitForChild("net")
	:WaitForChild("RE/EquipToolFromHotbar")

local args = {1}
local autoEquipRod = false

Sec.Backpack1:Toggle({
    Title = "Auto Equip Rod",
    Flag = "AutoEquipRod",
    Desc = "Automatically equip rod when needed",
    Value = false,
    Callback = function(state)
        autoEquipRod = state
    end
})

task.spawn(function()
	while true do
		if autoEquipRod then
			netEvent:FireServer(unpack(args))
		end
		task.wait(1)
	end
end)

Sec.Backpack2 = Tabs.Backpack:Section({
    Title = "Auto Sell",
    Box = true,
    BoxBorder = true,
    Opened = false,
})

GameData.Clientv30 =
    require(GameData.ReplicatedStoragev30.Packages.Replion).Client

GameData.ItemUtilityv30 =
    require(GameData.ReplicatedStoragev30.Shared.ItemUtility)

GameData.VendorUtilityv30 =
    require(GameData.ReplicatedStoragev30.Shared.VendorUtility)

GameData.Datav30 = GameData.Clientv30:WaitReplion("Data")

function GameData.formatNumber(n)
    if n >= 1e6 then
        return string.format("%.2fM", n / 1e6)
    elseif n >= 1e3 then
        return string.format("%.2fK", n / 1e3)
    else
        return tostring(n)
    end
end

function GameData.updateFishStatus()
    GameData.Inventoryv30 = GameData.Datav30:GetExpect({ "Inventory" })
    if not GameData.Inventoryv30 then return end

    GameData.CurrentItemsMapv30 = {}
    for _, item in ipairs(GameData.Inventoryv30.Items or {}) do
        GameData.CurrentItemsMapv30[item.UUID] = item
    end

    GameData.MissingCountv30 = 0
    GameData.MissingValuev30 = 0

    for uuid, oldItem in pairs(GameData.PreviousInventoryv30) do
        local currentItem = GameData.CurrentItemsMapv30[uuid]
        if not currentItem then
            local itemData =
                GameData.ItemUtilityv30.GetItemDataFromItemType("Items", oldItem.Id)

            if itemData
                and itemData.Data
                and itemData.Data.Type == "Fish" then

                GameData.MissingCountv30 += 1
                local sellPrice =
                    GameData.VendorUtilityv30:GetSellPrice(oldItem) or 0
                GameData.MissingValuev30 += sellPrice
            end
        end
    end

    GameData.TotalSellPricev30 = 0
    for _, item in ipairs(GameData.Inventoryv30.Items or {}) do
        local itemData =
            GameData.ItemUtilityv30.GetItemDataFromItemType("Items", item.Id)

        if itemData
            and itemData.Data
            and itemData.Data.Type == "Fish" then

            local sellPrice =
                GameData.VendorUtilityv30:GetSellPrice(item) or 0
            GameData.TotalSellPricev30 += sellPrice
        end
    end

    GameData.HistoryMissingCountv30 += GameData.MissingCountv30
    GameData.HistoryMissingValuev30 += GameData.MissingValuev30

    local desc = (
        "Total sell value of all fish: %s Coins\n" ..
        "Missing fish count: %d\n" ..
        "Missing fish value: %s Coins"
    ):format(
        GameData.formatNumber(GameData.TotalSellPricev30),
        GameData.MissingCountv30,
        GameData.formatNumber(GameData.MissingValuev30)
    )

    if GameData.FishQuantityv30 then
        GameData.FishQuantityv30:SetDesc(desc)
    else
        GameData.FishQuantityv30 = Sec.Backpack2:Paragraph({
            Title = "Fish Quantity and Value Status",
            Desc = desc
        })

        Sec.Backpack2:Button({
            Title = "Reset Values",
            Locked = false,
            Callback = function()
                GameData.FishQuantityv30:SetDesc(
                    "Total sell value of all fish: 0 Coins\n" ..
                    "Missing fish count: 0\n" ..
                    "Missing fish value: 0 Coins (Reset)"
                )
                GameData.PreviousInventoryv30 = {}
                GameData.HistoryMissingCountv30 = 0
                GameData.HistoryMissingValuev30 = 0
            end
        })

        Sec.Backpack2:Button({
            Title = "Check All History",
            Locked = false,
            Callback = function()
                GameData.FishQuantityv30:SetDesc(
                    ("Cumulative missing fish count: %d\n" ..
                    "Cumulative missing fish value: %s Coins")
                    :format(
                        GameData.HistoryMissingCountv30,
                        GameData.formatNumber(GameData.HistoryMissingValuev30)
                    )
                )
            end
        })
    end

    GameData.PreviousInventoryv30 = {}
    for _, item in ipairs(GameData.Inventoryv30.Items or {}) do
        GameData.PreviousInventoryv30[item.UUID] = item
    end
end

GameData.updateFishStatus()

task.spawn(function()
    while true do
        task.wait(3)
        GameData.updateFishStatus()
    end
end)

Sec.Backpack2:Space()

GameData.Playerv4 = GameData.Servicesv4.Playersv4.LocalPlayer
GameData.SellRemotev4 = GameData.Servicesv4.ReplicatedStoragev4:WaitForChild("Packages")
    :WaitForChild("_Index")
    :WaitForChild("sleitnick_net@0.2.0")
    :WaitForChild("net")
    :WaitForChild("RF/SellAllItems")

GameData.FishCaughtRemotev4 = GameData.Servicesv4.ReplicatedStoragev4.Packages._Index["sleitnick_net@0.2.0"]
    .net["RE/FishCaught"]

Sec.Backpack2:Slider({
    Title = "Sell Delay (seconds)",
    Flag = "SellDelayv4",
    Desc = "Set delay between sell actions",
    Step = 1,
    Value = {
        Min = 1,
        Max = 200,
        Default = GameData.SellDelayv4
    },

    Callback = function(value)
        GameData.SellDelayv4 = value
    end
})

Sec.Backpack2:Dropdown({
    Title = "Select Mode",
    Flag = "SellModev4",
    Desc = "Choose sell mode",
    Values = { "Backpack Full", "Sell Delay", "Sell By Count" },
    Value = GameData.Modev4,
    Multi = false,
    AllowNone = false,

    Callback = function(option)
        GameData.Modev4 = option
    end
})

Sec.Backpack2:Input({
    Title = "Sell By Count",
    Flag = "SellByCountv4",
    Desc = "Set target count of fish to sell",
    Value = tostring(GameData.SellCountTargetv4 or ""),
    InputIcon = "calculator",
    Type = "Input",
    Placeholder = "contoh: 18",

    Callback = function(input)
        local num = tonumber(input)
        if num and num > 0 then
            GameData.SellCountTargetv4 = num
            GameData.FishCountv4 = 0
        end
    end
})


GameData.FishCaughtRemotev4.OnClientEvent:Connect(function()
    if not GameData.AutoSellv4 then return end
    if GameData.Modev4 ~= "Sell By Count" then return end

    GameData.FishCountv4 = GameData.FishCountv4 + 1

    if GameData.FishCountv4 >= GameData.SellCountTargetv4 then
        GameData.FishCountv4 = 0
        pcall(function()
            GameData.SellRemotev4:InvokeServer()
        end)
    end
end)

Sec.Backpack2:Toggle({
    Title = "Auto Sell",
    Flag = "AutoSellv4",
    Desc = "Automatically sell fish based on selected mode",
    Value = GameData.AutoSellv4,

    Callback = function(state)
        GameData.AutoSellv4 = state

        if state then
            GameData.AutoSellLoopv4 = task.spawn(function()
                while GameData.AutoSellv4 do
                    pcall(function()
                        if GameData.Modev4 == "Sell Delay" then
                            GameData.SellRemotev4:InvokeServer()
                            task.wait(GameData.SellDelayv4)

                        elseif GameData.Modev4 == "Backpack Full" then
                            local bagLabel = GameData.Playerv4.PlayerGui
                                .Inventory.Main.Top.Options.Fish.Label.BagSize
                            if bagLabel and bagLabel.Text == "4,400/4,400" then
                                GameData.SellRemotev4:InvokeServer()
                            end
                            task.wait(1)

                        elseif GameData.Modev4 == "Sell By Count" then
                            task.wait(1)
                        end
                    end)
                end
            end)
        else
            if GameData.AutoSellLoopv4 then
                task.cancel(GameData.AutoSellLoopv4)
                GameData.AutoSellLoopv4 = nil
            end
        end
    end
})

Sec.Backpack3 = Tabs.Backpack:Section({
    Title = "Totems",
    Box = true,
    BoxBorder = true,
    Opened = false,
})

GameData.Client =
    require(GameData.ReplicatedStorage.Packages.Replion).Client

GameData.Data =
    GameData.Client:WaitReplion("Data")

GameData.SpawnTotemRE =
    GameData.ReplicatedStorage
        :WaitForChild("Packages")
        :WaitForChild("_Index")
        :WaitForChild("sleitnick_net@0.2.0")
        :WaitForChild("net")
        :WaitForChild("RE/SpawnTotem")

Sec.Backpack3:Dropdown({
    Title = "Select Totems",
    Flag = "SelectTotem",
    Desc = "Choose which totem to spawn",
    Values = { "Luck Totem", "Mutation Totem", "Shiny Totem" },
    Value = "Luck Totem",
    Multi = false,
    AllowNone = false,

    Callback = function(value)
        GameData.SelectedTotemId = GameData.TotemMap[value]
    end
})

Sec.Backpack3:Toggle({
    Title = "Auto Spawn Totem",
    Flag = "AutoSpawnTotem",
    Desc = "Automatically spawn selected totem",
    Value = false,

    Callback = function(value)
        GameData.SpawnToggle = value

        if not value or not GameData.SelectedTotemId then
            return
        end

        task.spawn(function()
            while GameData.SpawnToggle do
                local inventory = GameData.Data:GetExpect("Inventory")

                if inventory and inventory.Totems then
                    for _, totem in ipairs(inventory.Totems) do
                        if not GameData.SpawnToggle then break end
                        if totem.Id == GameData.SelectedTotemId and totem.UUID then
                            GameData.SpawnTotemRE:FireServer(totem.UUID)
                            task.wait(5)
                        end
                    end
                end

                task.wait(10)
            end
        end)
    end
})

GameData.LocalPlayer = GameData.Players.LocalPlayer

function GameData:CreateRange(model)
    local handle = model:FindFirstChild("Handle")
    if not handle or not handle:IsA("BasePart") then return end
    if handle:FindFirstChild("BottomPart") then return end

    local range = Instance.new("Part")
    range.Name = "BottomPart"
    range.Size = Vector3.new(100, 1, 100)
    range.Anchored = true
    range.CanCollide = false
    range.Material = Enum.Material.SmoothPlastic
    range.Color = self.RangeColor
    range.Transparency = self.ShowTotemRange and self.RangeAlpha or 1

    range.CFrame = handle.CFrame * CFrame.new(
        0,
        -(handle.Size.Y / 2 + range.Size.Y / 2),
        0
    )

    range.Parent = handle
end

function GameData:UpdateTotemRanges()
    for _, model in ipairs(self.Totems:GetChildren()) do
        if model:IsA("Model") and model.Name == "PlacedModel" then
            local handle = model:FindFirstChild("Handle")
            if handle then
                local range = handle:FindFirstChild("BottomPart")
                if range then
                    range.Color = self.RangeColor
                    range.Transparency = self.ShowTotemRange and self.RangeAlpha or 1
                end
            end
        end
    end
end

for _, model in ipairs(GameData.Totems:GetChildren()) do
    if model:IsA("Model") and model.Name == "PlacedModel" then
        GameData:CreateRange(model)
    end
end

GameData.Totems.ChildAdded:Connect(function(model)
    if model:IsA("Model") and model.Name == "PlacedModel" then
        task.wait(0.1)
        GameData:CreateRange(model)
        GameData:UpdateTotemRanges()
    end
end)

Sec.Backpack3:Toggle({
    Title = "Show Totem Range",
    Flag = "ShowTotemRange",
    Desc = "Toggle visibility of totem ranges",
    Value = GameData.ShowTotemRange,

    Callback = function(value)
        GameData.ShowTotemRange = value
        GameData:UpdateTotemRanges()
    end
})

Sec.Backpack3:Colorpicker({
    Title = "Range Color",
    Flag = "RangeColor",
    Desc = "Set the color and transparency of totem ranges",
    Default = GameData.RangeColor,
    Transparency = GameData.RangeAlpha,
    Locked = false,

    Callback = function(color, alpha)
        GameData.RangeColor = color
        GameData.RangeAlpha = alpha
        GameData:UpdateTotemRanges()
    end
})

Sec.Event1 = Tabs.Event:Section({
    Title = "Event Hunts",
    Box = true,
    BoxBorder = true,
    Opened = true,
})


GameData.CountdownLabel =
    GameData.Workspace["!!! DEPENDENCIES"]["Event Tracker"]
        .Main.Gui.Content.Items.Countdown.Label

GameData.CountdownParagraph = Sec.Event1:Paragraph({
    Title = "Lochness Monster Countdown",
    Desc = "Waiting...",
    Locked = false,
    Buttons = {}
})

task.spawn(function()
    while true do
        if GameData.CountdownLabel and GameData.CountdownLabel:IsA("TextLabel") then
            GameData.CountdownParagraph:SetDesc(GameData.CountdownLabel.Text)
        else
            GameData.CountdownParagraph:SetDesc("Countdown not found")
        end
        task.wait(GameData.UpdateDelay)
    end
end)

GameData.LocalPlayer = GameData.Players.LocalPlayer

GameData.TimerLabel =
    GameData.Workspace["!!! DEPENDENCIES"]["Event Tracker"]
        .Main.Gui.Content.Items.Stats.Timer.Label

Sec.Event1:Toggle({
    Title = "Auto Lochness Monster",
    Flag = "AutoLochnessMonster",
    Value = false,
    Callback = function(value)
        GameData.AutoLochEnabled = value

        if not value then
            local char = GameData.LocalPlayer.Character
            local hrp = char and char:FindFirstChild("HumanoidRootPart")

            if hrp and GameData.SavedCFrame then
                hrp.CFrame = GameData.SavedCFrame
            end

            GameData.SavedCFrame = nil
            GameData.Teleporting = false
        end
    end
})

task.spawn(function()
    while true do
        if GameData.AutoLochEnabled
        and GameData.TimerLabel
        and GameData.TimerLabel:IsA("TextLabel") then

            local text = GameData.TimerLabel.Text
            local char = GameData.LocalPlayer.Character
            local hrp = char and char:FindFirstChild("HumanoidRootPart")

            if hrp then
                if text ~= "0M 0S LEFT" then
                    if not GameData.Teleporting then
                        GameData.SavedCFrame = hrp.CFrame
                        GameData.Teleporting = true
                    end
                    hrp.CFrame = GameData.TargetCFrame
                else
                    if GameData.Teleporting and GameData.SavedCFrame then
                        hrp.CFrame = GameData.SavedCFrame
                    end
                    GameData.Teleporting = false
                    GameData.SavedCFrame = nil
                end
            end
        end
        task.wait(GameData.LoopDelay)
    end
end)

Sec.Event2 = Tabs.Event:Section({
    Title = "Join Event",
    Box = true,
    BoxBorder = true,
    Opened = true,
})


function GameData.getHRPv28()
    GameData.HRPv28 = GameData.Playerv28.Character
        and GameData.Playerv28.Character:FindFirstChild("HumanoidRootPart")
    return GameData.HRPv28
end

function GameData.freezev28()
    GameData.HRPv28 = GameData.getHRPv28()
    if not GameData.HRPv28 then return end

    GameData.unfreezev28()

    GameData.BVv28 = Instance.new("BodyVelocity")
    GameData.BVv28.MaxForce = Vector3.new(1e9,1e9,1e9)
    GameData.BVv28.Velocity = Vector3.zero
    GameData.BVv28.Parent = GameData.HRPv28

    GameData.BGv28 = Instance.new("BodyGyro")
    GameData.BGv28.MaxTorque = Vector3.new(1e9,1e9,1e9)
    GameData.BGv28.CFrame = GameData.HRPv28.CFrame
    GameData.BGv28.Parent = GameData.HRPv28
end

function GameData.unfreezev28()
    GameData.HRPv28 = GameData.getHRPv28()
    if not GameData.HRPv28 then return end

    if GameData.BVv28 then GameData.BVv28:Destroy() GameData.BVv28 = nil end
    if GameData.BGv28 then GameData.BGv28:Destroy() GameData.BGv28 = nil end

    for _, obj in ipairs(GameData.HRPv28:GetChildren()) do
        if obj:IsA("BodyVelocity")
        or obj:IsA("BodyGyro")
        or obj:IsA("BodyPosition")
        or obj:IsA("BodyAngularVelocity") then
            obj:Destroy()
        end
    end
end

GameData.Playerv28.CharacterAdded:Connect(function()
    task.wait(0.1)
    GameData.unfreezev28()
end)

function GameData.getModelv28(hunt)
    GameData.Propsv28 = workspace:FindFirstChild("Props")

    if hunt == "Shark Hunt" then
        for _, v in ipairs(workspace:GetChildren()) do
            if v.Name == "Shark Hunt" then
                return v
            end
        end
    end

    if GameData.Propsv28 then
        GameData.Modelv28 = GameData.Propsv28:FindFirstChild(hunt)
        if GameData.Modelv28 then return GameData.Modelv28 end

        for _, item in ipairs(GameData.Propsv28:GetChildren()) do
            if string.find(item.Name, hunt) then
                return item
            end
        end
    end

    for _, item in ipairs(workspace:GetDescendants()) do
        if item.Name == hunt or string.find(item.Name, hunt) then
            return item
        end
    end

    return nil
end

function GameData.getTargetv28(hunt)
    GameData.Modelv28 = GameData.getModelv28(hunt)
    if not GameData.Modelv28 then return nil end

    if GameData.Modelv28:IsA("Model") then
        GameData.PivotCFv28 = nil
        pcall(function()
            GameData.PivotCFv28 = GameData.Modelv28:GetPivot()
        end)
        if GameData.PivotCFv28 then
            return {Type="Pivot", CFrame=GameData.PivotCFv28}
        end
    end

    if GameData.Modelv28.PrimaryPart then
        return {Type="Part", Object=GameData.Modelv28.PrimaryPart}
    end

    GameData.Descendantv28 = GameData.Modelv28:FindFirstChildWhichIsA("BasePart", true)
    if GameData.Descendantv28 then
        return {Type="Part", Object=GameData.Descendantv28}
    end

    return nil
end

function GameData.teleportTov28(hunt)
    GameData.HRPv28 = GameData.getHRPv28()
    if not GameData.HRPv28 then return false end

    GameData.Targetv28 = GameData.getTargetv28(hunt)
    if not GameData.Targetv28 then return false end

    if not GameData.SavedCFramev28 then
        GameData.SavedCFramev28 = GameData.HRPv28.CFrame
    end

    if GameData.Targetv28.Type == "Pivot" then
        GameData.TargetPosv28 = GameData.Targetv28.CFrame.Position + Vector3.new(0,6,0)
    else
        GameData.TargetPosv28 = GameData.Targetv28.Object.Position + Vector3.new(0,6,0)
    end

    GameData.TeleportSuccessv28 = false

    for i = 1, 3 do
        if pcall(function()
            GameData.HRPv28.CFrame = CFrame.new(GameData.TargetPosv28)
        end) then
            GameData.TeleportSuccessv28 = true
            break
        end
        task.wait(0.5)
    end

    if not GameData.TeleportSuccessv28 then
        GameData.Tweenv28 = GameData.TweenServicev28:Create(
            GameData.HRPv28,
            TweenInfo.new(1, Enum.EasingStyle.Linear),
            {CFrame = CFrame.new(GameData.TargetPosv28)}
        )
        pcall(function()
            GameData.Tweenv28:Play()
            GameData.Tweenv28.Completed:Wait()
        end)
        GameData.TeleportSuccessv28 = true
    end

    if GameData.TeleportSuccessv28 then
        GameData.freezev28()
        GameData.CurrentHuntv28 = hunt
        return true
    end

    return false
end

task.spawn(function()
    while task.wait(0.5) do
        if not GameData.Activev28 then continue end

        if GameData.CurrentHuntv28 then
            if GameData.getModelv28(GameData.CurrentHuntv28) then
                continue
            else
                GameData.CurrentHuntv28 = nil
                GameData.unfreezev28()
            end
        end

        for _, hunt in ipairs(GameData.SelectedHuntsv28) do
            if GameData.getModelv28(hunt) then
                GameData.teleportTov28(hunt)
                break
            end
        end
    end
end)

Sec.Event2:Dropdown({
    Title = "Select Event",
    Values = GameData.HuntListv28,
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        GameData.SelectedHuntsv28 =
            typeof(option) == "table" and option or
            typeof(option) == "string" and {option} or {}
    end
})

Sec.Event2:Toggle({
    Title = "Join Event",
    Value = false,
    Callback = function(state)
        GameData.Activev28 = state

        if not state then
            GameData.unfreezev28()
            if GameData.HRPv28 and GameData.SavedCFramev28 then
                GameData.HRPv28.CFrame = GameData.SavedCFramev28
            end
            GameData.SavedCFramev28 = nil
            GameData.CurrentHuntv28 = nil
        end
    end
})

Sec.Quest1 = Tabs.Quest:Section({
    Title = "Progress Quests",
    Box = true,
    BoxBorder = true,
    Opened = true,
})

GameData.LocalPlayer = GameData.Players.LocalPlayer

local function GetQuestList()
    local gui = GameData.LocalPlayer:FindFirstChild("PlayerGui")
    local quest = gui and gui:FindFirstChild("Quest")
    local list = quest and quest:FindFirstChild("List")
    return list and list:FindFirstChild("Inside")
end

GameData.QuestList = GetQuestList()

GameData.ElementParagraph = Sec.Quest1:Paragraph({
    Title = "Element Quest",
    Desc = "No Progress Data",
    Locked = false,
    Buttons = {}
})

GameData.DeepSeaParagraph = Sec.Quest1:Paragraph({
    Title = "Deep Sea Quest",
    Desc = "No Progress Data",
    Locked = false,
    Buttons = {}
})

function GameData:CheckQuest(questName, paragraph)
    self.QuestList = self.QuestList or GetQuestList()
    if not self.QuestList then
        paragraph:SetVisibility(false)
        return
    end

    for _, quest in ipairs(self.QuestList:GetChildren()) do
        local header =
            quest:FindFirstChild("Top")
            and quest.Top:FindFirstChild("TopFrame")
            and quest.Top.TopFrame:FindFirstChild("Header")

        if header and header:IsA("TextLabel") and header.Text == questName then
            local completed = 0
            local lines = {}

            for i = 1, 4 do
                local obj =
                    quest:FindFirstChild("Content")
                    and quest.Content:FindFirstChild("Objective" .. i)

                local vector =
                    obj
                    and obj:FindFirstChild("Content")
                    and obj.Content:FindFirstChild("Check")
                    and obj.Content.Check:FindFirstChild("Vector")

                if vector and vector:IsA("ImageLabel") and vector.Visible then
                    completed += 1
                    table.insert(lines, "(100/100): ✅")
                else
                    table.insert(lines, "(0/100): ❌")
                end
            end

            paragraph:SetTitle(
                completed == 4
                and questName .. " (Completed)"
                or questName .. " (In Progress)"
            )

            paragraph:SetDesc(
                table.concat(lines, "\n")
                .. "\n\nProgress: "
                .. completed .. "/4"
            )

            paragraph:SetVisibility(true)
            return
        end
    end

    paragraph:SetVisibility(false)
end

task.spawn(function()
    while task.wait(1) do
        GameData:CheckQuest("Element Quest", GameData.ElementParagraph)
        GameData:CheckQuest("Deep Sea Quest", GameData.DeepSeaParagraph)
    end
end)

GameData.ParagraphStatus = Sec.Quest1:Paragraph({
    Title = "TempleLever Status",
    Desc = "Checking...",
    Locked = false,
    Buttons = {}
})

local function CheckQuest()
    local resultText = ""

    for _, lever in ipairs(GameData.Jungle:GetChildren()) do
        if lever:IsA("Model") and lever:FindFirstChild("Crystal") then
            local crystal = lever.Crystal
            local meshId = tostring(crystal.MeshId)
            local artifactName = GameData.StageList[meshId] or "Unknown Artifact"

            local root = lever:FindFirstChild("RootPart")
            local prompt = root and root:FindFirstChildOfClass("ProximityPrompt")

            if not root or (root and not prompt) then
                resultText ..= artifactName .. " → 100%\n"
            else
                resultText ..= artifactName .. " → 0%\n"
            end
        end
    end

    GameData.ParagraphStatus:SetDesc(resultText)
end

task.spawn(function()
    while true do
        CheckQuest()
        task.wait(2)
    end
end)

Sec.Quest2 = Tabs.Quest:Section({
    Title = "Auto Quests",
    Box = true,
    BoxBorder = true,
    Opened = true,
})

GameData.LocalPlayer = GameData.Players.LocalPlayer
GameData.QuestList = GameData.LocalPlayer.PlayerGui.Quest.List.Inside

function GameData:GetHRP()
    local char = self.LocalPlayer.Character or self.LocalPlayer.CharacterAdded:Wait()
    return char:WaitForChild("HumanoidRootPart")
end

-- AUTO QUEST
function GameData:StartAutoQuest()
    if self.AutoThread then return end

    self.AutoThread = task.spawn(function()
        while GameData.AutoQuest do
            task.wait(2)

            if not GameData.SelectedQuest then
                continue
            end

            for _, quest in ipairs(GameData.QuestList:GetChildren()) do
                local header =
                    quest:FindFirstChild("Top")
                    and quest.Top:FindFirstChild("TopFrame")
                    and quest.Top.TopFrame:FindFirstChild("Header")

                if header and header:IsA("TextLabel")
                and header.Text == GameData.SelectedQuest then

                    local HRP = GameData:GetHRP()
                    local cfData = GameData.QuestCFrame[GameData.SelectedQuest]

                    -- OBJECTIVE 1
                    local obj1 = quest.Content.Objective1.Content.Check.Vector
                    if obj1.Visible then
                        HRP.CFrame = cfData.Done
                    else
                        HRP.CFrame = cfData.NotDone
                    end

                    -- OBJECTIVE 2 - 4 (FINISH CHECK)
                    local questFinished = true
                    for i = 2, 4 do
                        local vector =
                            quest.Content["Objective"..i]
                            .Content.Check.Vector

                        if not vector.Visible then
                            questFinished = false
                            break
                        end
                    end

                    if questFinished then
                        GameData.AutoQuest = false
                        print(GameData.SelectedQuest .. " SELESAI - AUTO STOP")
                    end

                    break
                end
            end
        end

        GameData.AutoThread = nil
    end)
end


Sec.Quest2:Dropdown({
    Title = "Select Quest",
    Flag = "SelectQuest",
    Desc = "Choose quest to auto run",
    Values = {
        "Element Quest",
        "Deep Sea Quest"
    },
    Value = "Element Quest",
    Multi = false,
    AllowNone = false,
    Callback = function(option)
        GameData.SelectedQuest = option
    end
})

Sec.Quest2:Toggle({
    Title = "Auto Quest",
    Flag = "AutoQuest",
    Value = false,
    Callback = function(value)
        GameData.AutoQuest = value
        if value then
            GameData:StartAutoQuest()
        end
    end
})


_G.Jungle = workspace:FindFirstChild("JUNGLE INTERACTIONS")

-- =========================
--  TELEPORT CFrame PER STAGE
-- =========================
_G.StageTP = {
    CFrame.new(1490.81421, 2.86463475, -842.592163, -0.991618156, 3.0407854e-09, -0.129203171, 2.10214846e-09, 1, 7.40118855e-09, 0.129203171, 7.06754877e-09, -0.991618156), -- Stage 1
    CFrame.new(1842.94128, 3.15022254, -290.12735, 0.303114563, 9.22644432e-08, -0.952954113, -8.85028655e-08, 1, 6.86685055e-08, 0.952954113, 6.35247446e-08, 0.303114563),  -- Stage 2
    CFrame.new(875.505676, 3.23971534, -357.766693, -0.152344614, -6.19773388e-08, 0.988327444, -3.3319314e-09, 1, 6.21957241e-08, -0.988327444, 6.18214413e-09, -0.152344614), -- Stage 3
    CFrame.new(1404.37671, 4.17689037, 121.881737, -0.958127379, -5.75146117e-08, 0.286342412, -4.29739515e-08, 1, 5.70648808e-08, -0.286342412, 4.23701572e-08, -0.958127379),  -- Stage 4
}

-- =========================
--  MESH ORDER PER STAGE
-- =========================
_G.MeshOrder = {
    "rbxassetid://112089909495700", -- Stage 1
    "rbxassetid://108196402536011", -- Stage 2
    "rbxassetid://140438616753774", -- Stage 3
    "rbxassetid://122936451238995"  -- Stage 4
}

-- =========================
--  STATE
-- =========================
_G.autoArtifactEnabled = false
_G.isRunning = false

-- (Tambahan) HRP pemain ke _G biar tidak aslinya undefined
local plr = game:GetService("Players").LocalPlayer
local char = plr.Character or plr.CharacterAdded:Wait()
_G.hrp = char:WaitForChild("HumanoidRootPart")

-- =========================
--  CEK STAGE BELUM SELESAI
-- =========================
function _G.IsQuestNotFinished(meshId)
    if not _G.Jungle then return false end

    for _, lever in ipairs(_G.Jungle:GetChildren()) do
        if lever.Name == "TempleLever" then
            local crystal = lever:FindFirstChild("Crystal")
            if crystal and crystal:IsA("MeshPart") and tostring(crystal.MeshId) == meshId then
                local root = lever:FindFirstChild("RootPart")
                local prompt = root and root:FindFirstChildOfClass("ProximityPrompt")
                if prompt then
                    return true
                end
            end
        end
    end
    return false
end

-- =========================
--  FIRE SEMUA PROMPT
-- =========================
function _G.FireAllForMesh(meshId)
    if not _G.Jungle then return end

    for _, lever in ipairs(_G.Jungle:GetChildren()) do
        if lever.Name == "TempleLever" then
            local crystal = lever:FindFirstChild("Crystal")
            if crystal and crystal:IsA("MeshPart") and tostring(crystal.MeshId) == meshId then
                local root = lever:FindFirstChild("RootPart")
                local prompt = root and root:FindFirstChildOfClass("ProximityPrompt")

                if prompt then
                    pcall(fireproximityprompt, prompt)
                end
            end
        end
    end
end

-- =========================
--  TELEPORT PLAYER
-- =========================
function _G.TeleportToStage(stage)
    if _G.StageTP[stage] then
        _G.hrp.CFrame = _G.StageTP[stage]
    end
end

-- =========================
--  MAIN SYSTEM
-- =========================
task.spawn(function()
    while true do
        task.wait(1)

        if _G.autoArtifactEnabled and not _G.isRunning then
            _G.isRunning = true

            local currentStage = 1

            while _G.autoArtifactEnabled and currentStage <= #_G.MeshOrder do

                _G.TeleportToStage(currentStage)
                task.wait(1)

                local meshId = _G.MeshOrder[currentStage]

                if _G.IsQuestNotFinished(meshId) then
                    _G.FireAllForMesh(meshId)
                else
                    -- perbaikan di sini: gunakan penjumlahan biasa (Luau tidak mendukung +=)
                    currentStage = currentStage + 1
                    task.wait(1)
                end

                task.wait(2)
            end

            _G.isRunning = false
        end
    end
end)

Sec.Quest2:Toggle({
    Title = "Auto Quest Artifact",
    Flag = "AutoQuestArtifact",
    Value = false,
    Callback = function(value)
        _G.autoArtifactEnabled = value
    end
})

Sec.Quest3 = Tabs.Quest:Section({
    Title = "Unlock Doors",
    Box = true,
    BoxBorder = true,
    Opened = true,
})

Sec.Quest3:Toggle({
    Title = "Auto Unlock Ancient Ruin",
    Flag = "AutoUnlockAncientRuin",
    Value = false,
    Callback = function(state)
        GameData.AutoUnlock = state

        if state then
            task.spawn(function()
                while GameData.AutoUnlock do
                    GameData.PlacePressureItemEvent =
                        game:GetService("ReplicatedStorage")
                            :WaitForChild("Packages")
                            :WaitForChild("_Index")
                            :WaitForChild("sleitnick_net@0.2.0")
                            :WaitForChild("net")
                            :WaitForChild("RE/PlacePressureItem")

                    for _, fish in ipairs(GameData.FishList) do
                        if not GameData.AutoUnlock then break end
                        GameData.PlacePressureItemEvent:FireServer(fish)
                        task.wait(2.5)
                    end

                    task.wait(10)
                end
            end)
        end
    end
})

GameData.NetFolderv20 = GameData.ReplicatedStoragev20
    :WaitForChild("Packages")
    :WaitForChild("_Index")
    :WaitForChild("sleitnick_net@0.2.0")
    :WaitForChild("net")

GameData.RE_DialogueEndedv20 = GameData.NetFolderv20:WaitForChild("RE/DialogueEnded")
GameData.RE_SearchItemPickedUpv20 = GameData.NetFolderv20:WaitForChild("RE/SearchItemPickedUp")
GameData.RE_GainAccessToMazev20 = GameData.NetFolderv20:WaitForChild("RE/GainAccessToMaze")

Sec.Quest3:Toggle({
    Title = "Auto Open Mysterious Cave Wall",
    Flag = "AutoOpenWallv20",
    Value = false,
    Callback = function(state)
        GameData.AutoOpenWallv20 = state

        if GameData.AutoOpenWallv20 then
            GameData.Connectionv20 = GameData.RunServicev20.Heartbeat:Connect(function()
                GameData.ExecuteStepsv20()
            end)
        else
            if GameData.Connectionv20 then
                GameData.Connectionv20:Disconnect()
                GameData.Connectionv20 = nil
            end
        end
    end
})

Sec.Quest4 = Tabs.Quest:Section({
    Title = "Diamond Rod",
    Box = true,
    BoxBorder = true,
    Opened = false,
})

GameData.Player = GameData.Players.LocalPlayer

function GameData.NormalizeLocale(locale)
    return locale:lower():gsub("_", "-")
end

GameData.Locale = GameData.NormalizeLocale(GameData.Player.LocaleId)
GameData.Translation =
    GameData.Translations[GameData.Locale]
    or GameData.Translations["en-us"]

GameData.Paragraph = Sec.Quest4:Paragraph({
    Title = GameData.Translation.Title,
    Desc = GameData.Translation.Desc
})

task.spawn(function()
    while true do
        GameData.Locale = GameData.NormalizeLocale(GameData.Player.LocaleId)

        GameData.Translation =
            GameData.Translations[GameData.Locale]
            or GameData.Translations["en-us"]

        GameData.Paragraph:SetTitle(GameData.Translation.Title)
        GameData.Paragraph:SetDesc(GameData.Translation.Desc)

        task.wait(3)
    end
end)

GameData.ProgresDiamondRod = Sec.Quest4:Paragraph({
    Title = "Progres Quest Diamond Rod",
    Desc = "No Progress Data",
})

function GameData.UpdateDiamondQuestDesc()
    local pg = GameData.player:FindFirstChild("PlayerGui")
    if not pg then
        GameData.ProgresDiamondRod:SetDesc("Loading... Progress Data")
        return
    end

    local questGui = pg:FindFirstChild("Quest")
    if not questGui or not questGui:FindFirstChild("List") then
        GameData.ProgresDiamondRod:SetDesc("Loading... Progress Data")
        return
    end

    GameData.inside = questGui.List:FindFirstChild("Inside")
    if not GameData.inside then
        GameData.ProgresDiamondRod:SetDesc("No Progress Data")
        return
    end

    table.clear(GameData.descText)

    for _, quest in pairs(GameData.inside:GetChildren()) do
        local header =
            quest:FindFirstChild("Top")
            and quest.Top:FindFirstChild("TopFrame")
            and quest.Top.TopFrame:FindFirstChild("Header")

        if header and header.Text == GameData.questName then
            for i = 1, 6 do
                local objective = quest.Content:FindFirstChild("Objective" .. i)
                if objective then
                    local vector = objective.Content.Check:FindFirstChild("Vector")
                    local isDone = vector and vector.Visible or false

                    local display = objective.Content:FindFirstChild("Display")
                    if display then
                        local prefix = display:FindFirstChild("Prefix")
                        local itemName = display:FindFirstChild("ItemName")
                        local suffix = display:FindFirstChild("Suffix")

                        table.insert(
                            GameData.descText,
                            (prefix and prefix.Text or "") .. " " ..
                            (itemName and itemName.Text or "") .. " " ..
                            (suffix and suffix.Text or "") .. " " ..
                            (isDone and "(1 / 1)" or "(0 / 1)")
                        )
                    end
                end
            end
            break
        end
    end

    if #GameData.descText == 0 then
        GameData.ProgresDiamondRod:SetDesc("Loading...")
    else
        GameData.ProgresDiamondRod:SetDesc(
            table.concat(GameData.descText, "\n")
        )
    end
end

task.spawn(function()
    while task.wait(5) do
        pcall(GameData.UpdateDiamondQuestDesc)
    end
end)

GameData.Player = GameData.Players.LocalPlayer

function GameData.InitCharacter()
    GameData.Character = GameData.Player.Character
        or GameData.Player.CharacterAdded:Wait()

    GameData.HRP = GameData.Character:WaitForChild("HumanoidRootPart")
end

GameData.InitCharacter()
GameData.Player.CharacterAdded:Connect(GameData.InitCharacter)

function GameData.GetQuest()
    if not GameData.Player
    or not GameData.Player:FindFirstChild("PlayerGui")
    or not GameData.Player.PlayerGui:FindFirstChild("Quest") then
        return
    end

    for _, v in ipairs(
        GameData.Player.PlayerGui.Quest.List.Inside:GetChildren()
    ) do
        GameData.Header =
            v:FindFirstChild("Top")
            and v.Top:FindFirstChild("TopFrame")
            and v.Top.TopFrame:FindFirstChild("Header")

        if GameData.Header
        and GameData.Header:IsA("TextLabel")
        and GameData.Header.Text == GameData.QuestName then
            return v
        end
    end
end

function GameData.AutoQuestLoop()
    while true do
        task.wait(5)

        if not GameData.AutoQuest then
            continue
        end

        if not GameData.HRP then
            continue
        end

        GameData.Quest = GameData.GetQuest()
        if not GameData.Quest then
            continue
        end

        GameData.Obj2 =
            GameData.Quest.Content.Objective2.Content.Check:FindFirstChild("Vector")
        GameData.Obj3 =
            GameData.Quest.Content.Objective3.Content.Check:FindFirstChild("Vector")
        GameData.Obj4 =
            GameData.Quest.Content.Objective4.Content.Check:FindFirstChild("Vector")

        -- QUEST FINISHED
        if GameData.Obj2 and GameData.Obj3 and GameData.Obj4
        and GameData.Obj2.Visible
        and GameData.Obj3.Visible
        and GameData.Obj4.Visible then
            GameData.AutoQuest = false
            continue
        end

        -- OBJECTIVE PRIORITY
        if GameData.Obj2 and not GameData.Obj2.Visible then
            GameData.HRP.CFrame = GameData.ObjectiveCFrame.Obj2

        elseif GameData.Obj3 and not GameData.Obj3.Visible then
            GameData.HRP.CFrame = GameData.ObjectiveCFrame.Obj3

        elseif GameData.Obj4 and not GameData.Obj4.Visible then
            GameData.HRP.CFrame = GameData.ObjectiveCFrame.Obj4
        end
    end
end

GameData.AutoThread = task.spawn(GameData.AutoQuestLoop)

Sec.Quest4:Toggle({
    Title = "Auto Quest Diamond Rod",
    Flag = "AutoQuestDiamondRod",
    Value = false,
    Callback = function(state)
        GameData.AutoQuest = state
    end
})


Sec.Trading1 = Tabs.Trading:Section({
    Title = "Trading",
    Box = true,
    BoxBorder = true,
    Opened = true,
})

GameData.DataReplionv29 = GameData.ReplionClientv29:WaitReplion("Data")
GameData.TierListv29 = GameData.TierList001

for num, name in pairs(GameData.TierMap001) do
	GameData.nameToTierv29[name] = num
end

-- Normalize helper
function GameData.normalize(value)
	if not value then return {} end
	if type(value) == "string" then
		return { value }
	end

	local out = {}
	for k, v in pairs(value) do
		if type(k) == "string" and v == true then
			table.insert(out, k)
		elseif type(v) == "string" then
			table.insert(out, v)
		end
	end
	return out
end

-- Check if item tier matches selected tiers
function GameData.isTierMatch(itemTier, selected)
	for _, tName in ipairs(selected) do
		if GameData.nameToTierv29[tName] == tonumber(itemTier) then
			return true
		end
	end
	return false
end

-- Safe invoke trade request
function GameData.safeTrade(userid, uuid)
	pcall(function()
		GameData.TradeRemotev29:InvokeServer(userid, uuid)
	end)
end

-- Get item list from inventory with counts and types
function GameData.getItemList()
	local inventory = GameData.DataReplionv29:GetExpect({ "Inventory", "Items" }) or {}
	local itemCount = {} -- Menyimpan jumlah per jenis item dengan tipe
	
	-- Hitung jumlah per jenis item
	for _, item in ipairs(inventory) do
		local ok, data = pcall(function()
			return GameData.ItemUtilityv29.GetItemDataFromItemType("Items", item.Id)
		end)

		if ok and data and data.Data then
			local itemType = data.Data.Type
			local itemName = data.Data.Name
			
			-- Filter berdasarkan tipe yang diaktifkan
			if GameData.statev29.enabledTypes[itemType] then
				local key = itemType .. "|" .. itemName
				if not itemCount[key] then
					itemCount[key] = {
						name = itemName,
						type = itemType,
						count = 0
					}
				end
				itemCount[key].count = itemCount[key].count + 1
			end
		end
	end
	
	-- Konversi ke format yang diinginkan
	local list = {}
	for _, itemData in pairs(itemCount) do
		table.insert(list, {
			name = itemData.name,
			type = itemData.type,
			display = itemData.name .. " [" .. itemData.count .. "]",
			count = itemData.count,
			fullName = itemData.type .. "|" .. itemData.name
		})
	end
	
	-- Sort berdasarkan nama item saja (tanpa tipe)
	table.sort(list, function(a, b)
		return a.name < b.name
	end)
	
	return list, itemCount
end

-- Worker function for auto trade
function GameData.workerTrade()
	GameData.RATEv29 = 0.15
	GameData.LOOP_DELAYv29 = 1

	while GameData.statev29.Auto2Trade do
		if GameData.statev29.stopTrade then
			return
		end

		local target = GameData.Playersv29:FindFirstChild(GameData.statev29.targetPlayer)
		if not target then
			GameData.statev29.Auto2Trade = false
			WindUI:Notify({
				Title = "Trade",
				Content = "Target player not found, stopping trade.",
				Duration = 4,
				Icon = "cloud-alert"
			})
			return
		end

		local inventory = GameData.DataReplionv29:GetExpect({ "Inventory", "Items" }) or {}
		local list = {}

		for _, item in ipairs(inventory) do
			local ok, data = pcall(function()
				return GameData.ItemUtilityv29.GetItemDataFromItemType("Items", item.Id)
			end)

			if ok and data and data.Data then
				-- Check if item type is enabled
				if GameData.statev29.enabledTypes[data.Data.Type] then
					local pass = false
					
					-- Check item filter (prioritas jika diaktifkan)
					if GameData.statev29.useItemFilter and #GameData.statev29.selectedItems > 0 then
						for _, fullName in ipairs(GameData.statev29.selectedItems) do
							local itemType, itemName = fullName:match("^(.+)|(.+)$")
							if itemType and itemName then
								if data.Data.Type == itemType and data.Data.Name == itemName then
									pass = true
									break
								end
							end
						end
					else
						-- Jika filter item tidak aktif, gunakan tier filter
						pass = GameData.isTierMatch(
							data.Data.Tier,
							GameData.statev29.selectedTiers
						)
					end
					
					if pass then
						table.insert(list, item.UUID)
					end
				end
			end
		end

		if #list == 0 then
			WindUI:Notify({
				Title = "Trade",
				Content = "No more items for selected filter",
				Duration = 4,
				Icon = "package"
			})
			GameData.statev29.Auto2Trade = false
			break
		end

		for _, uuid in ipairs(list) do
			if not GameData.statev29.Auto2Trade then
				break
			end

			GameData.safeTrade(target.UserId, uuid)
			task.wait(GameData.RATEv29)
		end

		task.wait(GameData.LOOP_DELAYv29)
	end
end

GameData.notifGuiv29 = GameData.playerv29.PlayerGui:WaitForChild("Text Notifications")
GameData.notifFramev29 = GameData.notifGuiv29:WaitForChild("Frame")

function GameData.checkTradeTile(tile)
	local header = tile:FindFirstChild("Header")
	if header and header:IsA("TextLabel") then
		if header.Text == "Trade completed!" then
			GameData.statev29.fishCount = GameData.statev29.fishCount + 1

			WindUI:Notify({
				Title = "Trade",
				Content = "Trade completed! (" .. GameData.statev29.fishCount .. "/" .. GameData.statev29.fishTarget .. ")",
				Duration = 3,
				Icon = "handshake"
			})

			if GameData.statev29.fishTarget > 0 and GameData.statev29.fishCount >= GameData.statev29.fishTarget then
				GameData.statev29.Auto2Trade = false
				GameData.statev29.stopTrade = true

				WindUI:Notify({
					Title = "Trade",
					Content = "Trade target reached!",
					Duration = 3,
					Icon = "cloud-check"
				})
			end
		end
	end
end

for _, tile in ipairs(GameData.notifFramev29:GetChildren()) do
	if tile.Name == "TextTile" then
		GameData.checkTradeTile(tile)
	end
end

GameData.notifFramev29.ChildAdded:Connect(function(child)
	if child.Name == "TextTile" then
		local headerObj = child:WaitForChild("Header", 5)
		if headerObj then
			GameData.checkTradeTile(child)
		end
	end
end)


GameData.PlayerMapv29 = {}

GameData.RefreshPlayersv29 = function(dropdown)
	local options = {}
	table.clear(GameData.PlayerMapv29)

	for _, plr in ipairs(GameData.Playersv29:GetPlayers()) do
		if plr ~= GameData.playerv29 then
			local label = plr.DisplayName .. " @" .. plr.Name
			GameData.PlayerMapv29[label] = plr.Name
			table.insert(options, label)
		end
	end

	dropdown:Refresh(options)

	if #options > 0 then
		dropdown:Select(options[1])
		GameData.statev29.targetPlayer = GameData.PlayerMapv29[options[1]]
	end
end

GameData.PlayerDropdownv29 = Sec.Trading1:Dropdown({
	Title = "Select Target Player",
	Flag = "SelectTargetPlayer",
	SearchBarEnabled = true,
	Desc = "Choose a player to trade with",
	Values = {},
	Value = nil,
	Multi = false,
	AllowNone = false,
	Callback = function(selection)
		if GameData.PlayerMapv29[selection] then
			GameData.statev29.targetPlayer = GameData.PlayerMapv29[selection]
			-- HAPUS NOTIFIKASI DI SINI (tidak perlu notif saat ganti player)
		end
	end
})

GameData.RefreshPlayersv29(GameData.PlayerDropdownv29)

Sec.Trading1:Button({
	Title = "Refresh Player List",
	Desc = "Update the player dropdown",
	Callback = function()
		GameData.RefreshPlayersv29(GameData.PlayerDropdownv29)
		-- Tampilkan notifikasi hanya saat refresh manual
		WindUI:Notify({
			Title = "Players",
			Content = "Player list refreshed",
			Duration = 3,
			Icon = "refresh-cw"
		})
	end
})

Sec.Trading1:Input({
	Title = "Item Amount Trade",
	Flag = "ItemAmountTrade",
	Desc = "Enter the number of items to trade",
	Value = tostring(GameData.statev29.fishTarget or ""),
	Placeholder = "Example: 10",
	Type = "Input",
	Callback = function(input)
		local amount = tonumber(input)
		if amount then
			GameData.statev29.fishTarget = amount
			GameData.statev29.fishCount = 0
			-- Tampilkan notifikasi untuk setting target
			WindUI:Notify({
				Title = "Trade Target",
				Content = "Trade target set: " .. amount,
				Duration = 3,
				Icon = "package"
			})
		else
			WindUI:Notify({
				Title = "Error",
				Content = "Input must be a number!",
				Duration = 3,
				Icon = "cloud-alert"
			})
		end
	end
})

-- Tier selection dropdown
Sec.Trading1:Dropdown({
	Title = "Select Tier(s)",
	Flag = "SelectTiers",
	Desc = "Choose one or more tiers",
	Values = GameData.TierList001,
	Value = { "Common" },
	Multi = true,
	AllowNone = true,
	Callback = function(selectedTiers)
		GameData.statev29.selectedTiers = GameData.normalize(selectedTiers)
		GameData.statev29.useItemFilter = false -- Nonaktifkan item filter saat tier dipilih
		-- HAPUS NOTIFIKASI DI SINI (tidak perlu notif saat ganti tier)
	end
})

local ItemDropdownv29
local itemListDatav29 = {} 

local function refreshItemDropdownv29()
	local itemList, itemCount = GameData.getItemList()
	local displayValues = {}
	itemListDatav29 = {}

	table.insert(displayValues, "None Item")
	itemListDatav29["None Item"] = "None|Item"
	
	for _, itemData in ipairs(itemList) do
		table.insert(displayValues, itemData.display)
		itemListDatav29[itemData.display] = itemData.fullName
	end
	
	ItemDropdownv29:Refresh(displayValues)
	
	ItemDropdownv29:Select({"None Item"})
	
	local totalItems = 0
	for _, itemData in ipairs(itemList) do
		totalItems = totalItems + itemData.count
	end
	
	return #itemList, totalItems
end

ItemDropdownv29 = Sec.Trading1:Dropdown({
	Title = "Select Items",
	Flag = "SelectItems",
    SearchBarEnabled = true,
	Values = {},
	Value = {},
	Multi = true,
	AllowNone = true,
	Callback = function(selectedItems)
		local cleanSelected = {}
		for _, displayName in ipairs(GameData.normalize(selectedItems)) do
			local fullName = itemListDatav29[displayName] or displayName
			table.insert(cleanSelected, fullName)
		end
		
		GameData.statev29.selectedItems = cleanSelected
		GameData.statev29.useItemFilter = false
		
		for _, fullName in ipairs(cleanSelected) do
			if fullName ~= "None|Item" then
				GameData.statev29.useItemFilter = true
				break
			end
		end
		
		if not GameData.statev29.useItemFilter then
			GameData.statev29.selectedItems = {}
		end
		
		-- HAPUS NOTIFIKASI DI SINI (tidak perlu notif saat pilih item)
	end
})

-- Refresh item list button
Sec.Trading1:Button({
	Title = "Refresh Item List",
	Desc = "Update available items from inventory (auto-selects None Item)",
	Callback = function()
		local itemTypes, totalItems = refreshItemDropdownv29()
		
		GameData.statev29.selectedItems = {}
		GameData.statev29.useItemFilter = false
		
		WindUI:Notify({
			Title = "Item List",
			Content = itemTypes .. " item types (" .. totalItems .. " total items)",
			Duration = 4,
			Icon = "refresh-cw"
		})
	end
})

-- Auto trade toggle
Sec.Trading1:Toggle({
	Title = "Auto Trade",
	Flag = "AutoTrade",
	Desc = "Enable or disable auto trading",
	Value = false,
	Callback = function(state)
		GameData.statev29.Auto2Trade = state
		GameData.statev29.stopTrade = not state

		if state then
			task.spawn(GameData.workerTrade)
			-- Notifikasi hanya saat mulai auto trade
			WindUI:Notify({
				Title = "Auto Trade",
				Content = "Auto Trade Started",
				Duration = 3,
				Icon = "play"
			})
		else
			-- Notifikasi hanya saat stop auto trade
			WindUI:Notify({
				Title = "Auto Trade",
				Content = "Auto Trade Stopped",
				Duration = 3,
				Icon = "circle-pause"
			})
		end
	end
})

refreshItemDropdownv29()

Sec.Shop1 = Tabs.Shop:Section({
    Title = "Rod Shop",
    Box = true,
    BoxBorder = true,
    Opened = true,
})

local selectedRods = {}
local autoBuyRods = false

Sec.Shop1:Dropdown({
    Title = "Select Rods",
    Flag = "SelectRods",
    SearchBarEnabled = true,
    Values = RodNames,
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(val)
        table.clear(selectedRods)
        for _, rodName in ipairs(val) do
            local id = RodIDs[rodName]
            if id then
                table.insert(selectedRods, id)
            end
        end
    end
})

Sec.Shop1:Toggle({
    Title = "Auto Purchase Loop",
    Flag = "AutoPurchaseRods",
    Value = false,
    Callback = function(state)
        autoBuyRods = state
        if not state then return end

        task.spawn(function()
            local remote = ReplicatedStorage
                :WaitForChild("Packages")
                :WaitForChild("_Index")
                :WaitForChild("sleitnick_net@0.2.0")
                :WaitForChild("net")
                :WaitForChild("RF/PurchaseFishingRod")

            while autoBuyRods do
                if #selectedRods > 0 then
                    for _, id in ipairs(selectedRods) do
                        pcall(function()
                            remote:InvokeServer(id)
                        end)
                    end
                end
                task.wait(5)
            end
        end)
    end
})

Sec.Shop2 = Tabs.Shop:Section({
    Title = "Bait Shop",
    Box = true,
    BoxBorder = true,
    Opened = true,
})

local selectedBaits = {}
local autoBuyBait = false

Sec.Shop2:Dropdown({
    Title = "Select Baits",
    Flag = "SelectBaits",
    SearchBarEnabled = true,
    Values = baitNames,
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(val)
        table.clear(selectedBaits)
        for _, baitName in ipairs(val) do
            local id = BaitIDs[baitName]
            if id then
                table.insert(selectedBaits, id)
            end
        end
    end
})

Sec.Shop2:Toggle({
    Title = "Auto Purchase Loop",
    Flag = "AutoPurchaseBait",
    Value = false,
    Callback = function(state)
        autoBuyBait = state
        if not state then return end

        task.spawn(function()
            local purchaseRemote = ReplicatedStorage
                :WaitForChild("Packages")
                :WaitForChild("_Index")
                :WaitForChild("sleitnick_net@0.2.0")
                :WaitForChild("net")
                :WaitForChild("RF/PurchaseBait")

            while autoBuyBait do
                if #selectedBaits > 0 then
                    for _, id in ipairs(selectedBaits) do
                        pcall(function()
                            purchaseRemote:InvokeServer(id)
                        end)
                    end
                end
                task.wait(5)
            end
        end)
    end
})

Sec.Shop3 = Tabs.Shop:Section({
    Title = "Weather Shop",
    Box = true,
    BoxBorder = true,
    Opened = true,
})


GameData.PurchaseWeatherv10 =
    GameData.Servicesv10.ReplicatedStoragev10
        :WaitForChild("Packages")
        :WaitForChild("_Index")
        :WaitForChild("sleitnick_net@0.2.0")
        :WaitForChild("net")
        :WaitForChild("RF/PurchaseWeatherEvent")

Sec.Shop3:Dropdown({
    Title = "Select Weather Events",
    Flag = "SelectWeathersv10",
    Values = { "Snow", "Wind", "Cloudy", "Storm", "Radiant", "Shark Hunt" },
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(val)
        table.clear(GameData.SelectedWeathersv10)
        for _, weather in ipairs(val) do
            table.insert(GameData.SelectedWeathersv10, weather)
        end
    end
})

Sec.Shop3:Toggle({
    Title = "Auto Purchase Weather",
    Flag = "AutoPurchaseWeatherv10",
    Value = false,
    Callback = function(state)
        GameData.AutoPurchasev10 = state
        if not state then return end

        task.spawn(function()
            while GameData.AutoPurchasev10 do
                if #GameData.SelectedWeathersv10 > 0 then
                    for _, weather in ipairs(GameData.SelectedWeathersv10) do
                        pcall(function()
                            GameData.PurchaseWeatherv10:InvokeServer(weather)
                        end)
                        task.wait(0.3)
                    end
                end
                task.wait(1.5)
            end
        end)
    end
})

Sec.Shop4 = Tabs.Shop:Section({
    Title = "Boat Shop",
    Box = true,
    BoxBorder = true,
    Opened = true,
})

GameData.PurchaseBoatv11 =
    GameData.Servicesv11.ReplicatedStoragev11
        :WaitForChild("Packages")
        :WaitForChild("_Index")
        :WaitForChild("sleitnick_net@0.2.0")
        :WaitForChild("net")
        :WaitForChild("RF/PurchaseBoat")

table.clear(GameData.PurchaseBoatOptionsv11)

for boatName in pairs(GameData.BoatList) do
    table.insert(GameData.PurchaseBoatOptionsv11, boatName)
end

table.sort(GameData.PurchaseBoatOptionsv11)

Sec.Shop4:Dropdown({
    Title = "Select Boat to Purchase",
    Flag = "SelectBoatv11",
    SearchBarEnabled = true,
    Values = GameData.PurchaseBoatOptionsv11,
    Value = nil,
    Multi = false,
    AllowNone = true,
    Callback = function(option)
        selectedBoatID = GameData.BoatList[option]
    end
})

Sec.Shop4:Toggle({
    Title = "Auto Purchase Boat",
    Flag = "AutoPurchaseBoatv11",
    Value = false,
    Callback = function(state)
        autoBuyBoat = state
        if not state then return end

        task.spawn(function()
            while autoBuyBoat do
                if selectedBoatID then
                    pcall(function()
                        GameData.PurchaseBoatv11:InvokeServer(selectedBoatID)
                    end)
                end
                task.wait(5)
            end
        end)
    end
})

Sec.Shop5 = Tabs.Shop:Section({
    Title = "Traveling Merchant",
    Box = true,
    BoxBorder = true,
    Opened = true,
})

-- Setup Merchant & RemoteFunction
GameData.Merchant = GameData.Replion.Client:WaitReplion("Merchant")
GameData.PurchaseRF = GameData.ReplicatedStorage
    :WaitForChild("Packages")
    :WaitForChild("_Index")
    :WaitForChild("sleitnick_net@0.2.0")
    :WaitForChild("net")
    :WaitForChild("RF/PurchaseMarketItem")

-- Ambil data merchant
function GameData.getMerchantItems()
    return GameData.Merchant:GetExpect("Items") or {}
end

-- Cari data market berdasarkan ID
function GameData.getMarketDataFromId(id)
    for _, v in ipairs(GameData.MarketItemData) do
        if v.Id == id then return v end
    end
end

-- Buat text untuk Paragraph
function GameData.buildMerchantText()
    local items = GameData.getMerchantItems()
    if #items == 0 then return "No stock available" end

    local lines = {}
    for _, marketId in ipairs(items) do
        local marketData = GameData.getMarketDataFromId(marketId)
        if marketData then
            local itemData = GameData.ItemUtility.GetItemDataFromItemType(marketData.Type, marketData.Identifier)
            local name = itemData and itemData.Data.Name or "Unknown Item"
            table.insert(lines, string.format("• %s\n  └ MarketID: %d | Type: %s", name, marketId, tostring(marketData.Type)))
        end
    end

    return table.concat(lines, "\n")
end

-- Update Paragraph
function GameData.updateParagraph()
    local items = GameData.getMerchantItems()
    GameData.MerchantParagraph:SetTitle(("Info Stock Merchant (%d)"):format(#items))
    GameData.MerchantParagraph:SetDesc(GameData.buildMerchantText())
end

-- Ambil options untuk Dropdown
function GameData.getDropdownOptions()
    local options = {}
    for _, marketId in ipairs(GameData.getMerchantItems()) do
        table.insert(options, "MarketID: " .. marketId)
    end
    return options
end

-- Refresh UI merchant
function GameData.refreshMerchantUI()
    GameData.updateParagraph()

    if GameData.MerchantDropdown then
        GameData.MerchantDropdown:Refresh(GameData.getDropdownOptions())
        GameData.MerchantDropdown:Select({})
    end

    table.clear(GameData.SelectedMarketIDs)
end

-- Paragraph Baru
GameData.MerchantParagraph = Sec.Shop5:Paragraph({
    Title = "Info Stock Merchant",
    Desc = "Loading merchant stock..."
})

-- Dropdown Baru
GameData.MerchantDropdown = Sec.Shop5:Dropdown({
    Title = "Select Merchant Items",
    Flag = "SelectMerchantItems",
    Desc = "Select items to auto-purchase",
    Values = {},
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(selected)
        table.clear(GameData.SelectedMarketIDs)
        for _, label in ipairs(selected) do
            local id = tonumber(label:match("%d+"))
            if id then
                table.insert(GameData.SelectedMarketIDs, id)
            end
        end
    end
})

-- Toggle Auto Purchase
Sec.Shop5:Toggle({
    Title = "Auto Purchase",
    Flag = "AutoPurchaseMerchant",
    Value = false,
    Callback = function(state)
        GameData.AutoPurchase = state
        if state then
            task.spawn(function()
                while GameData.AutoPurchase and #GameData.SelectedMarketIDs > 0 do
                    for _, marketId in ipairs(GameData.SelectedMarketIDs) do
                        pcall(function()
                            GameData.PurchaseRF:InvokeServer(marketId)
                        end)
                        task.wait(0.3)
                    end
                    task.wait(1)
                end
            end)
        end
    end
})

-- Button untuk refresh manual
Sec.Shop5:Button({
    Title = "Update Merchant Stock",
    Locked = false,
    Callback = function()
        GameData.refreshMerchantUI()
    end
})

-- Refresh awal UI
GameData.refreshMerchantUI()

-- Auto update saat merchant berubah (opsional, tapi aman)
GameData.Merchant:OnChange("Items", function()
    -- Hanya update paragraph & dropdown ketika user klik button
    -- GameData.refreshMerchantUI() -- bisa di-uncomment kalau mau auto tanpa loop
end)

Sec.Boat1 = Tabs.Boat:Section({
    Title = "Boat",
    Box = true,
    BoxBorder = true,
    Opened = true,
})

GameData.Player = GameData.Services.Players.LocalPlayer

function GameData:SetOwnerId(boat)
    if not boat then return end

    local ownerId = boat:GetAttribute("OwnerId")
    if ownerId ~= nil then
        if GameData.OriginalOwners[boat] == nil then
            GameData.OriginalOwners[boat] = ownerId
        end
        boat:SetAttribute("OwnerId", GameData.Player.UserId)
    end
end

function GameData:RestoreOwnerId(boat)
    if not boat then return end

    local originalId = GameData.OriginalOwners[boat]
    if originalId ~= nil then
        boat:SetAttribute("OwnerId", originalId)
        GameData.OriginalOwners[boat] = nil
    end
end

function GameData:ApplyToExistingBoats()
    for _, boat in ipairs(GameData.WorkspaceData.Vehicles:GetChildren()) do
        GameData:SetOwnerId(boat)
    end
end

function GameData:RestoreAllBoats()
    for boat in pairs(GameData.OriginalOwners) do
        if boat and boat.Parent then
            GameData:RestoreOwnerId(boat)
        end
    end
end

Sec.Boat1:Toggle({
    Title = "Access All Boats",
    Value = false,
    Callback = function(value)
        GameData.AccessAllBoats = value

        if value then
            GameData:ApplyToExistingBoats()

            GameData.VehicleConnection = GameData.WorkspaceData.Vehicles.ChildAdded:Connect(function(child)
                task.wait()
                if GameData.AccessAllBoats then
                    GameData:SetOwnerId(child)
                end
            end)
        else
            if GameData.VehicleConnection then
                GameData.VehicleConnection:Disconnect()
                GameData.VehicleConnection = nil
            end

            GameData:RestoreAllBoats()
        end
    end
})

GameData.SpawnBoat = GameData.RS
    :WaitForChild("Packages")
    :WaitForChild("_Index")
    :WaitForChild("sleitnick_net@0.2.0")
    :WaitForChild("net")
    :WaitForChild("RF/SpawnBoat")

for boatName in pairs(GameData.BoatList) do
    table.insert(GameData.SpawnBoatOptions, boatName)
end
table.sort(GameData.SpawnBoatOptions)

GameData.SelectedSpawnBoatID =
    GameData.BoatList[GameData.SpawnBoatOptions[1]]

-- Dropdown untuk memilih boat spawn
Sec.Boat1:Dropdown({
    Title = "Select Boat to Spawn",
    Flag = "SelectSpawnBoat",
    SearchBarEnabled = true,
    Desc = "Choose a boat to spawn",
    Values = GameData.SpawnBoatOptions,
    Value = GameData.SpawnBoatOptions[1],
    Multi = false,
    AllowNone = false,
    Callback = function(option)
        GameData.SelectedSpawnBoatID = GameData.BoatList[option]
    end
})

-- Tombol untuk spawn boat
Sec.Boat1:Button({
    Title = "Spawn Boat",
    Callback = function()
        pcall(function()
            GameData.SpawnBoat:InvokeServer(GameData.SelectedSpawnBoatID)
        end)
    end
})

Sec.Boat2 = Tabs.Boat:Section({
    Title = "Boat Speed Boost",
    Box = true,
    BoxBorder = true,
    Opened = true,
})

local customSpeed = 1000

-- Input untuk set kecepatan
Sec.Boat2:Input({
    Title = "Set Boat Speed",
    Flag = "SetBoatSpeed",
    Placeholder = "Example: 1000",
    Type = "Input",
    AcceptedCharacters = "0123456789",
    Callback = function(value)
        local number = tonumber(value)
        if number then
            customSpeed = number
        end
    end
})

-- Toggle Super Speed Boats
Sec.Boat2:Toggle({
    Title = "Super Speed Boats",
    Flag = "SuperSpeedBoats",
    Value = false,
    Callback = function(state)
        local BoatsModule = require(ReplicatedStorage.Shared.BoatsHandlingData)

        if not BoatsModule._OriginalSpeed then
            BoatsModule._OriginalSpeed = {}
            for boatName, boatData in pairs(BoatsModule) do
                if type(boatData) == "table" and boatData.Speed then
                    BoatsModule._OriginalSpeed[boatName] = boatData.Speed
                end
            end
        end

        if state then
            for _, boatData in pairs(BoatsModule) do
                if type(boatData) == "table" and boatData.Speed then
                    boatData.Speed = customSpeed
                end
            end
        else
            for boatName, boatData in pairs(BoatsModule) do
                if type(boatData) == "table" and boatData.Speed and BoatsModule._OriginalSpeed[boatName] then
                    boatData.Speed = BoatsModule._OriginalSpeed[boatName]
                end
            end
        end
    end
})

Sec.Tp1 = Tabs.Tp:Section({
    Title = "Island Teleport",
    Box = true,
    BoxBorder = true,
    Opened = true,
})

-- Ambil semua nama Island & sort
local islandNames = {}
for name in pairs(GameData.Islands) do
    table.insert(islandNames, name)
end

table.sort(islandNames, function(a, b)
    return a:lower() < b:lower()
end)

-- Default dropdown value
local selectedIsland = islandNames[1] or "Kohana"

-- Dropdown Select Island
-- Dropdown untuk pilih pulau
Sec.Tp1:Dropdown({
    Title = "Select Island",
    Flag = "SelectIsland",
    SearchBarEnabled = true,
    Desc = "Choose an island to teleport",
    Values = islandNames,
    Value = selectedIsland,
    Multi = false,
    AllowNone = false,
    Callback = function(value)
        selectedIsland = value
    end
})

-- Tombol teleport sekarang
Sec.Tp1:Button({
    Title = "Teleport Now",
    Callback = function()
        local player = game.Players.LocalPlayer
        local char = player.Character or player.CharacterAdded:Wait()
        if not char then return end

        local hrp = char:FindFirstChild("HumanoidRootPart")
        if not hrp then return end

        local targetCFrame = GameData.Islands[selectedIsland]
        if targetCFrame then
            char:PivotTo(targetCFrame)
        end
    end
})

Sec.Tp2 = Tabs.Tp:Section({
    Title = "Player Teleport",
    Box = true,
    BoxBorder = true,
    Opened = true,
})

GameData.LocalPlayerv12 = GameData.Servicesv12.Playersv12.LocalPlayer

function GameData:GetPlayerDisplayListv12()
    table.clear(self.PlayerListv12)

    for _, plr in pairs(self.Servicesv12.Playersv12:GetPlayers()) do
        if plr ~= self.LocalPlayerv12 then
            table.insert(
                self.PlayerListv12,
                plr.DisplayName .. " @" .. plr.Name
            )
        end
    end

    return self.PlayerListv12
end

GameData.PlayerDropdownv12 = Sec.Tp2:Dropdown({
    Title = "Select Player",
    Flag = "SelectPlayerv12",
    SearchBarEnabled = true,
    Desc = "Choose the player you want to teleport to",
    Values = GameData:GetPlayerDisplayListv12(),
    Value = GameData:GetPlayerDisplayListv12()[1] or "",
    Callback = function(option)
        GameData.AtPosv12 = string.find(option, "@")
        if GameData.AtPosv12 then
            GameData.SelectedPlayerUsernamev12 =
                string.sub(option, GameData.AtPosv12 + 1)
        end
    end
})

Sec.Tp2:Button({
    Title = "Teleport to Player",
    Callback = function()
        if not GameData.SelectedPlayerUsernamev12 then return end

        GameData.TargetPlayerv12 =
            GameData.Servicesv12.Playersv12:FindFirstChild(
                GameData.SelectedPlayerUsernamev12
            )

        if GameData.TargetPlayerv12
            and GameData.TargetPlayerv12.Character
            and GameData.TargetPlayerv12.Character:FindFirstChild("HumanoidRootPart")
            and GameData.LocalPlayerv12.Character then

            GameData.LocalPlayerv12.Character:SetPrimaryPartCFrame(
                GameData.TargetPlayerv12.Character.HumanoidRootPart.CFrame
                + Vector3.new(0, 5, 0)
            )
        end
    end
})

Sec.Tp2:Button({
    Title = "Refresh Player List",
    Callback = function()
        GameData.CurrentValuev12 = GameData.SelectedPlayerUsernamev12
        GameData.NewValuesv12 = GameData:GetPlayerDisplayListv12()

        GameData.PlayerDropdownv12:Refresh(GameData.NewValuesv12)

        if GameData.CurrentValuev12 then
            for _, v in pairs(GameData.NewValuesv12) do
                if string.find(v, "@" .. GameData.CurrentValuev12) then
                    GameData.PlayerDropdownv12:Select(v)
                    GameData.SelectedPlayerUsernamev12 =
                        GameData.CurrentValuev12
                    return
                end
            end
        end

        GameData.SelectedPlayerUsernamev12 =
            GameData.NewValuesv12[1]
            and string.match(GameData.NewValuesv12[1], "@(.+)")
            or nil

        if GameData.NewValuesv12[1] then
            GameData.PlayerDropdownv12:Select(GameData.NewValuesv12[1])
        end
    end
})

Sec.Tp3 = Tabs.Tp:Section({
    Title = "Saved Positions",
    Box = true,
    BoxBorder = true,
    Opened = true,
})

GameData.folder = GameData.rootFolder .. "/" .. tostring(game.PlaceId)

-- FOLDER CHECK
if not isfolder(GameData.rootFolder) then makefolder(GameData.rootFolder) end
if not isfolder(GameData.folder) then makefolder(GameData.folder) end

-- SAVE POSITION TO FILE
local function savePosToFile(slotName, cframe)
    local path = GameData.folder .. "/" .. slotName .. ".txt"
    local data = string.format(
        "CFrame.new(%f, %f, %f, %f, %f, %f, %f, %f, %f, %f, %f, %f)",
        cframe:GetComponents()
    )
    writefile(path, data)
end

-- LOAD POSITION FROM FILE
local function loadPosFromFile(slotName)
    local path = GameData.folder .. "/" .. slotName .. ".txt"
    if not isfile(path) then return nil end

    local raw = readfile(path)
    local ok, res = pcall(function()
        return loadstring("return " .. raw)()
    end)

    if ok and typeof(res) == "CFrame" then
        return res
    end

    return nil
end

-- LOAD ALL SAVES ON STARTUP
for _, file in pairs(listfiles(GameData.folder)) do
    local name = file:match(".+/(.+)%.txt$")
    if name then
        GameData.SavedPositions[name] = loadPosFromFile(name)
    end
end

--------------------------------------------------------------------
-- UI NEW VERSION
--------------------------------------------------------------------
-- Input untuk slot custom
GameData.SaveInput = Sec.Tp3:Input({
    Title = "Slot Name",
    Flag = "SavePositionSlotName",
    Desc = "Type slot name...",
    Value = "",
    InputIcon = "bird",
    Type = "Input",
    Placeholder = "Enter slot name...",
    Callback = function(text)
        GameData.customSlotName = text:gsub("[^%w%s_%-_]", "")
    end
})

-- Dropdown untuk pilih slot
GameData.SaveDropdown = Sec.Tp3:Dropdown({
    Title = "Save Position Slot",
    Flag = "SavePositionSlot",
    Desc = "Select a saved position",
    Values = {}, -- akan di-refresh
    Value = "",
    Callback = function(Value)
        if not Value or Value == "" then
            GameData.selectedSlot = nil
            return
        end

        GameData.selectedSlot = Value
    end
})

-- Button Save Position
GameData.SaveButton = Sec.Tp3:Button({
    Title = "Save Position",
    Desc = "Save your current position",
    Callback = function()
        GameData.char = GameData.LocalPlayer.Character
        GameData.hrp = GameData.char and GameData.char:FindFirstChild("HumanoidRootPart")

        if GameData.customSlotName == "" or not GameData.hrp then
            return
        end

        GameData.SavedPositions[GameData.customSlotName] = GameData.hrp.CFrame
        savePosToFile(GameData.customSlotName, GameData.hrp.CFrame)

        refreshSlots()
        GameData.SaveDropdown:Select(GameData.customSlotName)
    end
})

-- Button Delete Save
GameData.DeleteButton = Sec.Tp3:Button({
    Title = "Delete Save",
    Desc = "Delete selected saved position",
    Callback = function()
        local slot = GameData.selectedSlot
        if not slot then return end

        local path = GameData.folder .. "/" .. slot .. ".txt"
        if not isfile(path) then return end

        delfile(path)
        GameData.SavedPositions[slot] = nil
        GameData.selectedSlot = nil

        refreshSlots()
        GameData.SaveDropdown:Select(nil)
    end
})

-- Button Refresh Slots
GameData.RefreshButton = Sec.Tp3:Button({
    Title = "Refresh Slot List",
    Desc = "Refresh available slots",
    Callback = function()
        refreshSlots()
    end
})

-- REFRESH FUNCTION
function refreshSlots()
    GameData.options = {}

    for _, file in pairs(listfiles(GameData.folder)) do
        local name = file:match(".+/(.+)%.txt$")
        if name then
            table.insert(GameData.options, name)
        end
    end

    GameData.SaveDropdown:Refresh(GameData.options)
end
refreshSlots()

--------------------------------------------------------------------
-- TELEPORT SYSTEM
--------------------------------------------------------------------
local function freezeToSlot(slot)
    local target = GameData.SavedPositions[slot]
    if not target then return end

    GameData.char = GameData.LocalPlayer.Character
    GameData.hrp = GameData.char and GameData.char:FindFirstChild("HumanoidRootPart")
    if not GameData.hrp then return end

    GameData.bv = Instance.new("BodyVelocity")
    GameData.bv.MaxForce = Vector3.new(1e5, 1e5, 1e5)
    GameData.bv.Velocity = Vector3.zero
    GameData.bv.Parent = GameData.hrp

    GameData.bg = Instance.new("BodyGyro")
    GameData.bg.MaxTorque = Vector3.new(1e5, 1e5, 1e5)
    GameData.bg.CFrame = target
    GameData.bg.Parent = GameData.hrp

    task.spawn(function()
        while GameData.teleportEnabled and GameData.hrp.Parent do
            if (GameData.hrp.Position - target.Position).Magnitude > 2 then
                GameData.hrp.CFrame = target
            end
            task.wait(0.1)
        end

        if GameData.bv then GameData.bv:Destroy() end
        if GameData.bg then GameData.bg:Destroy() end
    end)
end

-- Toggle Teleport
Sec.Tp3:Toggle({
    Title = "Teleport to Saved Position",
    Flag = "TeleportToSavedPosition",
    Desc = "Lock character to selected slot",
    Value = false,
    Callback = function(state)
        GameData.teleportEnabled = state

        if state and GameData.selectedSlot then
            freezeToSlot(GameData.selectedSlot)
        end
    end
})

function GameData:GetRootv26()
    self.Characterv26 = self.Playerv26.Character
    if self.Characterv26 then
        self.Rootv26 = self.Characterv26:FindFirstChild("HumanoidRootPart")
        return self.Rootv26
    end
end

function GameData:FreezeCharacterv26()
    self.Rootv26 = self:GetRootv26()
    if not self.Rootv26 then return end

    self.BVv26 = Instance.new("BodyVelocity")
    self.BVv26.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
    self.BVv26.Velocity = Vector3.zero
    self.BVv26.Parent = self.Rootv26

    self.BGv26 = Instance.new("BodyGyro")
    self.BGv26.MaxTorque = Vector3.new(math.huge, math.huge, math.huge)
    self.BGv26.CFrame = self.Rootv26.CFrame
    self.BGv26.P = 10000
    self.BGv26.Parent = self.Rootv26
end

function GameData:UnfreezeCharacterv26()
    if self.BVv26 then
        self.BVv26:Destroy()
        self.BVv26 = nil
    end
    if self.BGv26 then
        self.BGv26:Destroy()
        self.BGv26 = nil
    end
end

function GameData:ApplyFreezerv26(state)
    self.Freezev26 = state
    if state then
        self:FreezeCharacterv26()
    else
        self:UnfreezeCharacterv26()
    end
end

GameData.FreezeTogglev26 = Sec.Tp3:Toggle({
    Title = "Freeze Character",
    Flag = "FreezeCharacterv26",
    Value = false,
    Callback = function(state)
        GameData:ApplyFreezerv26(state)
    end
})

GameData.UISv26.InputBegan:Connect(function(input, gpe)
    if gpe then return end
    if input.KeyCode == Enum.KeyCode.F then
        GameData:ApplyFreezerv26(not GameData.Freezev26)
        if GameData.FreezeTogglev26 and GameData.FreezeTogglev26.SetValue then
            GameData.FreezeTogglev26:SetValue(GameData.Freezev26)
        end
    end
end)

GameData.Playerv26.CharacterAdded:Connect(function()
    if GameData.Freezev26 then
        task.wait(0.3)
        GameData:FreezeCharacterv26()
    end
end)

Sec.Player1 = Tabs.Player:Section({
    Title = "Player Identity",
    Box = true,
    BoxBorder = true,
    Opened = true,
})

GameData.LocalPlayerv3 = GameData.Servicesv3.Playersv3.LocalPlayer

function GameData:GetOverheadv3()
    if not self.LocalPlayerv3 then return end

    self.Characterv3 = self.LocalPlayerv3.Character
    if not self.Characterv3 then return end

    self.HRPv3 = self.Characterv3:FindFirstChild("HumanoidRootPart")
    if not self.HRPv3 then return end

    self.Overheadv3 = self.HRPv3:FindFirstChild("Overhead")
    if not self.Overheadv3 then return end

    self.Contentv3 = self.Overheadv3:FindFirstChild("Content")
    self.Headerv3 = self.Contentv3 and self.Contentv3:FindFirstChild("Header")

    self.LevelContainerv3 = self.Overheadv3:FindFirstChild("LevelContainer")
    self.LevelLabelv3 = self.LevelContainerv3 and self.LevelContainerv3:FindFirstChild("Label")
end

Sec.Player1:Input({
    Title = "Custom Name",
    Flag = "CustomName",
    Desc = "Set your custom username",
    Placeholder = "Username",
    Type = "Input",
    Callback = function(input)
        GameData.CustomNamev3 = input or ""
    end
})

Sec.Player1:Input({
    Title = "Custom Level",
    Flag = "CustomLevel",
    Desc = "Set your custom level",
    Placeholder = "Lvl: 999",
    Type = "Input",
    Callback = function(input)
        GameData.CustomLevelv3 = input or ""
    end
})

Sec.Player1:Toggle({
    Title = "Custom Overhead",
    Flag = "CustomOverhead",
    Default = false,
    Callback = function(value)
        GameData.OverheadEnabledv3 = value
    end
})


task.spawn(function()
    while task.wait(0.2) do
        if not GameData.OverheadEnabledv3 then
            continue
        end

        GameData.GetSuccessv3 = pcall(function()
            GameData:GetOverheadv3()
        end)

        if not GameData.GetSuccessv3 then
            continue
        end

        if GameData.Headerv3 and GameData.CustomNamev3 ~= "" then
            GameData.Headerv3.Text = GameData.CustomNamev3
        end

        if GameData.LevelLabelv3 and GameData.CustomLevelv3 ~= "" then
            GameData.LevelLabelv3.Text = GameData.CustomLevelv3
        end
    end
end)

Sec.Player = Tabs.Player:Section({
    Title = "Utility",
    Box = true,
    BoxBorder = true,
    Opened = true,
})

local AntiDrown_Enabled = false

Sec.Player:Toggle({
    Title = "Anti Drown",
    Flag = "AntiDrown",
    Default = false,
    Callback = function(value)
        AntiDrown_Enabled = value
    end
})

local rawmt = getrawmetatable(game)
setreadonly(rawmt, false)

local oldNamecall = rawmt.__namecall
rawmt.__namecall = newcclosure(function(self, ...)
    local method = getnamecallmethod()

    if AntiDrown_Enabled 
       and tostring(self) == "URE/UpdateOxygen" 
       and method == "FireServer" then
        return nil
    end

    return oldNamecall(self, ...)
end)

Sec.Player:Toggle({
    Title = "Bypass Radar",
    Flag = "BypassRadar",
    Default = false,
    Callback = function(state)
        Window.AlwayShowTab = state

        local remoteFunc = ReplicatedStorage
            :WaitForChild("Packages")
            :WaitForChild("_Index")
            :WaitForChild("sleitnick_net@0.2.0")
            :WaitForChild("net")
            :WaitForChild("RF/UpdateFishingRadar")

        pcall(function()
            remoteFunc:InvokeServer(state)
        end)
    end
})

GameData.Player = GameData.Services.Players.LocalPlayer

function GameData:Rejoin()
    if not self.AutoReconnect then return end

    task.wait(2)

    local jobId = game.JobId
    if jobId ~= "" then
        self.Services.TeleportService:TeleportToPlaceInstance(
            self.PlaceId,
            jobId,
            self.Player
        )
    else
        self.Services.TeleportService:Teleport(
            self.PlaceId,
            self.Player
        )
    end
end

function GameData:EnableAutoReconnect()
    self.Connections.Error =
        self.Services.GuiService.ErrorMessageChanged:Connect(function()
            self:Rejoin()
        end)

    self.Connections.Teleport =
        self.Player.OnTeleport:Connect(function(state)
            if state == Enum.TeleportState.Failed then
                self:Rejoin()
            end
        end)
end

function GameData:DisableAutoReconnect()
    for _, conn in pairs(self.Connections) do
        if conn then
            conn:Disconnect()
        end
    end
    table.clear(self.Connections)
end

Sec.Player:Toggle({
    Title = "Auto Reconnect",
    Flag = "AutoReconnect",
    Default = false,
    Callback = function(value)
        GameData.AutoReconnect = value

        if value then
            GameData:EnableAutoReconnect()
        else
            GameData:DisableAutoReconnect()
        end
    end
})

Sec.Player:Toggle({
    Title = "Anti Lava",
    Flag = "AntiLava",
    Default = false,
    Callback = function(state)
        if state then
            GameData.connection = RunService.Heartbeat:Connect(function()
                for _, obj in ipairs(workspace.Zones["Kohana Volcano"]:GetDescendants()) do
                    if obj:IsA("TouchTransmitter") then
                        obj:Destroy()
                    end
                end
            end)
        else
            if GameData.connection then
                GameData.connection:Disconnect()
                GameData.connection = nil
            end
        end
    end
})


Sec.Player:Toggle({
    Title = "Hide Notifications",
    Flag = "HideNotifications",
    Default = false,
    Callback = function(value)
        local gui = player:WaitForChild("PlayerGui")
        
        local smallNotif = gui:FindFirstChild("Small Notification")
        if smallNotif and smallNotif:FindFirstChild("Display") then
            smallNotif.Display.Visible = not value
        end

        local textNotif = gui:FindFirstChild("Text Notifications")
        if textNotif and textNotif:FindFirstChild("Frame") then
            textNotif.Frame.Visible = not value
        end
    end
})

Sec.Player:Toggle({
    Title = "Infinite Zoom",
    Flag = "InfiniteZoom",
    Default = false,
    Callback = function(val)
        GameData.infiniteZoomEnabled = val

        if val then
            GameData.player.CameraMaxZoomDistance = math.huge
            GameData.player.CameraMinZoomDistance = 0.5
        else
            GameData.player.CameraMaxZoomDistance = 16
            GameData.player.CameraMinZoomDistance = 0.5
        end
    end
})

GameData.waterVFXFolder = GameData.RS:WaitForChild("VFX")

Sec.Player:Toggle({
    Title = "Remove Skin Effect",
    Flag = "RemoveVFX",
    Default = false,
    Callback = function(enabled)

        if enabled then
            for _, obj in ipairs(GameData.waterVFXFolder:GetChildren()) do
                if not GameData.storedVFX[obj.Name] then
                    GameData.storedVFX[obj.Name] = obj:Clone()
                end
                obj:Destroy()
            end

            if not GameData.childAddedConn then
                GameData.childAddedConn = GameData.waterVFXFolder.ChildAdded:Connect(function(obj)
                    if not Sec.Player:Get("RemoveVFX") then return end

                    task.wait()
                    if obj and obj.Parent then
                        if not GameData.storedVFX[obj.Name] then
                            GameData.storedVFX[obj.Name] = obj:Clone()
                        end
                        obj:Destroy()
                    end
                end)
            end

        else
            if GameData.childAddedConn then
                GameData.childAddedConn:Disconnect()
                GameData.childAddedConn = nil
            end

            for name, clone in pairs(GameData.storedVFX) do
                if not GameData.waterVFXFolder:FindFirstChild(name) then
                    clone:Clone().Parent = GameData.waterVFXFolder
                end
            end

            GameData.storedVFX = {}
        end
    end
})

-- Character Handler
GameData.character = GameData.player.Character or GameData.player.CharacterAdded:Wait()
GameData.hrp = GameData.character:WaitForChild("HumanoidRootPart")

GameData.player.CharacterAdded:Connect(function(char)
    GameData.character = char
    GameData.hrp = char:WaitForChild("HumanoidRootPart")
end)


Sec.Player:Toggle({
    Title = "Walk On Water",
    Flag = "WalkOnWater",
    Default = false,
    Callback = function(value)
        if value then
            if not GameData.waterPlatform then
                GameData.waterPlatform = Instance.new("Part")
                GameData.waterPlatform.Name = "WaterWalkPlatform"
                GameData.waterPlatform.Size = Vector3.new(15,1,15)
                GameData.waterPlatform.Anchored = true
                GameData.waterPlatform.CanCollide = false
                GameData.waterPlatform.Transparency = 1
                GameData.waterPlatform.Material = Enum.Material.SmoothPlastic
                GameData.waterPlatform.Parent = workspace
            end

            if not GameData.connection then
                GameData.connection = GameData.RunService.Heartbeat:Connect(function()
                    if not GameData.waterPlatform or not GameData.hrp then return end
                    GameData.waterPlatform.Position = Vector3.new(
                        GameData.hrp.Position.X,
                        GameData.waterHeight,
                        GameData.hrp.Position.Z
                    )
                    GameData.waterPlatform.CanCollide =
                        GameData.hrp.Position.Y > GameData.waterHeight
                end)
            end
        else
            if GameData.connection then
                GameData.connection:Disconnect()
                GameData.connection = nil
            end
            if GameData.waterPlatform then
                GameData.waterPlatform:Destroy()
                GameData.waterPlatform = nil
            end
        end
    end
})

GameData.Player = GameData.Players.LocalPlayer

function GameData:CacheQuestGui()
    self.PlayerGui = self.Player:FindFirstChild("PlayerGui")
    if not self.PlayerGui then return false end

    self.QuestGui = self.PlayerGui:FindFirstChild("Quest")
    if not self.QuestGui then return false end

    self.QuestList = self.QuestGui:FindFirstChild("List")
    if not self.QuestList then return false end

    return true
end

function GameData:SetQuestVisible(state)
    if not self.QuestList then
        if not self:CacheQuestGui() then
            return
        end
    end

    self.QuestList.Visible = state
end

Sec.Player:Toggle({
    Title = "Hide Quest",
    Flag = "HideQuest",
    Default = false,
    Callback = function(value)
        GameData:SetQuestVisible(not value)
    end
})

Sec.Player2 = Tabs.Player:Section({
    Title = "Anti Afk",
    Box = true,
    BoxBorder = true,
    Opened = true,
})

GameData.AntiAFKParagraph = Sec.Player2:Paragraph({
    Title = "Anti AFK Time",
    Flag = "AntiAFK",
    Desc = "AFK: 0 Min 0 Sec"
})

function GameData.resetAFK()
    GameData.lastInput = tick()
end

GameData.connections.began =
    GameData.UserInputService.InputBegan:Connect(GameData.resetAFK)

GameData.connections.changed =
    GameData.UserInputService.InputChanged:Connect(GameData.resetAFK)

GameData.connections.ended =
    GameData.UserInputService.InputEnded:Connect(GameData.resetAFK)

task.spawn(function()
    while true do
        task.wait(1)

        GameData.runtime.totalSeconds = math.floor(tick() - GameData.lastInput)
        GameData.runtime.minutes = math.floor(GameData.runtime.totalSeconds / 60)
        GameData.runtime.seconds = GameData.runtime.totalSeconds % 60

        GameData.AntiAFKParagraph:SetDesc(
            "AFK: " .. GameData.runtime.minutes .. " Min " .. GameData.runtime.seconds .. " Sec"
        )

        if GameData.runtime.totalSeconds >= GameData.intervalMinutes * 60 then
            GameData.UserInputService.MouseIconEnabled = true
            task.wait(GameData.showSeconds)
            GameData.UserInputService.MouseIconEnabled = false
            GameData.lastInput = tick()
        end
    end
end)

function GameData:StartAntiAfk()
    if self.AntiAfkThread then return end

    self.AntiAfkThread = task.spawn(function()
        while GameData.AntiAfkRunning do

            GameData.VIM:SendKeyEvent(true, Enum.KeyCode.Escape, false, game)
            task.wait(0.05)
            GameData.VIM:SendKeyEvent(false, Enum.KeyCode.Escape, false, game)

            task.wait(0.15)

            GameData.VIM:SendKeyEvent(true, Enum.KeyCode.Escape, false, game)
            task.wait(0.05)
            GameData.VIM:SendKeyEvent(false, Enum.KeyCode.Escape, false, game)

            task.wait(600)
        end

        GameData.AntiAfkThread = nil
    end)
end

Sec.Player2:Toggle({
    Title = "Anti AFK",
    Desc = "Prevent kick when idle",
    Flag = "AntiAFK",
    Value = false,
    Callback = function(value)
        GameData.AntiAfkRunning = value

        if value then
            GameData:StartAntiAfk()
        end
    end
})

Sec.Player5 = Tabs.Player:Section({
    Title = "Anti Staff (Coming Soon)",
    Box = true,
    BoxBorder = true,
    Opened = true,
})

Sec.Player4 = Tabs.Player:Section({
    Title = "Boost",
    Box = true,
    BoxBorder = true,
    Opened = true,
})

GameData.BlackGuiv27 = Instance.new("ScreenGui")
GameData.BlackGuiv27.Name = "BlackScreenGuiv27"
GameData.BlackGuiv27.IgnoreGuiInset = true
GameData.BlackGuiv27.ResetOnSpawn = false
GameData.BlackGuiv27.Parent = GameData.Playerv27:WaitForChild("PlayerGui")

GameData.BlackFramev27 = Instance.new("Frame")
GameData.BlackFramev27.Size = UDim2.new(1, 0, 1, 0)
GameData.BlackFramev27.Position = UDim2.new(0, 0, 0, 0)
GameData.BlackFramev27.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
GameData.BlackFramev27.BorderSizePixel = 0
GameData.BlackFramev27.Visible = false
GameData.BlackFramev27.ZIndex = 999999
GameData.BlackFramev27.Parent = GameData.BlackGuiv27

GameData.AFKTextv27 = Instance.new("TextLabel")
GameData.AFKTextv27.Size = UDim2.new(1, 0, 0, 60)
GameData.AFKTextv27.Position = UDim2.new(0, 0, 0.5, -30)
GameData.AFKTextv27.BackgroundTransparency = 1
GameData.AFKTextv27.Text = "AFK MODE"
GameData.AFKTextv27.TextColor3 = Color3.fromRGB(255, 255, 255)
GameData.AFKTextv27.TextScaled = true
GameData.AFKTextv27.Font = Enum.Font.GothamBold
GameData.AFKTextv27.ZIndex = 1000000
GameData.AFKTextv27.Parent = GameData.BlackFramev27

Sec.Player4:Toggle({
    Title = "Black Screen",
    Flag = "BlackScreen",
    Value = false,
    Callback = function(state)
        GameData.BlackFramev27.Visible = state
    end
})

function GameData:LowObjectv8(obj)
	if not self.BoostEnabledv8 then return end

	if obj:IsA("BasePart") then
		obj.Material = Enum.Material.SmoothPlastic
		obj.Color = self.GRAYv8
		obj.Reflectance = 0
		obj.CastShadow = false

	elseif obj:IsA("Decal")
	or obj:IsA("Texture")
	or obj:IsA("SurfaceAppearance")
	or obj:IsA("ParticleEmitter")
	or obj:IsA("Beam")
	or obj:IsA("Trail")
	or obj:IsA("Fire")
	or obj:IsA("Smoke")
	or obj:IsA("Sparkles") then
		obj:Destroy()
	end
end

function GameData:LowLightingv8()
	if not self.BoostEnabledv8 then return end

	local Lighting = self.Servicesv8.Lightingv8

	Lighting.GlobalShadows = false
	Lighting.Brightness = 1
	Lighting.FogEnd = 1e8
	Lighting.EnvironmentDiffuseScale = 0
	Lighting.EnvironmentSpecularScale = 0
	Lighting.Ambient = self.GRAYv8
	Lighting.OutdoorAmbient = self.GRAYv8

	for _, v in ipairs(Lighting:GetChildren()) do
		if v:IsA("BloomEffect")
		or v:IsA("BlurEffect")
		or v:IsA("SunRaysEffect")
		or v:IsA("ColorCorrectionEffect")
		or v:IsA("DepthOfFieldEffect")
		or v:IsA("Atmosphere") then
			v:Destroy()
		end
	end
end

function GameData:KillWaterv8()
	if not self.BoostEnabledv8 or not self.Terrainv8 then return end

	self.Terrainv8.WaterTransparency = 1
	self.Terrainv8.WaterReflectance = 0
	self.Terrainv8.WaterWaveSize = 0
	self.Terrainv8.WaterWaveSpeed = 0
end

function GameData:LowCharacterv8(char)
	if not self.BoostEnabledv8 then return end

	for _, v in ipairs(char:GetDescendants()) do
		if v:IsA("BasePart") then
			v.Material = Enum.Material.SmoothPlastic
			v.Color = self.GRAYv8
			v.CastShadow = false

		elseif v:IsA("Decal")
		or v:IsA("Texture")
		or v:IsA("SurfaceAppearance")
		or v:IsA("Shirt")
		or v:IsA("Pants")
		or v:IsA("Accessory") then
			v:Destroy()
		end
	end
end

----------------------------------------------------
-- START / STOP BOOST
----------------------------------------------------
function GameData:StartBoostv8()
	if self.BoostEnabledv8 then return end
	self.BoostEnabledv8 = true

	self:LowLightingv8()
	self:KillWaterv8()

	for _, obj in ipairs(workspace:GetDescendants()) do
		self:LowObjectv8(obj)
	end

	if self.Playerv8.Character then
		self:LowCharacterv8(self.Playerv8.Character)
	end

	self.Connectionsv8[#self.Connectionsv8+1] =
		workspace.DescendantAdded:Connect(function(obj)
			task.wait()
			GameData:LowObjectv8(obj)
		end)

	self.Connectionsv8[#self.Connectionsv8+1] =
		self.Playerv8.CharacterAdded:Connect(function(char)
			char:WaitForChild("Humanoid")
			task.wait(0.15)
			GameData:LowCharacterv8(char)
		end)

	self.Connectionsv8[#self.Connectionsv8+1] =
		self.Servicesv8.RunServicev8.Heartbeat:Connect(function()
			GameData:LowLightingv8()
			GameData:KillWaterv8()
		end)
end

function GameData:StopBoostv8()
	self.BoostEnabledv8 = false

	for _, c in ipairs(self.Connectionsv8) do
		pcall(function()
			c:Disconnect()
		end)
	end

	table.clear(self.Connectionsv8)
end

Sec.Player4:Toggle({
    Title = "Boost Fps",
    Flag = "BoostFps",
    Default = false,
    Callback = function(value)
        if value then
            GameData:StartBoostv8()
        else
            GameData:StopBoostv8()
        end
    end
})

GameData.Playerv25 = GameData.Playersv25.LocalPlayer

Sec.Player4:Button({
    Title = "Boost CPU",
    Locked = false,
    Callback = function()
        if GameData.BoostRunningv25 then return end
        GameData.BoostRunningv25 = true

        pcall(function()
            GameData.Lightingv25.GlobalShadows = false
            GameData.Lightingv25.FogEnd = 9e9
            GameData.Lightingv25.Brightness = 1
            GameData.Lightingv25.EnvironmentDiffuseScale = 0
            GameData.Lightingv25.EnvironmentSpecularScale = 0

            for _, v in pairs(GameData.Lightingv25:GetChildren()) do
                if v:IsA("PostEffect") then
                    v.Enabled = false
                end
            end
        end)

        for _, v in pairs(workspace:GetDescendants()) do
            if v:IsA("ParticleEmitter")
            or v:IsA("Trail")
            or v:IsA("Smoke")
            or v:IsA("Fire")
            or v:IsA("Sparkles") then
                v.Enabled = false
            elseif v:IsA("Decal") or v:IsA("Texture") then
                v.Transparency = 1
            elseif v:IsA("BasePart") then
                v.CastShadow = false
                v.Material = Enum.Material.Plastic
                v.Reflectance = 0
            end
        end

        if GameData.Playerv25.Character then
            for _, v in pairs(GameData.Playerv25.Character:GetChildren()) do
                if v:IsA("Accessory") or v:IsA("Hat") then
                    v:Destroy()
                end
            end

            local head = GameData.Playerv25.Character:FindFirstChild("Head")
            if head then
                head.Transparency = 1
                head.CanCollide = false

                local face = head:FindFirstChildWhichIsA("Decal")
                if face then
                    face:Destroy()
                end
            end
        end
    end
})

Sec.Player3 = Tabs.Player:Section({
    Title = "User Settings",
    Box = true,
    BoxBorder = true,
    Opened = true,
})

function GameData:GetHumanoid()
    return self.char:WaitForChild("Humanoid")
end

function GameData:ApplyWalkspeed()
    if self.hum then
        self.hum.WalkSpeed = self.WalkspeedEnabled and self.WalkspeedValue or 16
    end
end

function GameData:ApplyJumpPower()
    if self.hum then
        self.hum.UseJumpPower = true
        self.hum.JumpPower = self.JumpEnabled and self.JumpValue or 50
    end
end

function GameData:ApplyGravity()
    workspace.Gravity = self.GravityEnabled and self.GravityValue or 196.2
end

GameData.Player = game.Players.LocalPlayer
GameData.char = GameData.Player.Character or GameData.Player.CharacterAdded:Wait()
GameData.hum = GameData:GetHumanoid()

GameData.Player.CharacterAdded:Connect(function(char)
    GameData.char = char
    task.wait(0.3)
    GameData.hum = GameData:GetHumanoid()
    GameData:ApplyWalkspeed()
    GameData:ApplyJumpPower()
end)

Sec.Player3:Slider({
    Title = "Set Walkspeed",
    Desc = "Player Walkspeed",
    Flag = "WalkspeedValue",
    Step = 1,
    Value = {
        Min = 0,
        Max = 300,
        Default = GameData.WalkspeedValue,
    },
    Callback = function(value)
        GameData.WalkspeedValue = value
        GameData:ApplyWalkspeed()
    end
})

Sec.Player3:Toggle({
    Title = "Walkspeed",
    Desc = "Enable custom walkspeed",
    Flag = "WalkspeedToggle",
    Value = GameData.WalkspeedEnabled,
    Callback = function(state)
        GameData.WalkspeedEnabled = state
        GameData:ApplyWalkspeed()

        WindUI:Notify({
            Title = "Walkspeed",
            Content = state and ("Enabled (" .. GameData.WalkspeedValue .. ")") or "Disabled",
            Duration = 3,
            Icon = "zap"
        })
    end
})

Sec.Player3:Slider({
    Title = "Set Jump Power",
    Desc = "Player Jump Power",
    Flag = "JumpPowerValue",
    Step = 1,
    Value = {
        Min = 0,
        Max = 300,
        Default = GameData.JumpValue,
    },
    Callback = function(value)
        GameData.JumpValue = value
        GameData:ApplyJumpPower()
    end
})

Sec.Player3:Toggle({
    Title = "Jump Power",
    Desc = "Enable custom jump power",
    Flag = "JumpPowerToggle",
    Value = GameData.JumpEnabled,
    Callback = function(state)
        GameData.JumpEnabled = state
        GameData:ApplyJumpPower()

        WindUI:Notify({
            Title = "Jump Power",
            Content = state and ("Enabled (" .. GameData.JumpValue .. ")") or "Disabled",
            Duration = 3,
            Icon = "arrow-up"
        })
    end
})

Sec.Player3:Slider({
    Title = "Set Gravity",
    Desc = "Workspace Gravity",
    Flag = "GravityValue",
    Step = 1,
    Value = {
        Min = 0,
        Max = 400,
        Default = GameData.GravityValue,
    },
    Callback = function(value)
        GameData.GravityValue = value
        GameData:ApplyGravity()
    end
})

Sec.Player3:Toggle({
    Title = "Gravity Controller",
    Desc = "Enable custom gravity",
    Flag = "GravityToggle",
    Value = GameData.GravityEnabled,
    Callback = function(state)
        GameData.GravityEnabled = state
        GameData:ApplyGravity()

        WindUI:Notify({
            Title = "Gravity",
            Content = state and ("Enabled (" .. GameData.GravityValue .. ")") or "Disabled",
            Duration = 3,
            Icon = "globe"
        })
    end
})


Sec.Config1 = Tabs.Config:Section({
    Title = "Save Config",
    Box = true,
    BoxBorder = true,
    Opened = true,
})

local ConfigNameInput = Sec.Config1:Input({
    Title = "Config Name",
    Icon = "file-cog",
    Callback = function(value)
        ConfigName = value
    end
})

Sec.Config1:Space()

local AllConfigs = ConfigManager:AllConfigs()
local DefaultValue = table.find(AllConfigs, ConfigName) and ConfigName or nil

local AllConfigsDropdown = Sec.Config1:Dropdown({
    Title = "All Configs",
    Desc = "Select existing configs",
    Values = AllConfigs,
    Value = DefaultValue,
    Callback = function(value)
        ConfigName = value
        ConfigNameInput:Set(value)

        -- Jika AutoLoadToggle diaktifkan
        -- AutoLoadToggle:Set(ConfigManager:GetConfig(ConfigName).AutoLoad or false)
    end
})

Sec.Config1:Space()

Sec.Config1:Button({
    Title = "Save Config",
    Icon = "",
    Justify = "Center",
    Callback = function()
        Window.CurrentConfig = ConfigManager:Config(ConfigName)
        if Window.CurrentConfig:Save() then
            WindUI:Notify({
                Title = "Config Saved",
                Desc = "Config '" .. ConfigName .. "' saved",
                Icon = "check",
            })
        end

        AllConfigsDropdown:Refresh(ConfigManager:AllConfigs())
    end
})

Sec.Config1:Space()

Sec.Config1:Button({
    Title = "Load Config",
    Icon = "",
    Justify = "Center",
    Callback = function()
        Window.CurrentConfig = ConfigManager:CreateConfig(ConfigName)
        if Window.CurrentConfig:Load() then
            WindUI:Notify({
                Title = "Config Loaded",
                Desc = "Config '" .. ConfigName .. "' loaded",
                Icon = "refresh-cw",
            })
        end
    end
})

Sec.Config1:Space()

Sec.Config1:Button({
    Title = "Print AutoLoad Configs",
    Icon = "",
    Justify = "Center",
    Callback = function()
        print(HttpService:JSONDecode(ConfigManager:GetAutoLoadConfigs()))
    end
})

local function AutoLoadConfig()
    if not AutoFeatureEnabled then return end
    Window.CurrentConfig = ConfigManager:CreateConfig(AutoConfigName)
    if not Window.CurrentConfig:Load() then
        Window.CurrentConfig:Save()
    end
end

local function AutoSaveConfig()
    if not AutoFeatureEnabled then return end
    if Window.CurrentConfig then
        Window.CurrentConfig:Save()
    end
end

Sec.Config1:Toggle({
    Title = "Auto Save & Load",
    Flag = "AutoSaveLoad",
    Desc = "Automatically save and load config",
    Value = false, -- DEFAULT OFF
    Callback = function(state)
        AutoFeatureEnabled = state

        if state then
            AutoLoadConfig() -- load saat ON
        end

        -- save config setiap toggle berubah
        if Window.CurrentConfig then
            Window.CurrentConfig:Save()
        end
    end
})

Sec.Config1:Button({
    Title = "Delete Config",
    Locked = false,
    Callback = function()
        ConfigManager:DeleteConfig(AutoConfigName)
        if Window.CurrentConfig then
            Window.CurrentConfig = nil
        end
    end
})

spawn(function()
    while true do
        task.wait(5)
        AutoSaveConfig()
    end
end)

Sec.Config2 = Tabs.Config:Section({
    Title = "Bug Reporter",
    Box = true,
    BoxBorder = true,
    Opened = true,
})

-- BUG REPORT INPUT
Sec.Config2:Input({
    Title = "Report Bug",
    Flag = "ReportBugInput",
    Desc = "Explain the bug clearly...",
    Placeholder = "Explain the bug clearly...",
    Callback = function(input)
        GameData.BugReportTextv5 = input
    end
})

-- SUBMIT BUG REPORT BUTTON
Sec.Config2:Button({
    Title = "Submit Bug Report",
    Callback = function()
        if GameData.Blockedv5 then
            GameData:ShakeCamerav5()
            return
        end

        if os.time() - GameData.LastSubmitv5 < GameData.CooldownTimev5 then
            GameData:ShakeCamerav5()
            return
        end

        if not GameData.BugReportTextv5
            or GameData.BugReportTextv5 == ""
            or GameData:ContainsBadWordv5(GameData.BugReportTextv5)
        then
            GameData.Strikesv5 += 1
            GameData:ShakeCamerav5()
        end

        if GameData.Strikesv5 >= GameData.StrikeLimitv5 then
            GameData.Blockedv5 = true
            return
        end

        GameData.LastSubmitv5 = os.time()

        local executor = identifyexecutor and identifyexecutor() or "Unknown"
        local timeNow = os.date("%Y-%m-%d %H:%M:%S")

        local payload = {
            username = "Nexa Bug Reporter",
            embeds = {{
                title = "🐞 New Bug Report",
                color = 3447003,
                fields = {
                    { name = "👤 Player", value = GameData.Playerv5.Name .. " (`" .. GameData.Playerv5.UserId .. "`)" },
                    { name = "📝 Bug Description", value = "```" .. GameData.BugReportTextv5 .. "```" },
                    { name = "🎮 Game Info", value = "PlaceId: " .. game.PlaceId .. "\nJobId: " .. game.JobId },
                    { name = "🛠 Executor", value = executor, inline = true },
                    { name = "⏰ Time", value = timeNow, inline = true },
                },
                footer = { text = "Nexa • Bug Report System" }
            }}
        }

        if GameData.Requestv5 then
            GameData.Requestv5({
                Url = GameData.DiscordWebhookv5,
                Method = "POST",
                Headers = { ["Content-Type"] = "application/json" },
                Body = GameData.Servicesv5.HttpServicev5:JSONEncode(payload)
            })
        end

        GameData.BugReportTextv5 = ""
    end
})

Sec.Config3 = Tabs.Config:Section({
    Title = "Server Joiner",
    Box = true,
    BoxBorder = true,
    Opened = true,
})

GameData.JobIdParagraph = Sec.Config3:Paragraph({
    Title = "Current Job ID",
    Desc = game.JobId,
    Flag = "JobIdParagraph"
})

Sec.Config3:Button({
    Title = "Rejoin Server",
    Callback = function()
        GameData.TeleportService:TeleportToPlaceInstance(
            GameData.PlaceId,
            game.JobId,
            GameData.LocalPlayer
        )
    end
})

Sec.Config3:Button({
    Title = "Server Hop",
    Callback = function()
        local success, response = pcall(function()
            return game:HttpGet(
                ("https://games.roblox.com/v1/games/%d/servers/Public?sortOrder=Asc&limit=100")
                :format(GameData.PlaceId)
            )
        end)

        if not success then return end

        local servers = GameData.HttpService:JSONDecode(response)

        for _, server in ipairs(servers.data or {}) do
            if server.playing < server.maxPlayers and server.id ~= game.JobId then
                GameData.TeleportService:TeleportToPlaceInstance(
                    GameData.PlaceId,
                    server.id,
                    GameData.LocalPlayer
                )
                return
            end
        end
    end
})

Sec.Config3:Button({
    Title = "Copy Job ID",
    Callback = function()
        setclipboard(game.JobId)
    end
})

Sec.Config3:Input({
    Title = "Enter Job ID",
    Desc = "Paste JobId here",
    Placeholder = "JobId...",
    Flag = "InputJobId",
    Callback = function(text)
        GameData.TargetJobId = text or ""
    end
})

Sec.Config3:Button({
    Title = "Teleport to Job ID",
    Flag = "TeleportJobId",
    Callback = function()
        if GameData.TargetJobId ~= "" then
            GameData.TeleportService:TeleportToPlaceInstance(
                GameData.PlaceId,
                GameData.TargetJobId,
                GameData.LocalPlayer
            )
        end
    end
})

GameData.ScreenGui = Instance.new("ScreenGui")
GameData.ScreenGui.Name = "NexaUIToggle"
GameData.ScreenGui.IgnoreGuiInset = true
GameData.ScreenGui.ResetOnSpawn = false
GameData.ScreenGui.Parent = GameData.CoreGui

GameData.ToggleFrame = Instance.new("Frame")
GameData.ToggleFrame.Parent = GameData.ScreenGui
GameData.ToggleFrame.Size = UDim2.new(0, 50, 0, 50)
GameData.ToggleFrame.Position = UDim2.new(0, 110, 0, 95)
GameData.ToggleFrame.BackgroundColor3 = Color3.fromRGB(20, 80, 200)
GameData.ToggleFrame.BorderSizePixel = 0
GameData.ToggleFrame.Active = true
GameData.ToggleFrame.Selectable = true

GameData.Corner = Instance.new("UICorner")
GameData.Corner.CornerRadius = UDim.new(0, 14)
GameData.Corner.Parent = GameData.ToggleFrame

GameData.Gradient = Instance.new("UIGradient")
GameData.Gradient.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, Color3.fromRGB(36, 112, 255)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(0, 42, 130)),
})
GameData.Gradient.Rotation = 45
GameData.Gradient.Parent = GameData.ToggleFrame

GameData.Glow = Instance.new("ImageLabel")
GameData.Glow.Parent = GameData.ToggleFrame
GameData.Glow.Size = UDim2.new(1.7, 0, 1.7, 0)
GameData.Glow.Position = UDim2.new(0.5, 0, 0.5, 0)
GameData.Glow.AnchorPoint = Vector2.new(0.5, 0.5)
GameData.Glow.BackgroundTransparency = 1
GameData.Glow.Image = "rbxassetid://12171505282"
GameData.Glow.ImageColor3 = Color3.fromRGB(0, 153, 255)
GameData.Glow.ImageTransparency = 0.35

GameData.Stroke = Instance.new("UIStroke")
GameData.Stroke.Parent = GameData.ToggleFrame
GameData.Stroke.Thickness = 2
GameData.Stroke.Color = Color3.fromRGB(140, 200, 255)
GameData.Stroke.Transparency = 0.25

-------------------------------------------------------------
-- BUTTON
-------------------------------------------------------------
GameData.ToggleBtn = Instance.new("ImageButton")
GameData.ToggleBtn.Parent = GameData.ToggleFrame
GameData.ToggleBtn.Size = UDim2.new(0, 40, 0, 40)
GameData.ToggleBtn.Position = UDim2.new(0.5, -20, 0.5, -20)
GameData.ToggleBtn.BackgroundTransparency = 1
GameData.ToggleBtn.Image = "rbxassetid://123906607434048"
GameData.ToggleBtn.AutoButtonColor = false
GameData.ToggleBtn.Active = true
GameData.ToggleBtn.Selectable = true

-------------------------------------------------------------
-- DRAG SYSTEM UNTUK SEMUA DEVICE (FRAME + BUTTON)
-------------------------------------------------------------
local dragInput
local dragStart
local startPos
local isDragging = false

local function updatePosition(input)
    if not dragStart or not startPos then return end
    local delta = input.Position - dragStart
    GameData.ToggleFrame.Position = UDim2.new(
        startPos.X.Scale,
        startPos.X.Offset + delta.X,
        startPos.Y.Scale,
        startPos.Y.Offset + delta.Y
    )
end

local function startDrag(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1
    or input.UserInputType == Enum.UserInputType.Touch then
        GameData.Dragging = true
        isDragging = true
        dragStart = input.Position
        startPos = GameData.ToggleFrame.Position
        dragInput = input
        
        input:Capture()
    end
end

local function endDrag(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1
    or input.UserInputType == Enum.UserInputType.Touch then
        GameData.Dragging = false
        isDragging = false
        dragInput = nil
        dragStart = nil
        startPos = nil
    end
end

GameData.ToggleFrame.InputBegan:Connect(startDrag)
GameData.ToggleFrame.InputEnded:Connect(endDrag)

GameData.ToggleBtn.InputBegan:Connect(startDrag)
GameData.ToggleBtn.InputEnded:Connect(endDrag)

GameData.UIS.InputChanged:Connect(function(input)
    if isDragging and (input.UserInputType == Enum.UserInputType.MouseMovement 
        or input.UserInputType == Enum.UserInputType.Touch) then
        updatePosition(input)
    end
end)

GameData.UIS.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1
    or input.UserInputType == Enum.UserInputType.Touch then
        GameData.Dragging = false
        isDragging = false
        dragInput = nil
        dragStart = nil
        startPos = nil
    end
end)

-------------------------------------------------------------
-- BUTTON CLICK → TOGGLE WINDOW (TANPA CLICK DELAY)
-------------------------------------------------------------
local clickDebounce = false

GameData.ToggleBtn.MouseButton1Click:Connect(function()
    if isDragging or GameData.Dragging then return end
    
    if clickDebounce then return end
    clickDebounce = true
    
    -- Animasi klik tanpa delay
    GameData.TweenService:Create(GameData.ToggleBtn, TweenInfo.new(0.08), {
        Size = UDim2.new(0, 35, 0, 35)
    }):Play()

    task.wait(0.08)

    GameData.TweenService:Create(GameData.ToggleBtn, TweenInfo.new(0.12), {
        Size = UDim2.new(0, 40, 0, 40)
    }):Play()

    -- Langsung toggle window tanpa delay tambahan
    if Window and Window.Toggle then
        Window:Toggle()
    end
    
    -- Reset debounce tanpa delay
    clickDebounce = false
end)

GameData.ToggleBtn.TouchTap:Connect(function()
    if isDragging or GameData.Dragging then return end
    
    if clickDebounce then return end
    clickDebounce = true
    
    -- Animasi klik tanpa delay
    GameData.TweenService:Create(GameData.ToggleBtn, TweenInfo.new(0.08), {
        Size = UDim2.new(0, 35, 0, 35)
    }):Play()

    task.wait(0.08)

    GameData.TweenService:Create(GameData.ToggleBtn, TweenInfo.new(0.12), {
        Size = UDim2.new(0, 40, 0, 40)
    }):Play()

    -- Langsung toggle window tanpa delay tambahan
    if Window and Window.Toggle then
        Window:Toggle()
    end
    
    -- Reset debounce tanpa delay
    clickDebounce = false
end)

if Window then
    Window:OnOpen(function()
        -- Handler window terbuka
    end)

    Window:OnClose(function()
        -- Handler window tertutup
    end)

    Window:OnDestroy(function()
        if GameData.ScreenGui then
            GameData.ScreenGui:Destroy()
            GameData.ScreenGui = nil
        end
    end)
end

	--================ Wind Ui Title Gradiant ===============

GameData.GetTitleFuncv14 = function()
    GameData.RootUIv14 = nil
    GameData.WindUIv14 = nil

    for _, v in ipairs(GameData.CoreGuiv14:GetChildren()) do
        if v:IsA("ScreenGui") or v:IsA("Folder") then
            local wind = v:FindFirstChild("WindUI", true)
            if wind then
                GameData.RootUIv14 = v
                GameData.WindUIv14 = wind
                break
            end
        end
    end

    if not GameData.WindUIv14 then
        return nil, "WindUI tidak ditemukan"
    end

    local Path =
        GameData.WindUIv14
        :FindFirstChild("Window")
        and GameData.WindUIv14.Window:FindFirstChild("Frame")
        and GameData.WindUIv14.Window.Frame:FindFirstChild("Main")
        and GameData.WindUIv14.Window.Frame.Main:FindFirstChild("Topbar")
        and GameData.WindUIv14.Window.Frame.Main.Topbar:FindFirstChild("Left")
        and GameData.WindUIv14.Window.Frame.Main.Topbar.Left:FindFirstChild("Title")
        and GameData.WindUIv14.Window.Frame.Main.Topbar.Left.Title:FindFirstChild("Title")

    if not Path then
        return nil, "TextLabel Title tidak ditemukan"
    end

    return Path
end

--// APPLY GRADIENT
local function ApplyGradient()
    GameData.Titlev14, GameData.Errv14 = GameData.GetTitleFuncv14()
    if not GameData.Titlev14 then
        return
    end

    if GameData.Titlev14:FindFirstChild("GradientTitlev14") then
        return
    end

    GameData.UIGradientv14 = Instance.new("UIGradient")
    GameData.UIGradientv14.Name = "GradientTitlev14"
    GameData.UIGradientv14.Color = ColorSequence.new({
        ColorSequenceKeypoint.new(0, Color3.new(0, 0.0901961, 0.592157)),
        ColorSequenceKeypoint.new(0.5, Color3.new(0, 0.6, 1)),
        ColorSequenceKeypoint.new(1, Color3.new(0.0431373, 0.584314, 1))
    })
    GameData.UIGradientv14.Rotation = 0
    GameData.UIGradientv14.Parent = GameData.Titlev14
end

--// ROTATION LOOP
GameData.RunServicev14.RenderStepped:Connect(function(dt)
    if GameData.UIGradientv14 and GameData.UIGradientv14.Parent then
        GameData.UIGradientv14.Rotation =
            (GameData.UIGradientv14.Rotation + GameData.GradientSpeedv14 * dt) % 360
    end
end)

--// CHECK LOOP EVERY 5 SECONDS
task.spawn(function()
    while true do
        task.wait(5)
        ApplyGradient()
    end
end)
