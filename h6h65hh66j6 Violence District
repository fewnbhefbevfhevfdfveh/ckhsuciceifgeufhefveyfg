local map = workspace:WaitForChild("Map")

-- Fungsi rename generator
local function renameGenerators()
	local count = 0
	for _, obj in ipairs(map:GetChildren()) do
		if obj:IsA("Model") and string.find(obj.Name, "Generator") then
			count += 1
			obj.Name = "Generator " .. count
		end
	end
end

-- Jalankan saat pertama kali
renameGenerators()

-- Kalau ada model Generator baru ditambahkan ke Map
map.ChildAdded:Connect(function(child)
	task.wait(0.5)
	if child:IsA("Model") and string.find(child.Name, "Generator") then
		renameGenerators()
	end
end)

local map = workspace:WaitForChild("Map")

-- Fungsi rename hook
local function renameHooks()
	local count = 0
	for _, obj in ipairs(map:GetChildren()) do
		if obj:IsA("Model") and string.find(obj.Name, "Hook") then
			count += 1
			obj.Name = "Hook " .. count
		end
	end
end

-- Jalankan saat pertama kali
renameHooks()

-- Kalau ada model Hook baru ditambahkan ke Map
map.ChildAdded:Connect(function(child)
	task.wait(0.5)
	if child:IsA("Model") and string.find(child.Name, "Hook") then
		renameHooks()
	end
end)


local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()

-- Ambil nama player
local player = game.Players.LocalPlayer
local playerName = player.Name
local playerDisplayName = player.DisplayName

-- Buat Window
local Window = WindUI:CreateWindow({
    Title = "Nexa - Premium",
    Icon = "rbxassetid://131269662643486",
    Author = "Violence District Script | @ Han",
    Folder = "Hanzo",
    Size = UDim2.fromOffset(650, 510),

    Theme = "Plant",
    Transparent = true,
    Acrylic = false,
    HidePanelBackground = true,
    HideSearchBar = false,
    NewElements = true,
    SideBarWidth = 200,

    -- Profil user di pojok kanan atas
    User = {
        Enabled = true,
        Anonymous = false,
        Name = playerDisplayName,
        UserName = "@" .. playerName,
        Callback = function()
            WindUI:Notify({
                Title = "User Profile",
                Content = "User profile clicked!",
                Duration = 3
            })
        end
    }
})

Window:Tag({
    Title = "v1.2.9",
    Color = Color3.fromHex("#30ff6a")
})


Window:EditOpenButton({
    Enabled = false
})

local Tabs = {
    Home = Window:Tab({ Title = "Home", Icon = "house"  }),
    Main = Window:Tab({ Title = "Main", Icon = "swords"  }),
    Visual = Window:Tab({ Title = "Visual", Icon = "eye"  }),
}

Tabs.Home:Section({ Title = "Update", Icon = "logs" })

Tabs.Home:Section({
        Title = "Here's what's new:",
        TextSize = 24,
        FontWeight = Enum.FontWeight.SemiBold,
    })

Tabs.Home:Section({
        Title = [[

		]],
        TextSize = 18,
        TextTransparency = .35,
        FontWeight = Enum.FontWeight.Medium,
    })

Tabs.Home:Section({ Title = "Server" })

Tabs.Home:Paragraph({
    Title = "Nexa Hub",
    Image = "https://i.imgur.com/vl0g8IK.png",
    ImageSize = 42, -- default 30
    Thumbnail = "https://i.imgur.com/3m8FV2y.jpeg",
    ThumbnailSize = 120 -- Thumbnail height
})

Tabs.Home:Paragraph({
    Title = "Discord - Nexa | COMMUNITY",
    Desc = "Indonesia ðŸ‡®ðŸ‡©",
    Image = "https://images-eds-ssl.xboxlive.com/image?url=4rt9.lXDC4H_93laV1_eHHFT949fUipzkiFOBH3fAiZZUCdYojwUyX2aTonS1aIwMrx6NUIsHfUHSLzjGJFxxsG72wAo9EWJR4yQWyJJaDaK1XdUso6cUMpI9hAdPUU_FNs11cY1X284vsHrnWtRw7oqRpN1m9YAg21d_aNKnIo-&format=source",
    ImageSize = 40,
    Color = "Grey",
    Buttons = {
        {
            Title = "Copy Link",
            Icon = "copy",
            Variant = "Tertiary",
            Callback = function()
                setclipboard("discord.gg/ECxQFc97F5")
                WindUI:Notify({
                    Title = "Copied!",
                    Content = "Discord link copied to clipboard",
                    Duration = 2
                })
            end
        }
    }
})

Tabs.Main:Section({ Title = "Main" })

-- ========= Speed Lock (WindUI Version) =========
local speedCurrent, speedHumanoid = 16, nil
local speedEnforced, speedPaused = false, false
local speedStunUntil, speedSlowUntil = 0, 0
local speedTickConn = nil
local speedLastTick, speedTickInterval = 0, 0.12

local function setWalkSpeed(h, v)
    if h and h.Parent then
        pcall(function() h.WalkSpeed = v end)
    end
end

local function canEnforce()
    local h = speedHumanoid
    if not speedEnforced then return false end
    if not h or not h.Parent then return false end
    if speedPaused then return false end
    if os.clock() < speedStunUntil or os.clock() < speedSlowUntil then return false end
    if h.Health <= 0 then return false end
    if h.PlatformStand or h.Sit then return false end
    local st = h:GetState()
    if st == Enum.HumanoidStateType.Ragdoll or st == Enum.HumanoidStateType.FallingDown or st == Enum.HumanoidStateType.Physics or st == Enum.HumanoidStateType.GettingUp or st == Enum.HumanoidStateType.Seated then return false end
    local hrp = h.Parent:FindFirstChild("HumanoidRootPart")
    if hrp and hrp.Anchored then return false end
    return true
end

local function heartbeat()
    if not speedHumanoid then return end
    local t = os.clock()
    if t - speedLastTick < speedTickInterval then return end
    speedLastTick = t
    if not canEnforce() then return end
    if speedHumanoid.WalkSpeed ~= speedCurrent then
        setWalkSpeed(speedHumanoid, speedCurrent)
    end
end

local function disconnectAll()
    if speedTickConn then
        speedTickConn:Disconnect()
        speedTickConn = nil
    end
end

local function bindHumanoid(h)
    speedHumanoid = h
    if speedTickConn then speedTickConn:Disconnect() end
    speedTickConn = game:GetService("RunService").Heartbeat:Connect(heartbeat)
end

-- Bind ke Humanoid saat script dijalankan
local player = game.Players.LocalPlayer
if player.Character then
    bindHumanoid(player.Character:FindFirstChildOfClass("Humanoid"))
end
player.CharacterAdded:Connect(function(char)
    bindHumanoid(char:WaitForChild("Humanoid"))
end)

-- ========= WindUI Integration =========
Tabs.Main:Toggle({
    Title = "Enabled Speed",
    Value = false,
    Callback = function(state)
        speedEnforced = state
        local h = speedHumanoid
        if not h or not h.Parent then return end
        if state then
            if not speedTickConn then
                speedTickConn = game:GetService("RunService").Heartbeat:Connect(heartbeat)
            end
            if canEnforce() then setWalkSpeed(h, speedCurrent) end
        else
            disconnectAll()
            setWalkSpeed(h, 16) -- Reset ke default
        end
    end
})

Tabs.Main:Slider({ 
    Title = "Speed Set", 
    Step = 1, 
    Value = {
        Min = 16, 
        Max = 200, 
        Default = 16, 
    },
    Callback = function(value)
        speedCurrent = value
        if speedEnforced and canEnforce() then
            setWalkSpeed(speedHumanoid, speedCurrent)
        end
    end
})


Tabs.Main:Button({
    Title = "Reset Speed",
    Callback = function()
        speedCurrent = 16
        if speedHumanoid and speedHumanoid.Parent then
            if speedEnforced and canEnforce() then
                setWalkSpeed(speedHumanoid, speedCurrent)
            else
                setWalkSpeed(speedHumanoid, 16)
            end
        end
    end
})


-- Services
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- Remote
local PlayerActionEvent = ReplicatedStorage.Remotes.Game.PlayerActionEvent -- RemoteEvent 

-- Variabel untuk toggle
local autoRepair = false

-- Toggle di WindUI
Tabs.Main:Toggle({ 
    Title = "Auto Repaired Generator", 
    Value = false,
    Callback = function(state)
        autoRepair = state
        if state then
        else
        end
    end
})

-- Loop untuk firesignal
spawn(function()
    while true do
        if autoRepair then
            firesignal(PlayerActionEvent.OnClientEvent, "Repaired Generator", 2)
        end
        task.wait(0.1) -- delay 1 detik
    end
end)


local ReplicatedStorage = game:GetService("ReplicatedStorage")
local PlayerActionEvent = ReplicatedStorage.Remotes.Game.PlayerActionEvent -- RemoteEvent

-- Variabel kontrol
local GeneratorV2 = false

-- Toggle WindUI
Tabs.Main:Toggle({
    Title = "Generator v2",
    Value = false,
    Callback = function(state)
        GeneratorV2 = state

        task.spawn(function()
            while GeneratorV2 do
                firesignal(PlayerActionEvent.OnClientEvent, "Got Chased", 2)
                task.wait(0.1)
            end
        end)
    end
})


-- Services
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- Remote
local Phonk1 = ReplicatedStorage.Remotes.Pallet.Jason["Destroy-Global"] -- RemoteEvent 

-- Variabel kontrol
local autoDestroy = false

-- Toggle GUI
Tabs.Main:Toggle({
    Title = "Auto Destroy Global",
    Value = false,
    Callback = function(state)
        autoDestroy = state

        if state then
            task.spawn(function()
                while autoDestroy do
                    Phonk1:FireServer(PalletPointSlide)
                    task.wait(0.1) -- ubah ke 0.001 kalau mau super cepat
                end
            end)
        end
    end
})


-- Services
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- Remote
local BasicAttack = ReplicatedStorage.Remotes.Attacks.BasicAttack -- RemoteEvent 

-- Variabel kontrol
local autoAttack = false

-- Toggle GUI
Tabs.Main:Toggle({
    Title = "Auto Basic Attack",
    Value = false,
    Callback = function(state)
        autoAttack = state

        if state then
            -- Loop otomatis
            task.spawn(function()
                while autoAttack do
                    BasicAttack:FireServer()
                    task.wait(0.1) -- ganti 0.001 kalau mau super cepat
                end
            end)
        end
    end
})

-- Services
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- Remote
local hit = ReplicatedStorage.Remotes.Attacks.hit -- RemoteEvent 

-- Variabel kontrol
local autoHit = false

-- Toggle GUI
Tabs.Main:Toggle({
    Title = "Auto Hit",
    Value = false,
    Callback = function(state)
        autoHit = state

        if state then
            -- Jalankan loop di thread terpisah
            task.spawn(function()
                while autoHit do
                    firesignal(hit.OnClientEvent)
                    task.wait(0.1) -- ubah ke 0.001 kalau mau lebih cepat
                end
            end)
        end
    end
})


-- Services
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- Remote
local HookEvent = ReplicatedStorage.Remotes.Carry.HookEvent -- RemoteEvent 

-- Variabel kontrol
local autoHook = false

-- Toggle GUI
Tabs.Main:Toggle({
    Title = "Auto Hook",
    Value = false,
    Callback = function(state)
        autoHook = state

        if state then
            task.spawn(function()
                -- Tunggu sampai Map, Hook, dan HookPoint benar-benar muncul
                local Map = workspace:WaitForChild("Map")
                local HookFolder = Map:WaitForChild("Hook")
                local HookPoint = HookFolder:WaitForChild("HookPoint")

                -- Loop otomatis
                while autoHook do
                    firesignal(HookEvent.OnClientEvent, HookPoint)
                    task.wait(0.1) -- ubah ke 0.001 kalau mau super cepat
                end
            end)
        end
    end
})


Tabs.Visual:Section({ Title = "View" })

--// Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

--// Variables
local ESPEnabled = false
local NotifyEnabled = true
local NotifyDistance = 150
local ESPFolder = {}
local NotifiedEnemies = {}

--// Buat ESP karakter (Hanya untuk Model dengan Humanoid)
local function CreateESP(player)
	if player == LocalPlayer then return end
	if ESPFolder[player] then return end
	if not player.Character then return end

	local character = player.Character
	local humanoid = character:FindFirstChildOfClass("Humanoid")
	local root = character:FindFirstChild("HumanoidRootPart")

	if not humanoid or not root then return end

	local esp = {}

	-- Highlight untuk karakter saja
	local highlight = Instance.new("Highlight")
	highlight.Name = "ESPHighlight"
	highlight.Adornee = character
	highlight.FillTransparency = 0.6
	highlight.OutlineTransparency = 0
	highlight.Parent = character

	-- Billboard untuk nama + jarak
	local billboard = Instance.new("BillboardGui")
	billboard.Adornee = root
	billboard.Size = UDim2.new(0, 100, 0, 30)
	billboard.StudsOffset = Vector3.new(0, 3, 0)
	billboard.AlwaysOnTop = true
	billboard.Parent = PlayerGui

	local textLabel = Instance.new("TextLabel")
	textLabel.Size = UDim2.fromScale(1, 1)
	textLabel.BackgroundTransparency = 1
	textLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
	textLabel.TextStrokeTransparency = 0
	textLabel.Font = Enum.Font.SourceSansBold
	textLabel.TextScaled = false
	textLabel.TextSize = 14
	textLabel.Text = player.Name
	textLabel.Parent = billboard

	esp.Highlight = highlight
	esp.Billboard = billboard
	esp.TextLabel = textLabel
	ESPFolder[player] = esp
end

--// Hapus ESP
local function RemoveESP(player)
	local esp = ESPFolder[player]
	if esp then
		if esp.Highlight then esp.Highlight:Destroy() end
		if esp.Billboard then esp.Billboard:Destroy() end
		ESPFolder[player] = nil
	end
	NotifiedEnemies[player] = nil
end

--// Loop utama
RunService.RenderStepped:Connect(function()
	if not ESPEnabled then
		for _, esp in pairs(ESPFolder) do
			if esp.Highlight then esp.Highlight.Enabled = false end
			if esp.Billboard then esp.Billboard.Enabled = false end
		end
		return
	end

	for _, player in pairs(Players:GetPlayers()) do
		if player ~= LocalPlayer and player.Character then
			local char = player.Character
			local root = char:FindFirstChild("HumanoidRootPart")
			local humanoid = char:FindFirstChildOfClass("Humanoid")

			if root and humanoid and humanoid.Health > 0 then
				local distance = (root.Position - LocalPlayer.Character.HumanoidRootPart.Position).Magnitude
				local color = Color3.fromRGB(255, 255, 255)

				if player.Team and LocalPlayer.Team then
					if player.Team == LocalPlayer.Team then
						color = Color3.fromRGB(0, 255, 0)
					else
						color = Color3.fromRGB(255, 0, 0)
					end
				end

				local esp = ESPFolder[player]
				if esp then
					-- Highlight
					if esp.Highlight then
						esp.Highlight.Enabled = true
						esp.Highlight.FillColor = color
						esp.Highlight.OutlineColor = color
					end

					-- Billboard
					if esp.Billboard and esp.TextLabel then
						esp.Billboard.Enabled = true
						local scale = math.clamp(200 / distance, 0.5, 1)
						esp.TextLabel.Text = player.Name .. " | " .. math.floor(distance) .. " Stud"
						esp.TextLabel.TextSize = 14 * scale
						esp.TextLabel.TextColor3 = color
					end
				end

				-- Notifikasi musuh dekat
				if NotifyEnabled and player.Team ~= LocalPlayer.Team and distance <= NotifyDistance then
					if not NotifiedEnemies[player] then
						NotifiedEnemies[player] = true
						task.spawn(function()
							WindUI:Notify({
								Title = "âš ï¸ Musuh Dekat!",
								Content = player.Name .. " dalam jarak " .. math.floor(distance) .. " stud!",
								Icon = "slice",
								Duration = 1,
							})
							task.wait(10)
							NotifiedEnemies[player] = nil
						end)
					end
				end
			else
				RemoveESP(player)
			end
		end
	end
end)

--// Player join/leave
Players.PlayerAdded:Connect(CreateESP)
Players.PlayerRemoving:Connect(RemoveESP)
for _, p in pairs(Players:GetPlayers()) do
	CreateESP(p)
end

--// === UI TOGGLES ===

Tabs.Visual:Toggle({
	Title = "ESP (Team & Killer)",
	Value = false,
	Callback = function(state)
		ESPEnabled = state
	end
})

Tabs.Visual:Toggle({
	Title = "Notify Killer Nearby",
	Value = true,
	Callback = function(state)
		NotifyEnabled = state
	end
})

--// === GENERATOR VIEW ===
Tabs.Visual:Toggle({
	Title = "View Generator",
	Default = false,
	Callback = function(state)
		local map = workspace:FindFirstChild("Map")
		if not map then return end

		if getgenv().ViewGeneratorLoop then
			getgenv().ViewGeneratorLoop = nil
		end

		if state then
			getgenv().ViewGeneratorLoop = true
			task.spawn(function()
				while getgenv().ViewGeneratorLoop do
					for _, generator in pairs(map:GetChildren()) do
						if generator:IsA("Model") and string.find(generator.Name, "Generator") then
							local point1 = generator:FindFirstChild("GeneratorPoint1")
							local point2 = generator:FindFirstChild("GeneratorPoint2")
							local point3 = generator:FindFirstChild("GeneratorPoint3")
							local isOff = (point1 or point2 or point3) ~= nil
							local color = isOff and Color3.fromRGB(255, 0, 0) or Color3.fromRGB(0, 255, 0)

							local highlight = generator:FindFirstChild("GeneratorHighlight")
							if not highlight then
								highlight = Instance.new("Highlight")
								highlight.Name = "GeneratorHighlight"
								highlight.Adornee = generator
								highlight.Parent = generator
							end

							highlight.FillColor = color
							highlight.OutlineColor = Color3.fromRGB(0, 0, 0)
							highlight.FillTransparency = 0.5
						end
					end
					task.wait(1)
				end
			end)
		else
			getgenv().ViewGeneratorLoop = nil
			for _, generator in pairs(map:GetChildren()) do
				if generator:IsA("Model") and string.find(generator.Name, "Generator") then
					local highlight = generator:FindFirstChild("GeneratorHighlight")
					if highlight then highlight:Destroy() end
				end
			end
		end
	end
})

--// === HOOK VIEW ===
Tabs.Visual:Toggle({
	Title = "View Hook",
	Default = false,
	Callback = function(state)
		local map = workspace:FindFirstChild("Map")
		local hookFolder = map and map:FindFirstChild("Hook")
		if not hookFolder then return end

		if getgenv().ViewHookLoop then
			getgenv().ViewHookLoop = nil
		end

		if state then
			getgenv().ViewHookLoop = true
			task.spawn(function()
				while getgenv().ViewHookLoop do
					for _, hook in pairs(hookFolder:GetChildren()) do
						if hook:IsA("Model") then
							local highlight = hook:FindFirstChild("HookHighlight")
							if not highlight then
								highlight = Instance.new("Highlight")
								highlight.Name = "HookHighlight"
								highlight.Adornee = hook
								highlight.Parent = hook
							end
							highlight.FillColor = Color3.fromRGB(0, 255, 0)
							highlight.OutlineColor = Color3.fromRGB(0, 0, 0)
							highlight.FillTransparency = 0.5
						end
					end
					task.wait(1)
				end
			end)
		else
			getgenv().ViewHookLoop = nil
			for _, hook in pairs(hookFolder:GetChildren()) do
				if hook:IsA("Model") then
					local highlight = hook:FindFirstChild("HookHighlight")
					if highlight then highlight:Destroy() end
				end
			end
		end
	end
})


-------------------------------------------------------
-- TOGGLE BUTTON (PUTIH AGAK TRANSPARAN) + ANIMASI BARU
-- by HDragons (WindUI Support)
-------------------------------------------------------
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

-------------------------------------------------------
-- GUI BUTTON
-------------------------------------------------------
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "WindUIButton"
ScreenGui.ResetOnSpawn = false
ScreenGui.IgnoreGuiInset = true
ScreenGui.Parent = game.CoreGui

local ImgBtn = Instance.new("ImageButton")
ImgBtn.Parent = ScreenGui
ImgBtn.Size = UDim2.new(0, 60, 0, 60)
ImgBtn.Position = UDim2.new(0, 100, 1, -250)
ImgBtn.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ImgBtn.BackgroundTransparency = 0.3
ImgBtn.Image = "rbxassetid://131269662643486" -- icon planet
ImgBtn.ImageTransparency = 0.1
ImgBtn.ImageColor3 = Color3.fromRGB(255, 255, 255)
ImgBtn.AutoButtonColor = false

local UICorner = Instance.new("UICorner", ImgBtn)
UICorner.CornerRadius = UDim.new(1, 0)

local UIStroke = Instance.new("UIStroke", ImgBtn)
UIStroke.Color = Color3.fromRGB(200, 200, 200)
UIStroke.Thickness = 2
UIStroke.Transparency = 0.4
UIStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

-------------------------------------------------------
-- EFEK HOVER (Glow halus)
-------------------------------------------------------
ImgBtn.MouseEnter:Connect(function()
	TweenService:Create(ImgBtn, TweenInfo.new(0.2), {
		BackgroundTransparency = 0.15
	}):Play()
	TweenService:Create(UIStroke, TweenInfo.new(0.2), {
		Transparency = 0.1
	}):Play()
end)

ImgBtn.MouseLeave:Connect(function()
	TweenService:Create(ImgBtn, TweenInfo.new(0.3), {
		BackgroundTransparency = 0.3
	}):Play()
	TweenService:Create(UIStroke, TweenInfo.new(0.3), {
		Transparency = 0.4
	}):Play()
end)

-------------------------------------------------------
-- ANIMASI KLIK (shrink + pulse)
-------------------------------------------------------
local function playClickAnim()
	local shrink = TweenService:Create(ImgBtn, TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
		Size = UDim2.new(0, 52, 0, 52)
	})
	local grow = TweenService:Create(ImgBtn, TweenInfo.new(0.25, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
		Size = UDim2.new(0, 60, 0, 60)
	})
	shrink:Play()
	shrink.Completed:Wait()
	grow:Play()
end

-------------------------------------------------------
-- ANIMASI WINDOW OPEN/CLOSE (Fade + Slide)
-------------------------------------------------------
local function animateWindowOpen(windowFrame)
	if not windowFrame then return end
	windowFrame.Visible = true
	windowFrame.BackgroundTransparency = 1
	windowFrame.Position = windowFrame.Position + UDim2.new(0, 0, 0.05, 0)

	TweenService:Create(windowFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
		BackgroundTransparency = 0,
		Position = windowFrame.Position - UDim2.new(0, 0, 0.05, 0)
	}):Play()
end

local function animateWindowClose(windowFrame)
	if not windowFrame then return end
	local tween = TweenService:Create(windowFrame, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.In), {
		BackgroundTransparency = 1,
		Position = windowFrame.Position + UDim2.new(0, 0, 0.05, 0)
	})
	tween:Play()
	tween.Completed:Wait()
	windowFrame.Visible = false
end

-------------------------------------------------------
-- SISTEM TOGGLE WINDUI
-------------------------------------------------------
local isOpen = true
local debounce = false

ImgBtn.MouseButton1Click:Connect(function()
	if debounce then return end
	debounce = true
	playClickAnim()

	task.defer(function()
		if Window and Window.Open and Window.Close then
			local guiFrame = Window.GUI or Window.Frame or Window.MainFrame

			if isOpen then
				animateWindowClose(guiFrame)
				Window:Close()
			else
				Window:Open()
				animateWindowOpen(guiFrame)
			end
			isOpen = not isOpen
		else
			warn("âš ï¸ WindUI belum siap! Pastikan variabel 'Window' sudah dibuat.")
		end

		task.wait(0.3)
		debounce = false
	end)
end)

-------------------------------------------------------
-- DRAGGING SUPPORT
-------------------------------------------------------
local dragging, dragInput, dragStart, startPos

local function update(input)
	local delta = input.Position - dragStart
	ImgBtn.Position = UDim2.new(
		startPos.X.Scale, startPos.X.Offset + delta.X,
		startPos.Y.Scale, startPos.Y.Offset + delta.Y
	)
end

ImgBtn.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragging = true
		dragStart = input.Position
		startPos = ImgBtn.Position

		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

ImgBtn.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
		dragInput = input
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if input == dragInput and dragging then
		update(input)
	end
end)


-- LocalScript (StarterPlayerScripts)
local player = game.Players.LocalPlayer
local UIS = game:GetService("UserInputService")

local dashDistance = 12
local dashSpeed = 0.2
local steps = 10
local guiName = "DashGUI"

-- Fungsi dash smooth
local function dashSmooth(hrp)
    if not hrp then return end
    local forwardVector = hrp.CFrame.LookVector
    local startPos = hrp.Position
    local endPos = startPos + forwardVector * dashDistance

    for i = 1, steps do
        local alpha = i / steps
        local pos = startPos:Lerp(endPos, alpha)
        hrp.CFrame = CFrame.new(pos, pos + forwardVector)
        task.wait(dashSpeed / steps)
    end
end

-- Fungsi buat GUI
local function createDashGUI()
    -- Cek kalau udah ada, hapus dulu
    local existing = player:FindFirstChild("PlayerGui"):FindFirstChild(guiName)
    if existing then
        existing:Destroy()
    end

    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = guiName
    screenGui.ResetOnSpawn = false
    screenGui.Parent = player:WaitForChild("PlayerGui")

    local dashButton = Instance.new("TextButton")
    dashButton.Size = UDim2.new(0, 100, 0, 50)
    dashButton.Position = UDim2.new(0.5, -50, 0.9, 0)
    dashButton.Text = "Dash"
    dashButton.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
    dashButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    dashButton.Parent = screenGui

    -- Drag logic
    local dragging, dragInput, dragStart, startPosButton
    local function update(input)
        local delta = input.Position - dragStart
        dashButton.Position = UDim2.new(
            startPosButton.X.Scale, startPosButton.X.Offset + delta.X,
            startPosButton.Y.Scale, startPosButton.Y.Offset + delta.Y
        )
    end

    dashButton.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPosButton = dashButton.Position

            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)

    dashButton.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
            dragInput = input
        end
    end)

    UIS.InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            update(input)
        end
    end)

    return dashButton
end

-- Listener respawn karakter
local function setupCharacter(char)
    local hrp = char:WaitForChild("HumanoidRootPart")
    local dashButton = createDashGUI()
    dashButton.MouseButton1Click:Connect(function()
        dashSmooth(hrp)
    end)

    -- Loop cek GUI hilang
    task.spawn(function()
        while char.Parent do
            if not player:FindFirstChild("PlayerGui"):FindFirstChild(guiName) then
                dashButton = createDashGUI()
                dashButton.MouseButton1Click:Connect(function()
                    dashSmooth(hrp)
                end)
            end
            task.wait(1) -- cek tiap 1 detik
        end
    end)
end

player.CharacterAdded:Connect(setupCharacter)
if player.Character then
    setupCharacter(player.Character)
end
